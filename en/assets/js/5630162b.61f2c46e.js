"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3642],{5934:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>x,frontMatter:()=>s,metadata:()=>t,toc:()=>h});var r=i(5893),l=i(1151);const s={sidebar_position:26},d="UART \u4f7f\u7528\u6307\u5357",t={id:"D213-DevKit/part3/07-11_UART-Useguide",title:"UART \u4f7f\u7528\u6307\u5357",description:"1. \u6a21\u5757\u4ecb\u7ecd",source:"@site/docs/D213-DevKit/part3/07-11_UART-Useguide.md",sourceDirName:"D213-DevKit/part3",slug:"/D213-DevKit/part3/07-11_UART-Useguide",permalink:"/en/docs/D213-DevKit/part3/07-11_UART-Useguide",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/ArtInChip-Docs/tree/master/docs/D213-DevKit/part3/07-11_UART-Useguide.md",tags:[],version:"current",sidebarPosition:26,frontMatter:{sidebar_position:26},sidebar:"d213dkSidebar",previous:{title:"SPI \u4f7f\u7528\u6307\u5357",permalink:"/en/docs/D213-DevKit/part3/07-10_SPI-Useguide"},next:{title:"USB \u4f7f\u7528\u6307\u5357",permalink:"/en/docs/D213-DevKit/part3/07-12_USB-Useguide"}},c={},h=[{value:"1. \u6a21\u5757\u4ecb\u7ecd",id:"1-\u6a21\u5757\u4ecb\u7ecd",level:2},{value:"1.1. \u672f\u8bed\u5b9a\u4e49",id:"11-\u672f\u8bed\u5b9a\u4e49",level:3},{value:"1.2. \u6a21\u5757\u7b80\u4ecb",id:"12-\u6a21\u5757\u7b80\u4ecb",level:3},{value:"1.3. \u901a\u4fe1\u534f\u8bae",id:"13-\u901a\u4fe1\u534f\u8bae",level:3},{value:"1.4. \u53c2\u6570\u4fe1\u606f",id:"14-\u53c2\u6570\u4fe1\u606f",level:3},{value:"1.5. \u5e38\u7528\u63a5\u53e3",id:"15-\u5e38\u7528\u63a5\u53e3",level:3},{value:"1.5.1. TTL",id:"151-ttl",level:4},{value:"1.5.2. RS232",id:"152-rs232",level:4},{value:"1.5.3. RS422",id:"153-rs422",level:4},{value:"1.5.4. RS485",id:"154-rs485",level:4},{value:"1.6. \u63d2\u5934",id:"16-\u63d2\u5934",level:3},{value:"1.6.1. \u516c\u6bcd\u4e4b\u5206",id:"161-\u516c\u6bcd\u4e4b\u5206",level:4},{value:"1.6.2. DB-9\u63a5\u53e3",id:"162-db-9\u63a5\u53e3",level:4},{value:"1.7. \u6d41\u63a7",id:"17-\u6d41\u63a7",level:3},{value:"1.7.1. \u786c\u4ef6\u6d41\u63a7",id:"171-\u786c\u4ef6\u6d41\u63a7",level:4},{value:"1.7.2. \u8f6f\u4ef6\u6d41\u63a7",id:"172-\u8f6f\u4ef6\u6d41\u63a7",level:4},{value:"1.8. RAW\u6a21\u5f0f",id:"18-raw\u6a21\u5f0f",level:3},{value:"1.9. \u6a21\u5757\u7279\u6027",id:"19-\u6a21\u5757\u7279\u6027",level:3},{value:"2. \u4f7f\u7528\u6307\u5357",id:"2-\u4f7f\u7528\u6307\u5357",level:2},{value:"2.1. \u5185\u6838\u914d\u7f6e",id:"21-\u5185\u6838\u914d\u7f6e",level:3},{value:"2.2. \u7cfb\u7edf\u53c2\u6570\u914d\u7f6e",id:"22-\u7cfb\u7edf\u53c2\u6570\u914d\u7f6e",level:3},{value:"2.3. \u529f\u80fd\u53c2\u6570\u914d\u7f6e",id:"23-\u529f\u80fd\u53c2\u6570\u914d\u7f6e",level:3},{value:"2.4. \u8c03\u8bd5\u7aef\u53e3",id:"24-\u8c03\u8bd5\u7aef\u53e3",level:3},{value:"3. \u8c03\u8bd5\u6307\u5357",id:"3-\u8c03\u8bd5\u6307\u5357",level:2},{value:"3.1. \u8c03\u8bd5\u5f00\u5173",id:"31-\u8c03\u8bd5\u5f00\u5173",level:3},{value:"3.1.1. Log\u7b49\u7ea7",id:"311-log\u7b49\u7ea7",level:4},{value:"3.1.2. \u8c03\u8bd5\u5f00\u5173",id:"312-\u8c03\u8bd5\u5f00\u5173",level:4},{value:"3.2. \u8c03\u8bd5\u7aef\u53e3",id:"32-\u8c03\u8bd5\u7aef\u53e3",level:3},{value:"3.2.1. \u7aef\u53e3\u914d\u7f6e",id:"321-\u7aef\u53e3\u914d\u7f6e",level:4},{value:"3.2.2. \u8c03\u8bd5\u7aef\u53e3\u6307\u5b9a",id:"322-\u8c03\u8bd5\u7aef\u53e3\u6307\u5b9a",level:4},{value:"3.3. \u529f\u80fd\u9a8c\u8bc1",id:"33-\u529f\u80fd\u9a8c\u8bc1",level:3},{value:"3.3.1. \u9a71\u52a8\u52a0\u8f7d",id:"331-\u9a71\u52a8\u52a0\u8f7d",level:4},{value:"3.3.2. \u8bbe\u5907\u4fe1\u606f",id:"332-\u8bbe\u5907\u4fe1\u606f",level:4},{value:"3.3.3. \u8bbe\u5907\u901a\u4fe1",id:"333-\u8bbe\u5907\u901a\u4fe1",level:4},{value:"3.3.3.1. \u7f16\u8bd1\u6d4b\u8bd5\u5de5\u5177",id:"3331-\u7f16\u8bd1\u6d4b\u8bd5\u5de5\u5177",level:5},{value:"3.3.3.2. \u7aef\u53e3\u73af\u8def\u6d4b\u8bd5",id:"3332-\u7aef\u53e3\u73af\u8def\u6d4b\u8bd5",level:5},{value:"3.4. \u95ee\u9898\u6392\u67e5\u6d41\u7a0b",id:"34-\u95ee\u9898\u6392\u67e5\u6d41\u7a0b",level:3},{value:"4. \u6d4b\u8bd5\u6307\u5357",id:"4-\u6d4b\u8bd5\u6307\u5357",level:2},{value:"4.1. \u51c6\u5907\u5de5\u4f5c",id:"41-\u51c6\u5907\u5de5\u4f5c",level:3},{value:"4.1.1. \u786c\u4ef6",id:"411-\u786c\u4ef6",level:4},{value:"4.1.2. \u8f6f\u4ef6",id:"412-\u8f6f\u4ef6",level:4},{value:"4.2. \u6d4b\u8bd5\u7ec4\u7f51",id:"42-\u6d4b\u8bd5\u7ec4\u7f51",level:3},{value:"4.2.1. \u5355\u7aef\u53e3\u7684\u73af\u8def\u6d4b\u8bd5",id:"421-\u5355\u7aef\u53e3\u7684\u73af\u8def\u6d4b\u8bd5",level:4},{value:"4.2.2. \u53cc\u7aef\u53e3\u7684\u73af\u8def\u6d4b\u8bd5",id:"422-\u53cc\u7aef\u53e3\u7684\u73af\u8def\u6d4b\u8bd5",level:4},{value:"4.3. RS232\u529f\u80fd\u6d4b\u8bd5",id:"43-rs232\u529f\u80fd\u6d4b\u8bd5",level:3},{value:"4.3.1. \u5355\u7aef\u53e3\u6536\u53d1",id:"431-\u5355\u7aef\u53e3\u6536\u53d1",level:4},{value:"4.3.2. \u53cc\u7aef\u53e3\u6536\u53d1",id:"432-\u53cc\u7aef\u53e3\u6536\u53d1",level:4},{value:"4.4. RS485 \u529f\u80fd\u6d4b\u8bd5",id:"44-rs485-\u529f\u80fd\u6d4b\u8bd5",level:3},{value:"4.5. \u517c\u5bb9\u6027\u6d4b\u8bd5",id:"45-\u517c\u5bb9\u6027\u6d4b\u8bd5",level:3},{value:"4.5.1. \u4e32\u53e3\u5de5\u5177\u517c\u5bb9\u6027\u6d4b\u8bd5",id:"451-\u4e32\u53e3\u5de5\u5177\u517c\u5bb9\u6027\u6d4b\u8bd5",level:4},{value:"4.5.2. RS485 \u517c\u5bb9\u6027\u6d4b\u8bd5",id:"452-rs485-\u517c\u5bb9\u6027\u6d4b\u8bd5",level:4},{value:"4.6. \u538b\u529b\u6d4b\u8bd5",id:"46-\u538b\u529b\u6d4b\u8bd5",level:3},{value:"4.7. \u7a33\u5b9a\u6027\u6d4b\u8bd5",id:"47-\u7a33\u5b9a\u6027\u6d4b\u8bd5",level:3},{value:"5. \u6e90\u7801\u8bf4\u660e",id:"5-\u6e90\u7801\u8bf4\u660e",level:2},{value:"5.1. \u4e32\u53e3\u82af\u7247",id:"51-\u4e32\u53e3\u82af\u7247",level:3},{value:"5.1.1. 8250",id:"511-8250",level:4},{value:"5.1.2. 16450",id:"512-16450",level:4},{value:"5.1.3. 16550",id:"513-16550",level:4},{value:"5.2. \u9a71\u52a8\u914d\u7f6e\u5b8f",id:"52-\u9a71\u52a8\u914d\u7f6e\u5b8f",level:3},{value:"5.3. \u5bc4\u5b58\u5668",id:"53-\u5bc4\u5b58\u5668",level:3},{value:"5.3.1. \u6807\u51c6\u5bc4\u5b58\u5668",id:"531-\u6807\u51c6\u5bc4\u5b58\u5668",level:4},{value:"5.3.2. \u6269\u5c55\u5bc4\u5b58\u5668",id:"532-\u6269\u5c55\u5bc4\u5b58\u5668",level:4},{value:"5.4. \u7a0b\u5e8f\u5165\u53e3",id:"54-\u7a0b\u5e8f\u5165\u53e3",level:3},{value:"5.4.1. 8250_core",id:"541-8250_core",level:4},{value:"5.4.2. aic-uart",id:"542-aic-uart",level:4},{value:"5.5. \u6570\u636e\u7ed3\u6784",id:"55-\u6570\u636e\u7ed3\u6784",level:3},{value:"5.5.1. uart_8250_port",id:"551-uart_8250_port",level:4},{value:"5.5.2. uart_port",id:"552-uart_port",level:4},{value:"5.5.3. aic8250_data",id:"553-aic8250_data",level:4},{value:"5.5.4. Operations",id:"554-operations",level:4},{value:"5.6. \u5173\u952e\u6d41\u7a0b",id:"56-\u5173\u952e\u6d41\u7a0b",level:3},{value:"5.6.1. serial8250_init",id:"561-serial8250_init",level:4},{value:"5.6.2. aic8250_probe",id:"562-aic8250_probe",level:4},{value:"5.6.3. serial8250_register_8250_port",id:"563-serial8250_register_8250_port",level:4},{value:"5.7. RS485",id:"57-rs485",level:3},{value:"5.7.1. \u6807\u51c6\u6a21\u5f0f",id:"571-\u6807\u51c6\u6a21\u5f0f",level:4},{value:"5.7.2. \u7cbe\u7b80\u6a21\u5f0f",id:"572-\u7cbe\u7b80\u6a21\u5f0f",level:4},{value:"5.8. DMA",id:"58-dma",level:3},{value:"5.8.1. \u7279\u6b8a\u6027",id:"581-\u7279\u6b8a\u6027",level:4},{value:"5.8.2. DMA\u5bc4\u5b58\u5668",id:"582-dma\u5bc4\u5b58\u5668",level:4},{value:"5.9. \u4fee\u6539\u603b\u7ed3",id:"59-\u4fee\u6539\u603b\u7ed3",level:3},{value:"5.9.1. \u9a71\u52a8\u63a5\u53e3",id:"591-\u9a71\u52a8\u63a5\u53e3",level:4},{value:"5.9.2. RS485\u652f\u6301",id:"592-rs485\u652f\u6301",level:4},{value:"6. \u5e38\u89c1\u95ee\u9898",id:"6-\u5e38\u89c1\u95ee\u9898",level:2},{value:"6.1. \u7aef\u53e3\u975etty\u8bbe\u5907",id:"61-\u7aef\u53e3\u975etty\u8bbe\u5907",level:3},{value:"6.1.1. \u73b0\u8c61",id:"611-\u73b0\u8c61",level:4},{value:"6.1.2. \u539f\u56e0",id:"612-\u539f\u56e0",level:4},{value:"6.2. \u957f\u5305\u5361\u6b7b",id:"62-\u957f\u5305\u5361\u6b7b",level:3},{value:"6.2.1. \u73b0\u8c61",id:"621-\u73b0\u8c61",level:4},{value:"6.2.2. \u539f\u56e0",id:"622-\u539f\u56e0",level:4},{value:"6.3. \u521d\u59cb\u5316\u4e71\u7801",id:"63-\u521d\u59cb\u5316\u4e71\u7801",level:3},{value:"6.3.1. \u73b0\u8c61",id:"631-\u73b0\u8c61",level:4},{value:"6.3.2. \u539f\u56e0",id:"632-\u539f\u56e0",level:4}];function a(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"uart-\u4f7f\u7528\u6307\u5357",children:"UART \u4f7f\u7528\u6307\u5357"}),"\n",(0,r.jsx)(e.h2,{id:"1-\u6a21\u5757\u4ecb\u7ecd",children:"1. \u6a21\u5757\u4ecb\u7ecd"}),"\n",(0,r.jsx)(e.h3,{id:"11-\u672f\u8bed\u5b9a\u4e49",children:"1.1. \u672f\u8bed\u5b9a\u4e49"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u672f\u8bed"}),(0,r.jsx)(e.th,{children:"\u5b9a\u4e49"}),(0,r.jsx)(e.th,{children:"\u6ce8\u91ca\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"UART"}),(0,r.jsx)(e.td,{children:"Universal Asynchronous Receiver/Transmitter"}),(0,r.jsx)(e.td,{children:"\u901a\u7528\u5f02\u6b65\u6536\u53d1\u4f20\u8f93\u5668"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"TTL"}),(0,r.jsx)(e.td,{children:"Transistor-Transistor Logic"}),(0,r.jsx)(e.td,{children:"\u903b\u8f91\u95e8\u7535\u8def"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"DCD"}),(0,r.jsx)(e.td,{children:"Data Carrier Detect"}),(0,r.jsx)(e.td,{children:"\u8f7d\u6ce2\u4fa6\u542c"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"DTR"}),(0,r.jsx)(e.td,{children:"Data Terminal Ready"}),(0,r.jsx)(e.td,{children:"\u6570\u636e\u7ec8\u7aef\u51c6\u5907\u597d"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"DSR"}),(0,r.jsx)(e.td,{children:"Data Set Ready"}),(0,r.jsx)(e.td,{children:"\u6570\u636e\u51c6\u5907\u597d"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"RTS"}),(0,r.jsx)(e.td,{children:"Request To Send"}),(0,r.jsx)(e.td,{children:"\u8bf7\u6c42\u53d1\u9001"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"CTS"}),(0,r.jsx)(e.td,{children:"Clear To Send"}),(0,r.jsx)(e.td,{children:"\u6e05\u9664\u53d1\u9001"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"RI"}),(0,r.jsx)(e.td,{children:"Ring Indicator"}),(0,r.jsx)(e.td,{children:"\u54cd\u94c3\u6307\u793a"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"THR"}),(0,r.jsx)(e.td,{children:"Transmit Holding Register"}),(0,r.jsx)(e.td,{children:"\u53d1\u9001\u4fdd\u6301\u5bc4\u5b58\u5668"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"RBR"}),(0,r.jsx)(e.td,{children:"Receive Buffer Register"}),(0,r.jsx)(e.td,{children:"\u63a5\u6536\u7f13\u51b2\u5bc4\u5b58\u5668"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ACPI"}),(0,r.jsx)(e.td,{children:"Advanced Configuration and Power Interface"}),(0,r.jsx)(e.td,{children:"\u9ad8\u9636\u914d\u7f6e\u548c\u7535\u6e90\u63a5\u53e3"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"12-\u6a21\u5757\u7b80\u4ecb",children:"1.2. \u6a21\u5757\u7b80\u4ecb"}),"\n",(0,r.jsx)(e.p,{children:"\u901a\u7528\u5f02\u6b65\u6536\u53d1\u4f20\u8f93\u5668\uff08Universal Asynchronous Receiver/Transmitter)\uff0c\u901a\u5e38\u79f0\u4f5c UART\uff0c\u662f\u4e00\u79cd\u901a\u7528\u4e32\u884c\u6570\u636e\u603b\u7ebf\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u4e32\u884c\u901a\u4fe1\u662f\u6307\u5229\u7528\u4e00\u6761\u4f20\u8f93\u7ebf\u5c06\u6570\u636e\u4e00\u4f4d\u4f4d\u5730\u987a\u5e8f\u4f20\u9001\uff0c\u901a\u4fe1\u7ebf\u8def\u975e\u5e38\u7b80\u5355\u3002"}),"\n",(0,r.jsx)(e.p,{children:"UART \u4e3a\u53cc\u5411\u901a\u4fe1\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5168\u53cc\u5de5\u4f20\u8f93\u548c\u63a5\u6536\u3002\u5728\u5d4c\u5165\u5f0f\u8bbe\u8ba1\u4e2d\uff0cUART \u7528\u4e8e\u4e3b\u673a\u4e0e\u8f85\u52a9\u8bbe\u5907\u901a\u4fe1\uff0c\u5982\u6c7d\u8f66\u97f3\u54cd\u4e0e\u5916\u63a5AP\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u4e5f\u7528\u4e8e PC \u673a\u901a\u4fe1\u5305\u62ec\u4e0e\u76d1\u63a7\u8c03\u8bd5\u5668\u548c\u5176\u5b83\u5668\u4ef6\uff0c\u5982 EEPROM \u901a\u4fe1\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u5728 UART \u4e0a\u8ffd\u52a0\u540c\u6b65\u65b9\u5f0f\u7684\u5e8f\u5217\u4fe1\u53f7\u53d8\u6362\u7535\u8def\u7684\u4ea7\u54c1\uff0c\u88ab\u79f0\u4e3a USART(Universal Synchronous Asynchronous Receiver Transmitter)"}),"\n",(0,r.jsx)(e.h3,{id:"13-\u901a\u4fe1\u534f\u8bae",children:"1.3. \u901a\u4fe1\u534f\u8bae"}),"\n",(0,r.jsx)(e.p,{children:"UART \u4f5c\u4e3a\u5f02\u6b65\u4e32\u884c\u901a\u4fe1\u534f\u8bae\u7684\u4e00\u79cd\uff0c\u5de5\u4f5c\u539f\u7406\u662f\u5c06\u4f20\u8f93\u6570\u636e\u7684\u6bcf\u4e2a\u5b57\u7b26\u4e00\u4f4d\u63a5\u4e00\u4f4d\u5730\u4f20\u8f93\u3002\u5176\u534f\u8bae\u4e2d\u6dfb\u52a0\u4e86\u4e00\u4e9b\u7279\u6b8a\u7684\u8868\u793a\u4f4d\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u8d77\u59cb\u4f4d Start bit"}),"\n",(0,r.jsx)(e.p,{children:"\u5148\u53d1\u51fa\u4e00\u4e2a\u903b\u8f91\u201c0\u201d\u7684\u4fe1\u53f7\uff0c\u8868\u793a\u4f20\u8f93\u5b57\u7b26\u7684\u5f00\u59cb"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u6570\u636e\u4f4d Data bits"}),"\n",(0,r.jsx)(e.p,{children:"\u7d27\u63a5\u7740\u8d77\u59cb\u4f4d\u4e4b\u540e\u3002\u6570\u636e\u4f4d\u7684\u4e2a\u6570\u53ef\u4ee5\u662f4\u30015\u30016\u30017\u30018\u7b49\uff0c\u6784\u6210\u4e00\u4e2a\u5b57\u7b26\u3002\u901a\u5e38\u91c7\u7528 ASCII \u7801\u3002\u4ece\u6700\u4f4e\u4f4d\u5f00\u59cb\u4f20\u9001\uff0c\u9760\u65f6\u949f\u5b9a\u4f4d\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u5947\u5076\u6821\u9a8c\u4f4d Parity"}),"\n",(0,r.jsx)(e.p,{children:"\u6570\u636e\u4f4d\u52a0\u4e0a\u8fd9\u4e00\u4f4d\u540e\uff0c\u4f7f\u5f97\u201c1\u201d\u7684\u4f4d\u6570\u5e94\u4e3a\u5076\u6570(\u5076\u6821\u9a8c)\u6216\u5947\u6570(\u5947\u6821\u9a8c)\uff0c\u4ee5\u6b64\u6765\u6821\u9a8c\u6570\u636e\u4f20\u9001\u7684\u6b63\u786e\u6027\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u505c\u6b62\u4f4d Stop bits"}),"\n",(0,r.jsx)(e.p,{children:"\u5b83\u662f\u4e00\u4e2a\u5b57\u7b26\u6570\u636e\u7684\u7ed3\u675f\u6807\u5fd7\u3002\u53ef\u4ee5\u662f1\u4f4d\u30011.5\u4f4d\u30012\u4f4d\u7684\u9ad8\u7535\u5e73\u3002 \u7531\u4e8e\u6570\u636e\u662f\u5728\u4f20\u8f93\u7ebf\u4e0a\u5b9a\u65f6\u7684\uff0c\u5e76\u4e14\u6bcf\u4e00\u4e2a\u8bbe\u5907\u6709\u5176\u81ea\u5df1\u7684\u65f6\u949f\uff0c\u5f88\u53ef\u80fd\u5728\u901a\u4fe1\u4e2d\u4e24\u53f0\u8bbe\u5907\u95f4\u51fa\u73b0\u4e86\u5c0f\u5c0f\u7684\u4e0d\u540c\u6b65\u3002\u56e0\u6b64\u505c\u6b62\u4f4d\u4e0d\u4ec5\u4ec5\u662f\u8868\u793a\u4f20\u8f93\u7684\u7ed3\u675f\uff0c\u5e76\u4e14\u63d0\u4f9b\u8ba1\u7b97\u673a\u6821\u6b63\u65f6\u949f\u540c\u6b65\u7684\u673a\u4f1a\u3002\u505c\u6b62\u4f4d\u7684\u4f4d\u6570\u8d8a\u591a\uff0c\u65f6\u949f\u540c\u6b65\u7684\u5bb9\u5fcd\u7a0b\u5ea6\u8d8a\u5927\uff0c\u4f46\u662f\u6570\u636e\u4f20\u8f93\u7387\u4f1a\u8d8a\u6162"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u6d41\u63a7 Flow contorl"}),"\n",(0,r.jsx)(e.p,{children:"\u7ba1\u7406\u4e24\u4e2a\u8282\u70b9\u4e4b\u95f4\u6570\u636e\u4f20\u8f93\u901f\u7387\u7684\u8fc7\u7a0b\uff0c\u4ee5\u9632\u6b62\u51fa\u73b0\u63a5\u6536\u7aef\u7684\u6570\u636e\u7f13\u51b2\u533a\u5df2\u6ee1\uff0c\u800c\u53d1\u9001\u7aef\u4f9d\u7136\u7ee7\u7eed\u53d1\u9001\u6570\u636e\uff0c\u6240\u5bfc\u81f4\u6570\u636e\u4e22\u5931\uff0c\u6211\u4eec\u4f1a\u5728\u4e00\u4e9b\u4e0a\u4f4d\u673a\u4e0a\u770b\u5230 RTS /CTS\u3001DTR /DSR\u548c XON /XOFF\u7684\u9009\u9879\uff0c\u8fd9\u662f\u5bf9\u6d41\u63a7\u5236\u7684\u9009\u9879"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u7a7a\u95f2\u4f4d"}),"\n",(0,r.jsx)(e.p,{children:"\u5904\u4e8e\u903b\u8f91\u201c1\u201d\u72b6\u6001\uff0c\u8868\u793a\u5f53\u524d\u7ebf\u8def\u4e0a\u6ca1\u6709\u6570\u636e\u4f20\u9001\uff0c\u8be5\u4f4d\u4e3a\u534f\u8bae\u4f4d\uff0c\u81ea\u52a8\u4ea7\u751f"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u6ce2\u7279\u7387 BaudRate"}),"\n",(0,r.jsx)(e.p,{children:"\u662f\u8861\u91cf\u6570\u636e\u4f20\u9001\u901f\u7387\u7684\u6307\u6807\u3002\u8868\u793a\u6bcf\u79d2\u949f\u4f20\u9001\u7684bit\u6570\u3002\u6bd4\u5982\u6ce2\u7279\u7387 115200\uff0c\u8868\u793a\u4f20\u8f93\u901f\u7387\u662f 115200 bps"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"14-\u53c2\u6570\u4fe1\u606f",children:"1.4. \u53c2\u6570\u4fe1\u606f"}),"\n",(0,r.jsx)(e.p,{children:"\u5728 UART \u8fdb\u884c\u901a\u4fe1\u7684\u65f6\u5019\uff0c\u53cc\u65b9\u9700\u8981\u534f\u5546\u76f8\u5173\u53c2\u6570\uff0c\u5426\u5219\u65e0\u6cd5\u8fdb\u884c\u4fe1\u606f\u89e3\u6790\uff0c\u56e0\u6b64\u5728\u901a\u4fe1\u4e4b\u521d\uff0c\u9700\u8981\u5bf9\u6240\u4f7f\u7528\u7684\u5de5\u5177\u8bbe\u7f6e\u4e0a\u8ff0\u7684\u6240\u6709\u53c2\u6570"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://photos.100ask.net/artinchip-docs/d213-devkit/uart-param1-17067626921621.jpg",alt:"../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/uart-param1.jpg"})}),"\n",(0,r.jsx)(e.h3,{id:"15-\u5e38\u7528\u63a5\u53e3",children:"1.5. \u5e38\u7528\u63a5\u53e3"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4e32\u53e3\u3001COM \u53e3\u662f\u6307\u7684\u7269\u7406\u63a5\u53e3\u5f62\u5f0f(\u786c\u4ef6)\u3002"}),"\n",(0,r.jsx)(e.li,{children:"TTL\u3001RS-232\u3001RS-485 \u662f\u6307\u7684\u7535\u5e73\u6807\u51c6(\u7535\u4fe1\u53f7)\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"151-ttl",children:"1.5.1. TTL"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"TTL\u6807\u51c6\u662f\u4f4e\u7535\u5e73\uff080V\uff09\u4e3a0\uff0c\u9ad8\u7535\u5e73\uff08+5V\uff09\u4e3a1\u3002"}),"\n",(0,r.jsx)(e.li,{children:"TTL \u63a5\u53e3\u9700\u8981\u5bf9\u7aef\u63a5\u53e3\u4e5f\u4e3a TTL\uff0c\u4f46\u8bf8\u5982 PC \u7b49\u8bbe\u5907\u65e0 TTL \u63a5\u53e3\u7684UART\u53e3\uff0c\u4e00\u822c\u8f6c TTL \u4e3a USB \u7b49 PC \u66f4\u901a\u7528\u7684\u63a5\u53e3\u3002"}),"\n",(0,r.jsx)(e.li,{children:"TTL \u63a5\u53e3\u4e3a\u5168\u53cc\u5de5\uff0c\u8fde\u63a5\u8bbe\u5907\u7684\u65f6\u5019\u4e00\u822c\u53ea\u63a5 GND/RX/TX\u3002\u4e0d\u4f1a\u63a5Vcc\u6216\u8005 +3.3v \u7684\u7535\u6e90\u7ebf\uff0c\u907f\u514d\u4e0e\u76ee\u6807\u8bbe\u5907\u4e0a\u7684\u4f9b\u7535\u51b2\u7a81\uff0c\u4f46 GND \u53ef\u4ee5\u4fdd\u8bc1\u6e90\u8bbe\u5907\u548c\u76ee\u6807\u8bbe\u5907\u4f9b\u5730\uff0c\u6709\u52a9\u4e8e\u4fe1\u53f7\u7a33\u5b9a\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u4fe1\u53f7\u7ebf\u91c7\u7528\u4ea4\u53c9\u7684\u65b9\u5f0f\uff0c\u5373\u6e90\u7aef\u7684 RX \u8fde\u63a5\u76ee\u6807\u8bbe\u5907\u7684 TX\uff0c\u6e90\u7aef\u7684 TX \u8fde\u63a5\u76ee\u6807\u8bbe\u5907\u7684 RX\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"152-rs232",children:"1.5.2. RS232"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"RS232 \u6807\u51c6\u662f\u6b63\u7535\u5e73\uff08+3V~+15V\uff09\u4e3a0\uff0c\u8d1f\u7535\u5e73\uff08-13V~-15V\uff09\u4e3a1\u3002"}),"\n",(0,r.jsx)(e.li,{children:"RS232 \u63a5\u53e3\u5728\u603b\u7ebf\u4e0a\u53ea\u5141\u8bb8\u8fde\u63a51\u4e2a\u6536\u53d1\u5668\uff0c\u5355\u7ad9\u80fd\u529b\u3002"}),"\n",(0,r.jsx)(e.li,{children:"RS232 \u4f20\u8f93\u7ebf\u91c7\u7528\u5c4f\u853d\u53cc\u7ede\u7ebf\uff0c\u6700\u9ad8\u4f20\u8f93\u8ddd\u79bb\u4e00\u822c\u4e3a 15M\uff0c\u6700\u5927\u901f\u7387\u4e3a 20Kbps\u3002"}),"\n",(0,r.jsx)(e.li,{children:"RS232 \u63a5\u53e3\u4e3a\u5168\u53cc\u5de5\uff0c\u8fde\u63a5\u8bbe\u5907\u7684\u65f6\u5019\u4e00\u822c\u53ea\u63a5 GND/RX/TX\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u4fe1\u53f7\u7ebf\u4e5f\u91c7\u7528\u4ea4\u53c9\u7684\u65b9\u5f0f\uff0c\u5373\u6e90\u7aef\u7684RX\u8fde\u63a5\u76ee\u6807\u8bbe\u5907\u7684 TX\uff0c\u6e90\u7aef\u7684 TX \u8fde\u63a5\u76ee\u6807\u8bbe\u5907\u7684 RX\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"153-rs422",children:"1.5.3. RS422"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"RS422 \u6807\u51c6\u91c7\u7528\u5dee\u5206\u4fe1\u53f7\u8d1f\u903b\u8f91\uff0c\u903b\u8f91\u201c1\u201d\u4ee5\u4e24\u7ebf\u95f4\u7684\u7535\u538b\u5dee\u4e3a+\uff082\u20146\uff09V\u8868\u793a\uff1b\u903b\u8f91\u201c0\u201d\u4ee5\u4e24\u7ebf\u95f4\u7684\u7535\u538b\u5dee\u4e3a-\uff082\u20146\uff09V\u8868\u793a\u3002\u63a5\u53e3\u4fe1\u53f7\u7535\u5e73\u6bd4 RS232 \u964d\u4f4e\u4e86\uff0c\u5c31\u4e0d\u6613\u635f\u574f\u63a5\u53e3\u7535\u8def\u7684\u82af\u7247\uff0c\u4e14\u8be5\u7535\u5e73\u4e0e TTL \u7535\u5e73\u517c\u5bb9\uff0c\u53ef\u65b9\u4fbf\u4e0eTTL\u7535\u8def\u8fde\u63a5\u3002"}),"\n",(0,r.jsx)(e.li,{children:"RS422 \u63a5\u53e3\u5728\u603b\u7ebf\u4e0a\u662f\u5141\u8bb8\u8fde\u63a5\u591a\u8fbe128\u4e2a\u6536\u53d1\u5668\uff0c\u591a\u7ad9\u80fd\u529b\u3002"}),"\n",(0,r.jsx)(e.li,{children:"RS422 \u7684\u6570\u636e\u6700\u9ad8\u4f20\u8f93\u901f\u7387\u4e3a 10Mbps\uff0c100\u7c73\u957f\u53cc\u7ede\u7ebf\u7684\u6700\u5927\u901f\u5ea6\u4e3a 1Mb/s\u3002"}),"\n",(0,r.jsx)(e.li,{children:"RS422 \u91c7\u7528\u5e73\u8861\u53d1\u9001\u548c\u5dee\u5206\u63a5\u6536\uff0c\u56e0\u6b64\u5177\u6709\u6291\u5236\u5171\u6a21\u5e72\u6270\u7684\u80fd\u529b\u3002RS422 \u63a5\u53e3\u7684\u6700\u5927\u4f20\u8f93\u8ddd\u79bb\u6807\u51c6\u503c\u4e3a4000\u82f1\u5c3a\uff08\u7ea61219\u7c73\uff09\uff0c\u5b9e\u9645\u4e0a\u53ef\u8fbe3000\u7c73\u3002"}),"\n",(0,r.jsx)(e.li,{children:"RS422 \u662f\u5168\u53cc\u5de5\uff0c\u8fde\u63a5\u8bbe\u5907\u7684\u65f6\u5019\u4e00\u822c\u63a5 RX+/RX-/TX+/TX-/GND\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u4fe1\u53f7\u7ebf\u4e5f\u91c7\u7528\u4ea4\u53c9\u7684\u65b9\u5f0f\uff0c\u5373\u6e90\u7aef\u7684 RX-/RX+ \u8fde\u63a5\u76ee\u6807\u8bbe\u5907\u7684 TX-/TX+\uff0c\u6e90\u7aef\u7684 TX-/TX+ \u8fde\u63a5\u76ee\u6807\u8bbe\u5907\u7684 RX-/RX+\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"154-rs485",children:"1.5.4. RS485"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"RS485 \u7684\u7535\u6c14\u6027\u80fd\u548c RS422 \u5b8c\u5168\u4e00\u6837\uff0c\u4e3b\u8981\u533a\u522b\u662f RS485 \u662f\u534a\u53cc\u5de5\u3002\u8fde\u63a5\u8bbe\u5907\u7684\u65f6\u5019\u4e00\u822c\u63a5 A-/A+/GND\uff0cDB9 \u63a5\u53e3\u5b9a\u4e49\u4e86\u4e24\u7ec4\uff0c\u540c\u65f6\u5fc5\u987b\u4f7f\u7528\u540c\u4e00\u7ec4\u7684+/-\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u4fe1\u53f7\u7ebf\u4e5f\u91c7\u7528\u4ea4\u53c9\u7684\u65b9\u5f0f\uff0c\u5373\u6e90\u7aef\u7684 A- \u8fde\u63a5\u76ee\u6807\u8bbe\u5907\u7684A-\uff0c\u6e90\u7aef\u7684 A+ \u8fde\u63a5\u76ee\u6807\u8bbe\u5907\u7684 A+\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"16-\u63d2\u5934",children:"1.6. \u63d2\u5934"}),"\n",(0,r.jsx)(e.h4,{id:"161-\u516c\u6bcd\u4e4b\u5206",children:"1.6.1. \u516c\u6bcd\u4e4b\u5206"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u9488\u5f62\u7684\u4e3a\u516c\u5934\uff0c\u5b54\u5f62\u7684\u4e3a\u6bcd\u5934"}),"\n",(0,r.jsx)(e.li,{children:"PC \u4e32\u53e3\u4e00\u822c\u4e3a\u516c\u5934\uff0c\u8bbe\u5907\u7684\u4e00\u822c\u4e3a\u6bcd\u5934"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://photos.100ask.net/artinchip-docs/d213-devkit/port-male1-17067627271843.jpg",alt:"../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/port-male1.jpg"})}),"\n",(0,r.jsx)(e.h4,{id:"162-db-9\u63a5\u53e3",children:"1.6.2. DB-9\u63a5\u53e3"}),"\n",(0,r.jsx)(e.p,{children:"RS232DB9 \u7684\u4fe1\u53f7\u5206\u5206\u56db\u7ec4\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"DCD/RI\uff1a\u7535\u6c14 Ready \u53c2\u6570"}),"\n",(0,r.jsx)(e.li,{children:"DTR/DSR\uff1a\u6a21\u5757 Ready \u53c2\u6570"}),"\n",(0,r.jsx)(e.li,{children:"RTS/CTS\uff1a\u6d41\u63a7\u53c2\u6570"}),"\n",(0,r.jsx)(e.li,{children:"RXD/TXD\uff1a\u6570\u636e\u6536\u53d1"}),"\n"]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u9488\u5e8f"}),(0,r.jsx)(e.th,{children:"RS232"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"}),(0,r.jsx)(e.th,{children:"RS422"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"}),(0,r.jsx)(e.th,{children:"RS485"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"DCD"}),(0,r.jsx)(e.td,{children:"\u6570\u636e\u8f7d\u6ce2\u68c0\u6d4b"}),(0,r.jsx)(e.td,{children:"RXD-"}),(0,r.jsx)(e.td,{children:"\u63a5\u6536"}),(0,r.jsx)(e.td,{children:"A-"}),(0,r.jsx)(e.td,{children:"\u7ec41"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"2"}),(0,r.jsx)(e.td,{children:"RXD"}),(0,r.jsx)(e.td,{children:"\u63a5\u6536\u6570\u636e"}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"3"}),(0,r.jsx)(e.td,{children:"TXD"}),(0,r.jsx)(e.td,{children:"\u53d1\u9001\u6570\u636e"}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"4"}),(0,r.jsx)(e.td,{children:"DTR"}),(0,r.jsx)(e.td,{children:"\u6570\u636e\u7ec8\u7aef\u51c6\u5907\u597d"}),(0,r.jsx)(e.td,{children:"TXD+"}),(0,r.jsx)(e.td,{children:"\u53d1\u9001"}),(0,r.jsx)(e.td,{children:"A+"}),(0,r.jsx)(e.td,{children:"\u7ec42"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"5"}),(0,r.jsx)(e.td,{children:"GND"}),(0,r.jsx)(e.td,{children:"\u4fe1\u53f7\u5730"}),(0,r.jsx)(e.td,{children:"GND"}),(0,r.jsx)(e.td,{children:"\u4fe1\u53f7\u5730"}),(0,r.jsx)(e.td,{children:"GND"}),(0,r.jsx)(e.td,{children:"\u4fe1\u53f7\u5730"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"6"}),(0,r.jsx)(e.td,{children:"DSR"}),(0,r.jsx)(e.td,{children:"\u6570\u636e\u51c6\u5907\u597d"}),(0,r.jsx)(e.td,{children:"RXD+"}),(0,r.jsx)(e.td,{children:"\u63a5\u6536"}),(0,r.jsx)(e.td,{children:"A+"}),(0,r.jsx)(e.td,{children:"\u7ec41"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"7"}),(0,r.jsx)(e.td,{children:"RTS"}),(0,r.jsx)(e.td,{children:"\u8bf7\u6c42\u53d1\u9001"}),(0,r.jsx)(e.td,{children:"RTS"}),(0,r.jsx)(e.td,{children:"\u8bf7\u6c42\u53d1\u9001"}),(0,r.jsx)(e.td,{children:"RTS"}),(0,r.jsx)(e.td,{children:"\u8bf7\u6c42\u53d1\u9001"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"8"}),(0,r.jsx)(e.td,{children:"CTS"}),(0,r.jsx)(e.td,{children:"\u6e05\u9664\u53d1\u9001"}),(0,r.jsx)(e.td,{children:"CTS"}),(0,r.jsx)(e.td,{children:"\u6e05\u9664\u53d1\u9001"}),(0,r.jsx)(e.td,{children:"CTS"}),(0,r.jsx)(e.td,{children:"\u6e05\u9664\u53d1\u9001"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"9"}),(0,r.jsx)(e.td,{children:"RI"}),(0,r.jsx)(e.td,{children:"\u54cd\u94c3\u6307\u793a"}),(0,r.jsx)(e.td,{children:"TXD-"}),(0,r.jsx)(e.td,{children:"\u53d1\u9001"}),(0,r.jsx)(e.td,{children:"A-"}),(0,r.jsx)(e.td,{children:"\u7ec42"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"17-\u6d41\u63a7",children:"1.7. \u6d41\u63a7"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u91cc\u8bb2\u5230\u7684 \u201c\u6d41\u201d\uff0c\u6307\u7684\u662f\u6570\u636e\u6d41\uff1b\u5728\u6570\u636e\u901a\u4fe1\u4e2d\uff0c\u6d41\u63a7\u5236\u662f\u7ba1\u7406\u4e24\u4e2a\u8282\u70b9\u4e4b\u95f4\u6570\u636e\u4f20\u8f93\u901f\u7387\u7684\u8fc7\u7a0b\uff0c\u4ee5\u9632\u6b62\u51fa\u73b0\u63a5\u6536\u7aef\u7684\u6570\u636e\u7f13\u51b2\u533a\u5df2\u6ee1\uff0c\u800c\u53d1\u9001\u7aef\u4f9d\u7136\u7ee7\u7eed\u53d1\u9001\u6570\u636e\uff0c\u6240\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u5f53\u63a5\u6536\u7aef\u7684\u6570\u636e\u7f13\u51b2\u533a\u5df2\u6ee1\uff0c\u65e0\u6cd5\u5904\u7406\u6570\u636e\u6765\u65f6\uff0c\u5c31\u53d1\u51fa \u201c\u4e0d\u518d\u63a5\u6536\u201d \u7684\u4fe1\u53f7\uff0c\u53d1\u9001\u7aef\u5219\u505c\u6b62\u53d1\u9001\uff0c\u76f4\u5230\u53d1\u9001\u7aef\u6536\u5230 \u201c\u53ef\u4ee5\u7ee7\u7eed\u53d1\u9001\u201d \u7684\u4fe1\u53f7\u518d\u53d1\u9001\u6570\u636e\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u8ba1\u7b97\u673a\u4e2d\u5e38\u7528\u7684\u4e24\u79cd\u6d41\u63a7\u5236\u5206\u522b\u662f\u786c\u4ef6\u6d41\u63a7\u5236\uff08RTS /CTS\u3001DTR /DSR\u7b49\uff09\u548c\u8f6f\u4ef6\u6d41\u63a7\u5236\uff08XON /XOFF\uff09\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"171-\u786c\u4ef6\u6d41\u63a7",children:"1.7.1. \u786c\u4ef6\u6d41\u63a7"}),"\n",(0,r.jsx)(e.p,{children:"RTS/CTS \u5c5e\u4e8e\u786c\u4ef6\u63e1\u624b\u7684\u4e00\u79cd\uff0c\u6700\u521d\u662f\u8bbe\u8ba1\u4e3a\u7535\u4f20\u6253\u5b57\u673a\u548c\u8c03\u5236\u89e3\u8c03\u5668\u534a\u53cc\u5de5\u534f\u4f5c\u901a\u4fe1\u7684\uff0c\u6bcf\u6b21\u5b83\u53ea\u80fd\u4e00\u65b9\u8c03\u5236\u89e3\u8c03\u5668\u53d1\u9001\u6570\u636e\u3002\u7ec8\u7aef\u5fc5\u987b\u53d1\u9001\u8bf7\u6c42\u53d1\u9001\u4fe1\u53f7\u7136\u540e\u7b49\u5230\u8c03\u5236\u89e3\u8c03\u5668\u56de\u5e94\u6e05\u9664\u53d1\u9001\u4fe1\u53f7\u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://photos.100ask.net/artinchip-docs/d213-devkit/flowctrol1-17067627451835.jpg",alt:"../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/flowctrol1.jpg"})}),"\n",(0,r.jsx)(e.p,{children:"A \u7aef\u7684 DTR\uff08\u6570\u636e\u8bbe\u5907\u5c31\u7eea\uff09\u53d1\u51fa\u4fe1\u53f7\uff0c \u5f53 B \u7aef\u51c6\u5907\u597d\u540e\uff0cB \u7aef\u7684 DTR\uff08\u6570\u636e\u8bbe\u5907\u5c31\u7eea\uff09\u5411 A\u7aef\u7684 DSR\uff08\u901a\u8baf\u8bbe\u5907\u5c31\u7eea\uff09\u53d1\u51fa\u4fe1\u53f7\u3002 \u63a5\u4e0b\u6765\u5c31\u53ef\u4ee5\u901a\u8fc7 RTS\uff08\u8bf7\u6c42\u53d1\u9001\uff09\u548c DTR\uff08\u5141\u8bb8\u53d1\u9001\uff09\u6765\u63a7\u5236\u901a\u4fe1\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"172-\u8f6f\u4ef6\u6d41\u63a7",children:"1.7.2. \u8f6f\u4ef6\u6d41\u63a7"}),"\n",(0,r.jsx)(e.p,{children:"\u8f6f\u4ef6\u6d41\u63a7\u5236\uff08Software flow control\uff09\u662f\u5728\u8ba1\u7b97\u673a\u6570\u636e\u94fe\u8def\u4e2d\u7684\u4e00\u79cd\u6d41\u63a7\u5236\u65b9\u6cd5\uff0c\u7279\u522b\u9002\u7528\u4e8e RS232 \u4e32\u53e3\u901a\u4fe1\uff1b\u5b83\u662f\u91c7\u7528\u7279\u6b8a\u5b57\u7b26\u6765\u4f20\u8f93\u5e26\u5185\u4fe1\u4ee4\uff0c\u7279\u6b8a\u7f16\u7801\u5b57\u7b26\u79f0\u4f5c XOFF \u4e0e XON\uff08\u5206\u522b\u8868\u793a \u201ctransmit off\u201d \u4e0e \u201ctransmit on\u201d\uff09\u3002\u56e0\u6b64\uff0c\u4e5f\u88ab\u79f0\u4f5c \u201cXON /XOFF\u6d41\u63a7\u5236\u201d\u3002"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u7801\u7684\u540d\u5b57"}),(0,r.jsx)(e.th,{children:"\u542b\u4e49"}),(0,r.jsx)(e.th,{children:"ASCII"}),(0,r.jsx)(e.th,{children:"\u5341\u8fdb\u5236"}),(0,r.jsx)(e.th,{children:"\u5341\u516d\u8fdb\u5236"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"XOFF"}),(0,r.jsx)(e.td,{children:"\u6682\u505c\u4f20\u8f93"}),(0,r.jsx)(e.td,{children:"DC3"}),(0,r.jsx)(e.td,{children:"19"}),(0,r.jsx)(e.td,{children:"13"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"XON"}),(0,r.jsx)(e.td,{children:"\u6062\u590d\u4f20\u8f93"}),(0,r.jsx)(e.td,{children:"DC1"}),(0,r.jsx)(e.td,{children:"17"}),(0,r.jsx)(e.td,{children:"11"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"18-raw\u6a21\u5f0f",children:"1.8. RAW\u6a21\u5f0f"}),"\n",(0,r.jsx)(e.p,{children:"UART \u4f5c\u4e3atty\u8bbe\u5907\u5de5\u4f5c\u7684\u65f6\u5019\uff0c\u6709\u4e24\u79cd\u5de5\u4f5c\u65b9\u5f0f\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Canonical Input"}),"\n",(0,r.jsx)(e.p,{children:"RX\u7aef\u63a5\u6536\u5230\u6570\u636e\u4e4b\u540e\u4e0d\u4f1a\u76f4\u63a5\u53cd\u9988\u7ed9\u7528\u6237\u6001\u7684read\u51fd\u6570\uff0c\u800c\u662f\u8981\u4e00\u76f4\u7b49\u5230\u4e00\u4e2a\u56de\u8f66\uff0c\u610f\u5373\u5bf9\u4e00\u4e9b\u7279\u6b8a\u5b57\u7b26\u8fdb\u884c\u8bed\u610f\u89e3\u6790"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Raw Input"}),"\n",(0,r.jsx)(e.p,{children:"RX\u7aef\u63a5\u6536\u5230\u4ec0\u4e48\u76f4\u63a5\u8fd4\u56de\u5230\u7528\u6237\u7a7a\u95f4\u7684read\u51fd\u6570\u91cc\u9762"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u4e24\u79cd\u5de5\u4f5c\u6a21\u5f0f\u5747\u4e3akernel\u5c42\u903b\u8f91\uff0c\u548c\u9a71\u52a8/\u786c\u4ef6\u65e0\u5173\uff0c\u5bf9\u4e8e\u666e\u901a\u7684uart\u5e94\u7528\uff0c\u5efa\u8baeCanonical\u65b9\u5f0f\uff0c\u5bf9\u4e8eRS485\u5e94\u7528\uff0c\u5efa\u8bae\u4f7f\u7528Raw\u65b9\u5f0f\uff0c\u4e8c\u8005\u901a\u8fc7termios\u7684lflag\u53c2\u6570\u7684ICANON \u4f4d\u8fdb\u884c\u533a\u5206\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"19-\u6a21\u5757\u7279\u6027",children:"1.9. \u6a21\u5757\u7279\u6027"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u517c\u5bb9\u5de5\u4e1a\u6807\u51c616550 UART"}),"\n",(0,r.jsx)(e.li,{children:"256x8bit\u53d1\u9001\u4e0e\u63a5\u6536FIFO"}),"\n",(0,r.jsx)(e.li,{children:"\u4f20\u8f93\u901f\u5ea6\u53ef\u8fbe3Mbps"}),"\n",(0,r.jsx)(e.li,{children:"\u652f\u63015-8\u6570\u636e\u4f4d\u4ee5\u53ca1/1 \xbd/2\u505c\u6b62\u4f4d"}),"\n",(0,r.jsx)(e.li,{children:"\u652f\u6301\u5947\u6821\u9a8c\uff0c\u5076\u6821\u9a8c\u6216\u8005\u65e0\u5947\u5076\u6821\u9a8c"}),"\n",(0,r.jsx)(e.li,{children:"\u652f\u6301DMA\u63a7\u5236\u5668\u63a5\u53e3"}),"\n",(0,r.jsx)(e.li,{children:"\u652f\u6301\u8f6f\u4ef6/\u786c\u4ef6\u6d41\u63a7"}),"\n",(0,r.jsx)(e.li,{children:"\u652f\u6301IrDA 1.0 SIR"}),"\n",(0,r.jsx)(e.li,{children:"\u652f\u6301RS-485/9bit \u6a21\u5f0f"}),"\n",(0,r.jsx)(e.li,{children:"RS-485\u652f\u6301\u786c\u4ef6\u4f7f\u80fd"}),"\n",(0,r.jsx)(e.li,{children:"Compact-IO \u7cbe\u7b802\u7ebf\u6a21\u5f0f"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"2-\u4f7f\u7528\u6307\u5357",children:"2. \u4f7f\u7528\u6307\u5357"}),"\n",(0,r.jsx)(e.h3,{id:"21-\u5185\u6838\u914d\u7f6e",children:"2.1. \u5185\u6838\u914d\u7f6e"}),"\n",(0,r.jsx)(e.p,{children:"\u5185\u6838\u914d\u7f6e\u4e3b\u8981\u662f\u901a\u8fc7 make km (make kernel_menuconfig) \u547d\u4ee4\u8fdb\u884c kernel \u7684\u529f\u80fd\u9009\u62e9\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Device Drivers\n    Character devices\n        Serial driver\n            <*> 8250/16550 and compatible serial support\n            <*>   8250/16550 support for ArtInChip serial ports\n            [*]   Support 8250_core.* kernel options (DEPRECATED)\n            [*]   Support for variants of the 16550A serial port\n            [ ]   Support for Fintek F81216A LPC to 4 UART RS485 API\n            [*]   Console on 8250/16550 and compatible serial port\n            (8)   Maximum number of 8250/16550 serial ports\n            (8)   Number of 8250/16550 serial ports to register at runtime\n            [ ]   Extended 8250/16550 serial driver options\n"})}),"\n",(0,r.jsx)(e.h3,{id:"22-\u7cfb\u7edf\u53c2\u6570\u914d\u7f6e",children:"2.2. \u7cfb\u7edf\u53c2\u6570\u914d\u7f6e"}),"\n",(0,r.jsx)(e.p,{children:"D211 \u63d0\u4f9b\u6700\u591a8\u4e2a UART \u7aef\u53e3"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u4e9b\u53c2\u6570\u4e3b\u8981\u5728\u6587\u4ef6 target/d211/common/d211.dtsi \u4e2d\uff0c\u6a21\u5757\u7cfb\u7edf\u53c2\u6570\u968f SoC \u7684\u8bbe\u5b9a\u800c\u5b9a\uff0c\u4e00\u822c\u4e0d\u80fd\u8fdb\u884c\u66f4\u6539\uff0c\u9664\u975e\u66f4\u6362\u4e86\u65b0\u7684 SoC\uff0c\u5219\u9700\u8981\u5728\u4e13\u4e1a\u4eba\u58eb\u7684\u6307\u5bfc\u4e0b\u8fdb\u884c\u66f4\u6539\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'uart1: serial@18711000 {\n     compatible = "artinchip,aic-uart-v1.0";\n     reg = <0x0 0x18711000 0x0 0x400>;\n     interrupts-extended = <&plic0 77 IRQ_TYPE_LEVEL_HIGH>;\n     reg-shift = <2>;\n     reg-io-width = <4>;\n     clocks = <&cmu CLK_UART1>;\n     clock-frequency = <48000000>;\n     resets = <&rst RESET_UART1>;\n     dmas = <&dma DMA_UART1>, <&dma DMA_UART1>;\n     dma-names = "rx", "tx";\n };\n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"reg-shift"}),"\n",(0,r.jsx)(e.p,{children:"UART\u63a7\u5236\u5668\u517c\u5bb98250\u6807\u51c6, \u5bc4\u5b58\u5668\u5bfb\u5740\u4f7f\u7528\u7d22\u5f15\u800c\u4e0d\u662f\u504f\u79fb\u63cf\u8ff0\uff0creg-shift \u7528\u6765\u8fdb\u884c\u7d22\u5f15\u548c\u5730\u5740\u7684\u8f6c\u6362\u8ba1\u7b97\uff0c\u8be5\u503c\u4e0d\u80fd\u4fee\u6539"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"reg-io-width"}),"\n",(0,r.jsxs)(e.p,{children:["\u4e3a\u5bc4\u5b58\u5668\u7684\u4f4d\u5bbd\uff0c",(0,r.jsx)(e.code,{children:"4"})," \u8868\u793a\u91c7\u752832\u4f4d\u6807\u51c6\u4f4d\u5bbd\uff0c\u8be5\u503c\u4e0d\u80fd\u4fee\u6539"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"clock-frequency"}),"\n",(0,r.jsxs)(e.p,{children:["D211 UART \u6a21\u5757\u7684\u7236\u65f6\u949f\u4e3a 48M\uff0c UART \u6a21\u5757\u65f6\u949f\u7684\u9891\u7387\u901a\u8fc7\u5bf9\u5176\u7236\u65f6\u949f\u7684\u8fdb\u884c\u9664\u9891\u6765\u8bbe\u7f6e\uff0cclock-frequency \u5373\u7528\u4e8e\u8bbe\u7f6e UART \u7684\u6a21\u5757\u65f6\u949f\uff0c \u4e0d\u540c\u7684\u6a21\u5757\u65f6\u949f\u65f6\u6ce2\u7279\u7387\u7684\u8bef\u5dee\u53ef\u80fd\u4e0d\u540c\uff0c\u56e0\u6b64\u53ef\u4ee5\u6839\u636e\u76ee\u6807\u6ce2\u7279\u7387\u8fdb\u884c\u6a21\u5757\u65f6\u949f\u7684\u8bbe\u7f6e\uff0c\u8be6\u60c5\u53c2\u770b ",(0,r.jsx)(e.a,{href:"../../../ic/clocks_power/cmu/function.html#ref-baudrate-errorrate-table",children:"UART \u6ce2\u7279\u7387\u4e0e\u8bef\u5dee\u7387"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"23-\u529f\u80fd\u53c2\u6570\u914d\u7f6e",children:"2.3. \u529f\u80fd\u53c2\u6570\u914d\u7f6e"}),"\n",(0,r.jsx)(e.p,{children:"\u529f\u80fd\u53c2\u6570\u4e3b\u8981\u9488\u5bf9\u67d0\u4e00\u4e2a\u4f7f\u7528\u65b9\u6848\u800c\u5b9a\uff0c\u56e0\u6b64\u968f\u7740\u65b9\u6848\u7684\u4e0d\u540c\uff0c\u53c2\u6570\u5f88\u53ef\u80fd\u4e0d\u540c\uff0c"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u4e9b\u53c2\u6570\u4e3b\u8981\u5728\u6587\u4ef6 target/d211/xxx/board.dts \u4e2d\uff0c\u529f\u80fd\u53c2\u6570\u7684\u8bbe\u7f6e\u5fc5\u987b\u548c\u786c\u4ef6\u539f\u7406\u56fe\u76f8\u5339\u914d"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'&uart1 {\n    pinctrl-names = "default";\n    pinctrl-0 = <&uart1_pins_a>;\n    linux,rs485-enabled-at-boot-time;\n    aic,rs485-compact-io-mode;\n    status = "okay";\n};\n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"pinctrl-names"}),"\n",(0,r.jsx)(e.p,{children:"SDK \u4e00\u822c\u4f1a\u628a\u8981\u4f7f\u7528\u7684\u67d0\u4e00\u529f\u80fd\u7684\u7aef\u53e3\u7ec4\u9884\u5148\u5b9a\u4e49\uff0c\u540e\u671f\u76f4\u63a5\u4f7f\u7528\u5373\u53ef\uff0c\u5b9a\u4e49\u4e00\u822c\u653e\u5728 target/d211/common/aicxxx-pinctrl.dtsi \u6587\u4ef6\u4e2d\uff0c\u76ee\u524d \u201cpinctrl-names\u201d \u5747\u8bbe\u7f6e\u4e3a \u201cdefault\u201d \u5373\u53ef"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"pinctrl-0"}),"\n",(0,r.jsx)(e.p,{children:"\u5373\u6307\u793a UART \u9884\u5148\u5b9a\u4e49\u7684\u7aef\u53e3\u7ec4\uff0c\u5176\u4e2d\u5305\u62ec\u7528\u4e8e\u8fdb\u884c\u53d1\u9001/\u63a5\u6536\u9009\u62e9\u7684 GPIO \u7aef\u53e3"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"linux,rs485-enabled-at-boot-time"}),"\n",(0,r.jsx)(e.p,{children:"\u8be5\u7aef\u53e3\u914d\u7f6e\u4e3a RS485"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"aic,rs485-compact-io-mode"}),"\n",(0,r.jsx)(e.p,{children:"\u4f7f\u7528 AIC \u72ec\u6709\u7684\u7cbe\u7b80 IO \u6a21\u5f0f\uff0c \u53ea\u4f7f\u75282\u4e2a\u7aef\u53e3\uff0c\u4e00\u4e2a\u7528\u4f5c\u53d1\u9001\u63a5\u6536\uff0c\u4e00\u4e2a\u7528\u4f5c\u53d1\u9001\u548c\u63a5\u6536\u63a7\u5236"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u5176\u4e2d rs485 \u529f\u80fd\u8fd8\u6709\u5176\u4ed6\u4e00\u4e9b\u53ef\u9009\u914d\u7f6e\u9879\uff0c\u5982 time delay \u7b49\uff0c\u76ee\u524d SoC \u5185\u90e8\u5bf9\u6b64\u7c7b\u53c2\u6570\u505a\u4e86\u5f88\u597d\u7684\u517c\u5bb9\uff0c\u9664\u975e\u7279\u6b8a\u7684 rs485 \u6a21\u7ec4\uff0c\u5426\u5219\u5747\u4e0d\u9700\u8981\u989d\u5916\u914d\u7f6e\u53c2\u6570"}),"\n",(0,r.jsx)(e.h3,{id:"24-\u8c03\u8bd5\u7aef\u53e3",children:"2.4. \u8c03\u8bd5\u7aef\u53e3"}),"\n",(0,r.jsx)(e.p,{children:"\u8c03\u8bd5\u7aef\u53e3\u7684\u914d\u7f6e\u9664\u4e86\u8981\u4f7f\u80fd\u76f8\u5e94\u7684 UART \u7aef\u53e3\uff0c\u8fd8\u8981\u5728 target/aicxxx/common/env.txt \u6587\u4ef6\u4e2d\u914d\u7f6e\u6ce2\u7279\u7387\u7b49\u76f8\u5173\u53c2\u6570"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"earlycon=smh\nconsole=ttyS0,115200n8\n"})}),"\n",(0,r.jsx)(e.h2,{id:"3-\u8c03\u8bd5\u6307\u5357",children:"3. \u8c03\u8bd5\u6307\u5357"}),"\n",(0,r.jsx)(e.h3,{id:"31-\u8c03\u8bd5\u5f00\u5173",children:"3.1. \u8c03\u8bd5\u5f00\u5173"}),"\n",(0,r.jsx)(e.h4,{id:"311-log\u7b49\u7ea7",children:"3.1.1. Log\u7b49\u7ea7"}),"\n",(0,r.jsx)(e.p,{children:"\u8c03\u8bd5\u7684\u65f6\u5019\u9700\u8981\u8bbe\u7f6e log \u7b49\u7ea7\u4e3a\u6700\u9ad88\uff0c\u6709\u4e24\u79cd\u8bbe\u7f6e\u65b9\u6cd5\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"bootarg"}),"\n",(0,r.jsx)(e.p,{children:"target/aicxxx/common/env.txt \u4e2d\u8bbe\u7f6e loglevel=8"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"kernel menuconfig"}),"\n",(0,r.jsx)(e.p,{children:"make kernel_menuconfig \u6216\u8005 make km \u547d\u4ee4\u6253\u5f00 kernel \u7684 menuconfig"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Kernel hacking\n    printk and dmesg options\n        (8) Default console loglevel (1-15)\n        (7) Default message log level (1-7)\n"})}),"\n",(0,r.jsx)(e.h4,{id:"312-\u8c03\u8bd5\u5f00\u5173",children:"3.1.2. \u8c03\u8bd5\u5f00\u5173"}),"\n",(0,r.jsx)(e.p,{children:"\u901a\u8fc7 make kernel_menuconfig \u6216\u8005 make km \u547d\u4ee4\u6253\u5f00 kernel \u7684 menuconfig\uff0c \u5982\u4e0b\u8def\u5f84\u9009\u4e2d UART \u7684\u8c03\u8bd5\u5f00\u5173"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Kernel hacking\n    [*] Kernel debuging\n        ArtInChip Debug\n        [*] UART Driver Debug\n"})}),"\n",(0,r.jsx)(e.h3,{id:"32-\u8c03\u8bd5\u7aef\u53e3",children:"3.2. \u8c03\u8bd5\u7aef\u53e3"}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u679c UART \u4f5c\u4e3a\u8c03\u8bd5\u7aef\u53e3\uff0c\u5176\u4e3b\u8981\u5de5\u4f5c\u5373\u4e3a\u8fdb\u884c\u8c03\u8bd5\u65e5\u5fd7\u7684\u8f93\u5165\u8f93\u51fa\uff0c\u6a21\u5757\u5de5\u4f5c\u6b63\u5e38\u5219\u53ef\u4ee5\u6b63\u5e38\u8fdb\u884c\u65e5\u5fd7\u7684\u8f93\u5165\u8f93\u51fa\uff0c\u8c03\u8bd5\u7aef\u53e3\u662f\u6240\u6709\u5176\u4ed6\u6a21\u5757\u7684\u8c03\u8bd5\u7684\u57fa\u7840\uff0c\u4ee5 uart0 \u4f5c\u4e3a\u8c03\u8bd5\u7aef\u53e3\u4e3a\u4f8b"}),"\n",(0,r.jsx)(e.p,{children:"\u8c03\u8bd5\u7aef\u53e3\u5728\u9a71\u52a8\u4e2d\u5f3a\u5236\u4e0d\u4f7f\u7528 DMA"}),"\n",(0,r.jsx)(e.h4,{id:"321-\u7aef\u53e3\u914d\u7f6e",children:"3.2.1. \u7aef\u53e3\u914d\u7f6e"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'target/d211/\u65b9\u6848x/board.dts\n&uart0 {\n    pinctrl-names = "default";\n    pinctrl-0 = <&uart0_pins_a>;\n    status = "okay";\n};\n'})}),"\n",(0,r.jsx)(e.h4,{id:"322-\u8c03\u8bd5\u7aef\u53e3\u6307\u5b9a",children:"3.2.2. \u8c03\u8bd5\u7aef\u53e3\u6307\u5b9a"}),"\n",(0,r.jsx)(e.p,{children:"\u8c03\u8bd5\u7aef\u53e3\u7684\u914d\u7f6e\u53ea\u5728 env.txt \u4e2d\u6307\u5b9a\u5373\u53ef\uff0cboard.dts \u4e2d bootargs \u4e2d\u7684 console \u53ea\u662f\u5728 JTAG \u8c03\u8bd5\u65f6\u4f7f\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"target/d211/common/env.txt\nearlycon=smh\nconsole=ttyS0,115200n8\nloglevel=8\n"})}),"\n",(0,r.jsx)(e.h3,{id:"33-\u529f\u80fd\u9a8c\u8bc1",children:"3.3. \u529f\u80fd\u9a8c\u8bc1"}),"\n",(0,r.jsx)(e.h4,{id:"331-\u9a71\u52a8\u52a0\u8f7d",children:"3.3.1. \u9a71\u52a8\u52a0\u8f7d"}),"\n",(0,r.jsx)(e.p,{children:"uboot \u548c kernel \u4e0d\u5171\u4eab\u9a71\u52a8\uff0c\u56e0\u6b64\u9a71\u52a8\u52a0\u8f7d\u662f\u5426\u6210\u529f\u4e5f\u8981\u5206\u4e24\u4e2a\u9636\u6bb5\u9a8c\u8bc1\u3002"}),"\n",(0,r.jsx)(e.p,{children:"UART \u4f5c\u4e3a\u8c03\u8bd5\u4e32\u53e3\u548c\u975e\u8c03\u8bd5\u4e32\u53e3\u4f7f\u7528\u7684\u9a71\u52a8\u4e00\u81f4\uff0c\u56e0\u6b64\u7cfb\u7edf\u6709\u4efb\u4f55\u65e5\u5fd7\u8f93\u51fa\u5219\u8bf4\u660e\u9a71\u52a8\u52a0\u8f7d\u6b63\u5e38\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Serial: 8250/16550 driver, 8 ports, IRQ sharing disabled\n18713000.serial: ttyS3 at MMIO 0x18713000 (irq = 22, base_baud = 75000000) is a 16550A\naic8250_apply_quirks port:0 rs485:0\naic8250_probe port:0 clk:48000000 regshift:2\naic8250_probe success.\n"})}),"\n",(0,r.jsx)(e.h4,{id:"332-\u8bbe\u5907\u4fe1\u606f",children:"3.3.2. \u8bbe\u5907\u4fe1\u606f"}),"\n",(0,r.jsx)(e.p,{children:"\u7cfb\u7edf\u9ed8\u8ba4\u4f1a\u7ed9\u6bcf\u4e00\u4e2a UART \u7aef\u53e3\u521b\u5efa\u4e00\u4e2a\u8bbe\u5907\u8282\u70b9\uff0c\u5373 ttyS#\uff0c\u800c\u4e0d\u7ba1\u8bbe\u5907\u662f\u5426\u88ab\u6253\u5f00\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u4ece /sys/class/tty/ttyS# \u4e2d\u67e5\u770b\u8be5\u8bbe\u5907\u4fe1\u606f\u53ef\u4ee5\u786e\u8ba4\u5176\u662f\u5426\u88ab\u6b63\u5e38\u521d\u59cb\u5316"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"[aic@ttyS1] cd /sys/class/tty/ttyS1\n[aic@ttyS1] # cat type\n0\uff1a \u6ca1\u6709\u521d\u59cb\uff1b4\uff1a \u521d\u59cb\u5316\u4e3a16550A\u8bbe\u5907\n[aic@ttyS2] # cat console\nN\uff1a\u975e\u8c03\u8bd5\u4e32\u53e3\uff1bY\uff1a\u8c03\u8bd5\u4e32\u53e3\n"})}),"\n",(0,r.jsx)(e.h4,{id:"333-\u8bbe\u5907\u901a\u4fe1",children:"3.3.3. \u8bbe\u5907\u901a\u4fe1"}),"\n",(0,r.jsx)(e.p,{children:"\u9a8c\u8bc1\u6a21\u5757\u662f\u5426\u53ef\u4ee5\u6b63\u5e38\u901a\u4fe1\uff0c\u6700\u7b80\u5355\u7684\u529e\u6cd5\u662f\u73af\u8def\u7aef\u53e3\u7684 RX/TX\uff0c\u4f7f\u7528 AIC \u63d0\u4f9b\u7684 UART \u6d4b\u8bd5\u5de5\u5177\u8fdb\u884c\u6d4b\u8bd5"}),"\n",(0,r.jsx)(e.h5,{id:"3331-\u7f16\u8bd1\u6d4b\u8bd5\u5de5\u5177",children:"3.3.3.1. \u7f16\u8bd1\u6d4b\u8bd5\u5de5\u5177"}),"\n",(0,r.jsx)(e.p,{children:"\u5728\u6839\u76ee\u5f55\u4e0b\u901a\u8fc7 make menuconfig \u53ef\u4ee5\u9009\u62e9\u7f16\u8bd1 AIC \u63d0\u4f9b\u7684UART\u6d4b\u8bd5\u5de5\u5177\u5230\u7cfb\u7edf"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Artinchip packages\n    Sample code\n        [*] test-uart\n"})}),"\n",(0,r.jsx)(e.h5,{id:"3332-\u7aef\u53e3\u73af\u8def\u6d4b\u8bd5",children:"3.3.3.2. \u7aef\u53e3\u73af\u8def\u6d4b\u8bd5"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd0\u884c\u547d\u4ee4\uff1atest_uart -C /dev/ttyS1 9600 \u8fdb\u884c\u73af\u8def\u6d4b\u8bd5\uff0c\u4f46\u4e0d\u8981\u4f7f\u7528\u5176\u6d4b\u8bd5\u8c03\u8bd5\u7aef\u53e3"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"test_uart -C /dev/ttyS1  9600\nTest Mode: 3:Circle\nSend Device     : /dev/ttyS1\nReceive Device  : /dev/ttyS1\nm_Baudrate      : 9600\nsend data is:    1234567890artinchip0987654321\nreceive data is: 1234567890artinchip0987654321\n"})}),"\n",(0,r.jsx)(e.h3,{id:"34-\u95ee\u9898\u6392\u67e5\u6d41\u7a0b",children:"3.4. \u95ee\u9898\u6392\u67e5\u6d41\u7a0b"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u5728 board.dts \u4e2d\u786e\u8ba4\u4f7f\u7528\u7684 UART \u7aef\u53e3 status = \u201cokay\u201d"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u786e\u8ba4\u8be5 UART \u7aef\u53e3\u7684 GPIO \u7aef\u53e3\u914d\u7f6e\u6b63\u786e\uff0c \u5177\u4f53\u67e5\u770b\u76f8\u5173 GPIO \u7aef\u53e3\u7684\u5bc4\u5b58\u5668"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u786e\u8ba4\u8be5 UART \u7aef\u53e3\u7684 clk \u8bbe\u7f6e\u6b63\u786e"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u786e\u8ba4 /dev/ttyS#/uartclk \u503c: 48000000"}),"\n",(0,r.jsx)(e.li,{children:"\u5728 CMU \u7684\u5bc4\u5b58\u5668\u4e2d\u67e5\u770b\u76f8\u5173\u5bc4\u5b58\u5668\uff0c\u5982\uff1a0x0844 CLK_UART1"}),"\n",(0,r.jsx)(e.li,{children:"reg-dump -a 0x18020844\uff1a 0x18020844: 00003118"}),"\n",(0,r.jsx)(e.li,{children:"clk = 1200M / (0x18 + 1) = 48M"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"UART \u5bc4\u5b58\u5668\u662f\u65f6\u5206\u590d\u7528\u5bc4\u5b58\u5668\uff0c\u76f4\u63a5\u8bfb\u53d6\u7684\u503c\u65e0\u6cd5\u660e\u786e\u610f\u4e49\uff0c\u8981\u8ddf\u8e2a\u5bc4\u5b58\u5668\u8bbe\u7f6e\uff0c\u53ea\u80fd\u5728\u4ee3\u7801\u4e2d\u6253\u5370\u5bc4\u5b58\u5668\u503c"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"4-\u6d4b\u8bd5\u6307\u5357",children:"4. \u6d4b\u8bd5\u6307\u5357"}),"\n",(0,r.jsx)(e.h3,{id:"41-\u51c6\u5907\u5de5\u4f5c",children:"4.1. \u51c6\u5907\u5de5\u4f5c"}),"\n",(0,r.jsx)(e.h4,{id:"411-\u786c\u4ef6",children:"4.1.1. \u786c\u4ef6"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"PC"}),"\n",(0,r.jsx)(e.p,{children:"\u7528\u4e8e\u548c\u5f00\u53d1\u677f\u8fdb\u884c\u4ea4\u4e92"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u6d4b\u8bd5\u677f"}),"\n",(0,r.jsx)(e.p,{children:"3\u4e2a\u4ee5\u4e0a UART \u7aef\u53e3\u7684\u6d4b\u8bd5\u677f"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u8fde\u63a5\u7ebf"}),"\n",(0,r.jsx)(e.p,{children:"\u7528\u4e8e\u8fde\u63a5 UART \u7684 RX/TX \u7aef\u53e3"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"412-\u8f6f\u4ef6",children:"4.1.2. \u8f6f\u4ef6"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"PC\u4e32\u53e3\u8f6f\u4ef6\uff1a"}),"\n",(0,r.jsx)(e.p,{children:"\u7528\u4e8ePC\u548c\u5f00\u53d1\u677f\u8fdb\u884c\u4e32\u53e3\u901a\u4fe1"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"test_uart\uff1a"}),"\n",(0,r.jsx)(e.p,{children:"AIC \u7684 UART \u6d4b\u8bd5\u5de5\u5177\uff0c\u5185\u5d4c\u5728 SDK \u4e2d\uff0c\u5728\u6839\u76ee\u5f55\u4e0b\u901a\u8fc7 make menuconfig \u53ef\u4ee5\u9009\u62e9\u7f16\u8bd1\u5230\u7cfb\u7edf"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Artinchip packages\n  Sample code\n    [*] test-uart\n"})}),"\n",(0,r.jsx)(e.h3,{id:"42-\u6d4b\u8bd5\u7ec4\u7f51",children:"4.2. \u6d4b\u8bd5\u7ec4\u7f51"}),"\n",(0,r.jsx)(e.h4,{id:"421-\u5355\u7aef\u53e3\u7684\u73af\u8def\u6d4b\u8bd5",children:"4.2.1. \u5355\u7aef\u53e3\u7684\u73af\u8def\u6d4b\u8bd5"}),"\n",(0,r.jsx)(e.p,{children:"UARTn TX to UARTn RX"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://photos.100ask.net/artinchip-docs/d213-devkit/test-cycle1-17067629111947.jpg",alt:"../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/test-cycle1.jpg"})}),"\n",(0,r.jsx)(e.h4,{id:"422-\u53cc\u7aef\u53e3\u7684\u73af\u8def\u6d4b\u8bd5",children:"4.2.2. \u53cc\u7aef\u53e3\u7684\u73af\u8def\u6d4b\u8bd5"}),"\n",(0,r.jsx)(e.p,{children:"UARTn to UARTm"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://photos.100ask.net/artinchip-docs/d213-devkit/test-topo-17067629176269.jpg",alt:"../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/test-topo.jpg"})}),"\n",(0,r.jsx)(e.h3,{id:"43-rs232\u529f\u80fd\u6d4b\u8bd5",children:"4.3. RS232\u529f\u80fd\u6d4b\u8bd5"}),"\n",(0,r.jsx)(e.h4,{id:"431-\u5355\u7aef\u53e3\u6536\u53d1",children:"4.3.1. \u5355\u7aef\u53e3\u6536\u53d1"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6309\u5355\u7aef\u53e3\u7684\u73af\u8def\u6d4b\u8bd5\u7ec4\u7f51\uff0c\u73af\u8def UART4 \u7684 RX/TX"}),"\n",(0,r.jsx)(e.li,{children:"\u4f7f\u7528 test_uart \u5de5\u5177\u8fdb\u884c\u6d4b\u8bd5"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"test_uart -C /dev/ttyS1  9600\nTest Mode: 3:Circle\nSend Device     : /dev/ttyS1\nReceive Device  : /dev/ttyS1\nm_Baudrate      : 9600\nsend data is:    1234567890artinchip0987654321\nreceive data is: 1234567890artinchip0987654321\n"})}),"\n",(0,r.jsx)(e.h4,{id:"432-\u53cc\u7aef\u53e3\u6536\u53d1",children:"4.3.2. \u53cc\u7aef\u53e3\u6536\u53d1"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6309\u53cc\u7aef\u53e3\u7684\u73af\u8def\u6d4b\u8bd5\u7ec4\u7f51\uff0c\u73af\u8def UART4 \u548c UART5 \u7684 RX/TX"}),"\n",(0,r.jsx)(e.li,{children:"\u4f7f\u7528 test_uart \u5de5\u5177\u8fdb\u884c\u6d4b\u8bd5"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"test_uart -N /dev/ttyS4 /dev/ttyS5 115200\nTest Mode: 0:Normal Test\nDevice     : /dev/ttyS4\nReceive Device  : /dev/ttyS5\nm_Baudrate      : 115200\n1970-01-01 08:24:46   =============================================\n1970-01-01 08:24:46   Please input messages you want to send\nthisisatest\n1970-01-01 08:24:49   send data:thisisatest.\n1970-01-01 08:24:49   receive data: len = 11: thisisatest\n"})}),"\n",(0,r.jsx)(e.h3,{id:"44-rs485-\u529f\u80fd\u6d4b\u8bd5",children:"4.4. RS485 \u529f\u80fd\u6d4b\u8bd5"}),"\n",(0,r.jsx)(e.p,{children:"RS485 \u7684\u6d4b\u8bd5\u65b9\u5f0f\u548c RS232 \u7c7b\u4f3c\uff0c\u6709\u51e0\u70b9\u4e0d\u540c\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7aef\u53e3\u9700\u8981\u914d\u7f6e\u4e3a RS485"}),"\n",(0,r.jsx)(e.li,{children:"RS485 \u9700\u8981\u6709\u5916\u63a5\u9a71\u52a8\u82af\u7247"}),"\n",(0,r.jsx)(e.li,{children:"RS485 \u4e3a\u5dee\u5206\u4fe1\u53f7\uff0c\u56e0\u6b64\u9700\u8981 B+ \u5bf9 B+ \u73af\u8def\uff0cB- \u5bf9 B- \u73af\u8def"}),"\n",(0,r.jsx)(e.li,{children:"RS485 \u4e0d\u80fd B+ \u73af\u8def B-"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://photos.100ask.net/artinchip-docs/d213-devkit/test-rs4851-170676294039611.jpg",alt:"../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/test-rs4851.jpg"})}),"\n",(0,r.jsx)(e.h3,{id:"45-\u517c\u5bb9\u6027\u6d4b\u8bd5",children:"4.5. \u517c\u5bb9\u6027\u6d4b\u8bd5"}),"\n",(0,r.jsx)(e.h4,{id:"451-\u4e32\u53e3\u5de5\u5177\u517c\u5bb9\u6027\u6d4b\u8bd5",children:"4.5.1. \u4e32\u53e3\u5de5\u5177\u517c\u5bb9\u6027\u6d4b\u8bd5"}),"\n",(0,r.jsx)(e.p,{children:"\u5e94\u8be5\u6d4b\u8bd5\u5728 RS232 \u6a21\u5f0f\u4e0b\uff0c\u8c03\u8bd5\u53e3\u548c\u5982\u4e0b\u5de5\u5177\u7684\u517c\u5bb9\u6027"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"MobaXterm"}),"\n",(0,r.jsx)(e.li,{children:"SecureCRT"}),"\n",(0,r.jsx)(e.li,{children:"XShell"}),"\n",(0,r.jsx)(e.li,{children:"sscom"}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"452-rs485-\u517c\u5bb9\u6027\u6d4b\u8bd5",children:"4.5.2. RS485 \u517c\u5bb9\u6027\u6d4b\u8bd5"}),"\n",(0,r.jsx)(e.p,{children:"\u5e94\u6d4b\u8bd5\u5728 RS485 \u6a21\u5f0f\u4e0b\uff0cSoC \u548c\u901a\u7528 RS485 \u6a21\u7ec4\u7684\u517c\u5bb9\u6027"}),"\n",(0,r.jsx)(e.h3,{id:"46-\u538b\u529b\u6d4b\u8bd5",children:"4.6. \u538b\u529b\u6d4b\u8bd5"}),"\n",(0,r.jsx)(e.p,{children:"\u53ef\u501f\u52a9\u4e8e test_uart \u5de5\u5177\uff0c \u91c7\u7528\u73af\u8def UART4 \u548c UART5 \u7684\u7ec4\u7f51\uff0c\u8fdb\u884c\u538b\u529b\u6d4b\u8bd5\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u6d4b\u8bd5\u65b9\u6cd5\u662f\u77ed\u65f6\u95f4\u5185\u8fdb\u884c\u5927\u91cf\u6570\u636e\u7684\u6536\u53d1\uff0c\u56e0\u4e3a CPU \u7684\u8bfb\u5199\u901f\u5ea6\u8fdc\u8fdc\u9ad8\u4e8e UART \u7684\u6536\u53d1\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u6709\u4e22\u5305\uff0c\u4f46\u6a21\u5757\u4e0d\u5e94\u8be5\u51fa\u73b0\u5361\u6b7b\u73b0\u8c61\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"[aic@] # test_uart -P  /dev/ttyS4 /dev/ttyS5 115200\nTest Mode: 1:Pressure Test\nSend Device     : /dev/ttyS4\nReceive Device  : /dev/ttyS5\nm_Baudrate      : 115200\n1970-01-01 08:55:22   type any key to send 100kB\n"})}),"\n",(0,r.jsx)(e.h3,{id:"47-\u7a33\u5b9a\u6027\u6d4b\u8bd5",children:"4.7. \u7a33\u5b9a\u6027\u6d4b\u8bd5"}),"\n",(0,r.jsx)(e.p,{children:"\u53ef\u501f\u52a9\u4e8e test_uart \u5de5\u5177\uff0c\u91c7\u7528\u73af\u8def UART4 \u548c UART5 \u7684\u7ec4\u7f51\uff0c\u8fdb\u884c\u957f\u65f6\u95f4\u7684\u7a33\u5b9a\u6027\u9a8c\u8bc1\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u6d4b\u8bd5\u65b9\u6cd5\u662f\u5faa\u73af\u8fdb\u884c\u957f\u65f6\u95f4\u7684\u6570\u636e\u6536\u53d1\uff0c\u786e\u8ba4\u6a21\u5757\u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u548c\u662f\u5426\u6709\u4e22\u5305\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"[aic@] # test_uart -S  /dev/ttyS4 /dev/ttyS5  115200\nTest Mode: 2:Stability\nSend Device     : /dev/ttyS4\nReceive Device  : /dev/ttyS5\nm_Baudrate      : 115200\n1970-01-01 09:08:13   =============== sending =====================\n1970-01-01 09:08:13   =============== receiving =====================\n1970-01-01 09:08:21   send 64K\n1970-01-01 09:08:21   receive 64K\n1970-01-01 09:08:29   send 128K\n1970-01-01 09:08:29   receive 128K\n"})}),"\n",(0,r.jsx)(e.h2,{id:"5-\u6e90\u7801\u8bf4\u660e",children:"5. \u6e90\u7801\u8bf4\u660e"}),"\n",(0,r.jsx)(e.h3,{id:"51-\u4e32\u53e3\u82af\u7247",children:"5.1. \u4e32\u53e3\u82af\u7247"}),"\n",(0,r.jsx)(e.p,{children:"\u5728\u9a71\u52a8\u4ee3\u7801\u8bf4\u660e\u5f00\u59cb\u524d\u5148\u4ecb\u7ecd\u51e0\u79cd\u901a\u7528\u7684\u4e32\u53e3\u82af\u7247\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"511-8250",children:"5.1.1. 8250"}),"\n",(0,r.jsx)(e.p,{children:"8250\u662f IBM PC \u53ca\u517c\u5bb9\u673a\u4f7f\u7528\u7684\u7b2c\u4e00\u79cd\u4e32\u53e3\u82af\u7247\u3002\u8fd9\u662f\u4e00\u79cd\u76f8\u5bf9\u6765\u8bf4\u5f88\u6162\u7684\u82af\u7247\uff0c\u6709\u65f6\u5019\u88c5\u8f7d\u5230\u5b83\u7684\u5bc4\u5b58\u5668\u901f\u5ea6\u592a\u5feb\uff0c\u5b83\u6765\u4e0d\u53ca\u5904\u7406\uff0c\u5c31\u4f1a\u51fa\u73b0\u6570\u636e\u4e22\u5931\u73b0\u8c61\u30028250\u67097\u4e2a\u5bc4\u5b58\u5668\uff0c\u652f\u6301\u7684\u6700\u5927\u6ce2\u7279\u7387\u4e3a56kb\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"512-16450",children:"5.1.2. 16450"}),"\n",(0,r.jsx)(e.p,{children:"16450 \u662f 8250A \u7684\u5feb\u901f\u7248\u3002\u52a0\u5feb\u4e86\u5904\u7406\u5668\u5b58\u53d6\u5b83\u7684\u901f\u5ea6\uff0c\u4f46\u6700\u5927\u901f\u5ea6\u8fd8\u662f 56kb\u3002\u6709\u4e9b\u4eba\u5b9e\u9645\u7528\u5f97\u6bd4\u8fd9\u9ad8\u4e5f\u53ef\u4ee5\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"513-16550",children:"5.1.3. 16550"}),"\n",(0,r.jsx)(e.p,{children:"16550/16550A \u662f\u7b2c\u4e00\u79cd\u5e26\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u529f\u80fd\u76848250\u7cfb\u5217\u4e32\u53e3\u82af\u7247\u3002"}),"\n",(0,r.jsx)(e.p,{children:"AIC UART \u6a21\u5757\u662f\u4e00 16550A UART\uff0c\u5c5e\u4e8e\u6807\u51c6\u76848250\u7cfb\uff0c\u800c Linux \u5bf98250\u7cfb\u4e32\u53e3\u6709\u901a\u7528\u7684\u9a71\u52a8\uff0c\u6211\u4eec\u91c7\u53d6\u5728\u8be5\u9a71\u52a8\u4e0a\u6dfb\u52a0 AIC \u79c1\u6709\u7684\u4ee3\u7801\u7684\u65b9\u5f0f\u5b9e\u73b0\u6211\u4eec\u7684\u9a71\u52a8\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"52-\u9a71\u52a8\u914d\u7f6e\u5b8f",children:"5.2. \u9a71\u52a8\u914d\u7f6e\u5b8f"}),"\n",(0,r.jsx)(e.p,{children:"\u56e0\u4e3a8250\u9a71\u52a8\u517c\u5bb9\u5f88\u591a\u540e\u7eed\u5f00\u53d1\u7684\u4e32\u53e3\u82af\u7247\uff0c\u56e0\u6b64\u6709\u975e\u5e38\u591a\u7684\u7f16\u8bd1\u529f\u80fd\u914d\u7f6e\u9879\u3002"}),"\n",(0,r.jsx)(e.p,{children:"menuconfig \u4e2d\u4f4d\u7f6e\uff1adevice drivers/Character devices/8250 16550 and compatible serial support"}),"\n",(0,r.jsx)(e.p,{children:"\u5173\u952e\u914d\u7f6e\u9879\u8bf4\u660e\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_DEPRECATED_OPTIONS: Support 8250_core.* kernel options (DEPRECATED)"}),"\n",(0,r.jsx)(e.p,{children:"3.7 \u7248\u672c\u7684\u9519\u8bef\uff0c\u4e0d\u5e94\u8be5\u6253\u5f00"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_PNP: 8250/16550 PNP device support"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0d\u6253\u5f00"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_16550A_VARIANTS: 16550A serial port"}),"\n",(0,r.jsx)(e.p,{children:"\u6253\u5f00"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_FINTEK: Fintek F81216A LPC to 4 UART RS485 API"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0d\u6253\u5f00"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_CONSOLE: 8250/16550 and compatible serial port"}),"\n",(0,r.jsx)(e.p,{children:"\u6253\u5f00"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_DMA: DMA support for 16550 compatible UART controllers"}),"\n",(0,r.jsx)(e.p,{children:"\u6253\u5f00"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_NR_UARTS: Maximum number of 8250/16550 serial ports"}),"\n",(0,r.jsx)(e.p,{children:"\u8bbe\u7f6e\u4e3a8"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_RUNTIME_UARTS: Number of 8250/16550 serial ports to register at runtime"}),"\n",(0,r.jsx)(e.p,{children:"\u8bbe\u7f6e\u4e3a8"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_EXTENDED: Extended 8250/16550 serial driver options"}),"\n",(0,r.jsx)(e.p,{children:"\u6ca1\u6709\u4f7f\u7528\uff0c\u65e0\u5173\u7cfb"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_MANY_PORTS"}),"\n",(0,r.jsx)(e.p,{children:"\u6ca1\u6709\u4f7f\u7528\uff0c\u65e0\u5173\u7cfb"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_SHARE_IRQ: Support for sharing serial interrupts"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0d\u6253\u5f00"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_DETECT_IRQ: Autodetect IRQ on standard ports (unsafe)"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0d\u6253\u5f00"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_RSA: Support RSA serial ports"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0d\u6253\u5f00\uff0c\u6ca1\u6709\u4f7f\u7528"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_8250_DW: Support for Synopsys DesignWare 8250 quirks"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0d\u6253\u5f00\uff0c\u4e0d\u9700\u8981\u517c\u5bb9"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SERIAL_OF_PLATFORM: Device tree based probing for 8250 ports"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0d\u6253\u5f00\uff0c\u4f7f\u7528AIC\u5b9a\u4e49\u7684OF"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"53-\u5bc4\u5b58\u5668",children:"5.3. \u5bc4\u5b58\u5668"}),"\n",(0,r.jsx)(e.p,{children:"8250\u9a71\u52a8\u4f7f\u7528\u7d22\u5f15\u6765\u5b9a\u4e49\u5bc4\u5b58\u5668\uff0c\u5730\u5740\u7684\u8ba1\u7b97\u65b9\u5f0f\u4e3a\u7d22\u5f15 * \u4f4d\u5bbd\u3002 AIC UART \u7684\u5bc4\u5b58\u5668\u5927\u81f4\u53ef\u5206\u4e3a\u4e24\u79cd\uff1a"}),"\n",(0,r.jsx)(e.h4,{id:"531-\u6807\u51c6\u5bc4\u5b58\u5668",children:"5.3.1. \u6807\u51c6\u5bc4\u5b58\u5668"}),"\n",(0,r.jsx)(e.p,{children:"0x7C \u4e4b\u524d\uff0c\u4e3a8250\u6807\u51c6\u5bc4\u5b58\u5668\uff0c\u5728include/uapi/linux/serial_reg.h \u4e2d\u5b9a\u4e49\uff0cAIC \u5bf9\u5982\u4e0b3\u4e2a\u5bc4\u5b58\u5668\u503c\u6709\u4fee\u6539"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"#define UART_IER   1    /*Interrupt Enable: Shifter_Reg_Empty_EN*/\n#define UART_IIR   2    /*Interrupt Identity\uff1aShifter_Reg_Empty_INT*/\n#define UART_MCR   4    /*Modem Control\uff1aUART_FUNCTION*/\n"})}),"\n",(0,r.jsx)(e.h4,{id:"532-\u6269\u5c55\u5bc4\u5b58\u5668",children:"5.3.2. \u6269\u5c55\u5bc4\u5b58\u5668"}),"\n",(0,r.jsx)(e.p,{children:"0x7C \u4e4b\u540e\uff0c\u4e3a AIC \u65b0\u6269\u5c55\uff0c\u9700\u8981\u989d\u5916\u7684\u903b\u8f91\u4ee3\u7801\uff0c\u8b6c\u5982 RS485\uff0c\u5728 8250_artinchip.h \u4e2d\u5b9a\u4e49"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"#define AIC_REG_UART_USR   0x1f        /* UART Status Register */\n#define AIC_REG_UART_TFL   0x20        /* transmit FIFO level */\n#define AIC_REG_UART_RFL   0x21        /* Receive FIFO Level */\n#define AIC_REG_UART_HSK   0x22        /* DMA Handshake Configuration */\n#define AIC_REG_UART_HALT  0x29        /* Halt tx register */\n#define AIC_REG_UART_DLL   0x2C        /* DBG DLL */\n#define AIC_REG_UART_DLH   0x2D        /* DBG DLH */\n#define AIC_REG_UART_RS485 0x30        /* RS485 control status register */\n"})}),"\n",(0,r.jsx)(e.h3,{id:"54-\u7a0b\u5e8f\u5165\u53e3",children:"5.4. \u7a0b\u5e8f\u5165\u53e3"}),"\n",(0,r.jsx)(e.h4,{id:"541-8250_core",children:"5.4.1. 8250_core"}),"\n",(0,r.jsx)(e.p,{children:"8250\u6807\u51c6\u5bc4\u5b58\u5668/\u903b\u8f91\u7684\u521d\u59cb\u5316\u5165\u53e3\uff0c\u4e09\u65b9\u9a71\u52a8\u5927\u90fd\u501f\u52a9 8250_core \u5b8c\u6210\u5176\u5de5\u4f5c\uff0c\u6587\u4ef6\uff1a8250_core.c\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"module_init(serial8250_init);\nmodule_exit(serial8250_exit);\n"})}),"\n",(0,r.jsx)(e.h4,{id:"542-aic-uart",children:"5.4.2. aic-uart"}),"\n",(0,r.jsx)(e.p,{children:"aic8250 \u662f artinchip \u7684 uart \u9a71\u52a8\u7684\u5165\u53e3\uff0c\u58f0\u660e\u9a71\u52a8\u548c\u521d\u59cb\u5316\u79c1\u6709\u5bc4\u5b58\u5668/\u903b\u8f91\uff0c\u6587\u4ef6\uff1a8250_artinchip.c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'static const struct of_device_id aic8250_of_match[] = {\n   { .compatible = "artinchip,aic-uart-v1.0" },\n   { /* Sentinel */ }\n};\nMODULE_DEVICE_TABLE(of, aic8250_of_match);\n\nstatic struct platform_driver aic8250_platform_driver = {\n   .driver = {\n      .name          = AICUART_DRIVER_NAME,\n      .pm            = &aic8250_pm_ops,\n      .of_match_table        = aic8250_of_match,\n   },\n   .probe                    = aic8250_probe,\n   .remove           = aic8250_remove,\n};\nmodule_platform_driver(aic8250_platform_driver);\n'})}),"\n",(0,r.jsx)(e.h3,{id:"55-\u6570\u636e\u7ed3\u6784",children:"5.5. \u6570\u636e\u7ed3\u6784"}),"\n",(0,r.jsx)(e.h4,{id:"551-uart_8250_port",children:"5.5.1. uart_8250_port"}),"\n",(0,r.jsx)(e.p,{children:"\u58f0\u660e\u5728 include/linux/serial_8250.h \u4e2d\uff0c\u9a71\u52a8\u4e2d\u4ee5\u53d8\u91cf\u540d\uff1aup \u53d8\u91cf\u5b58\u5728\uff0cartinchip \u9a71\u52a8\u4e2d\u672a\u8fdb\u884c\u4efb\u4f55\u8bbe\u7f6e\uff0c\u53ea overlay \u4e86 AIC \u5e73\u53f0\u7684 rs485 \u8bbe\u7f6e\u51fd\u6570\uff0c \u5176\u4ed6\u5b8c\u5168\u4f7f\u7528 8250_core.c \u4e2d\u53c2\u6570\u3002uart_8250_port\u7684\u521d\u59cb\u5316\u5728 8250_core.c\uff1aserial8250_register_8250_port\u4e2d\u5b8c\u6210\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"struct uart_8250_port {\n   struct uart_port          port;\n   \u2026\n   struct uart_8250_dma      *dma;\n   const struct uart_8250_ops        *ops;\n   /* 8250 specific callbacks */\n   int                       (*dl_read)(struct uart_8250_port *);\n   void                      (*dl_write)(struct uart_8250_port *, int);\n   struct uart_8250_em485 *em485;\n   void                      (*rs485_start_tx)(struct uart_8250_port *);\n   void                      (*rs485_stop_tx)(struct uart_8250_port *);\n\n   .dl_read          = default_serial_dl_read\n   .dl_write         = default_serial_dl_write\n   .rs485_config = aic8250_rs485_config;\n   .rs485            = NULL;\n   .rs485_start_tx = NULL;\n   .rs485_stop_tx = NULL;\n"})}),"\n",(0,r.jsx)(e.h4,{id:"552-uart_port",children:"5.5.2. uart_port"}),"\n",(0,r.jsx)(e.p,{children:"uart_port \u662fUART\u9a71\u52a8\u7684\u5173\u952e\u6570\u636e\u7ed3\u6784\uff0c\u9a71\u52a8\u4e2d\u4ee5 \u53d8\u91cf\u540d\uff1ap\u5b58\u5728\uff0c\u58f0\u660einclude/linux/serial_core.h\uff0c\u5305\u542b\u53d8\u91cf\u548c\u5173\u952e\u64cd\u4f5c\u51fd\u6570\u7684overlay\u5165\u53e3\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"struct uart_port {\n   spinlock_t     lock;                      /* port lock */\n   unsigned long  iobase;            /* in/out */\n   unsigned char __iomem     *membase;               /* read/write */\n   unsigned int   (*serial_in)(struct uart_port *, int);\n   void           (*serial_out)(struct uart_port *, int, int);\n   ... ...\n"})}),"\n",(0,r.jsx)(e.h4,{id:"553-aic8250_data",children:"5.5.3. aic8250_data"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"struct aic8250_data {\n        struct aic8250_port_data     data;\n\n        int                  msr_mask_on;\n        int                  msr_mask_off;\n        struct clk           *clk;\n        struct reset_control *rst;\n\n        unsigned int         uart_16550_compatible:1;\n        unsigned int         tx_empty;\n        unsigned int         rs485simple;      //compact-io mode\n};\n"})}),"\n",(0,r.jsx)(e.h4,{id:"554-operations",children:"5.5.4. Operations"}),"\n",(0,r.jsx)(e.p,{children:"uart_port\u5404\u64cd\u4f5c\u63a5\u53e3\u8bbe\u7f6e\u548c\u64cd\u4f5c\u7684\u5bc4\u5b58\u5668\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u84dd\u8272\u63a5\u53e3\u4e3a\u53ef\u4ee5\u5728\u5ba2\u6237\u7684\u9a71\u52a8\u4e2d\u5b9a\u5236\uff0c\u5426\u5219\u4f7f\u7528uart8250_core\u4e2d\u6807\u51c6\u63a5\u53e3\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"handle_irq  = aic8250_handle_irq;\n.pm          = aic8250_do_pm;\n.serial_in   = aic8250_serial_in32;\n.serial_out  = aic8250_serial_out32;\n.set_ldisc   = aic8250_set_ldisc;\n.set_termios = aic8250_set_termios;\n.set_mctrl   = serial8250_set_mctrl, //set modem control, \u5305\u62ectermios \u548c modem\u7684\u8f6c\u6362\uff0cModem Control Reg\uff1a MCR\n.get_mctrl   = serial8250_get_mctrl, //get modem control\n.startup     = serial8250_startup,   //\u5bc4\u5b58\u5668\u521d\u59cb\u5316\n.shutdown    = serial8250_shutdown,  //\n.get_divisor   = serial8250_do_get_divisor\n.set_divisor    = serial8250_do_set_divisor\n.handle_break =\n.tx_empty       = serial8250_tx_empty    //Line Status: Transmitter Empty & TX Holding Register Empty\n.stop_tx     = serial8250_stop_tx,   //serial8250_clear_THRI\uff0cInterrupt Enable Reg\uff0cEnable Transmitter\uff1a10\uff0cEnable Receive\uff1a01\n.start_tx    = serial8250_start_tx,  //serial8250_set_THRI\uff0cInterrupt Enable Reg\uff0cEnable Transmitter\uff1a10\uff0cEnable Receive\uff1a01\n.throttle    = serial8250_throttle,  //synclink_gt.c\uff0c\n.unthrottle  = serial8250_unthrottle,\n.stop_rx     = serial8250_stop_rx,   //Interrupt Enable Reg\uff0cEnable Receive\uff1a01\uff0cEnable receiver line status interrupt\uff1a 04\n.enable_ms   = serial8250_enable_ms, //Interrupt Enable Reg\uff0cEnable Modem status interrupt\uff1a08\n.break_ctl   = serial8250_break_ctl, //Line Control Reg\uff0cBreak Control Bit\uff1a\n.type                = serial8250_type,              //8250 or 16550 or TI16750\n.release_port        = serial8250_release_port,      //release_mem_region\n.request_port= serial8250_request_port,//request_mem_region\n.config_port = serial8250_config_port,       //\n.verify_port = serial8250_verify_port,\n"})}),"\n",(0,r.jsx)(e.h3,{id:"56-\u5173\u952e\u6d41\u7a0b",children:"5.6. \u5173\u952e\u6d41\u7a0b"}),"\n",(0,r.jsx)(e.h4,{id:"561-serial8250_init",children:"5.6.1. serial8250_init"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"serial8250_init\n   |--\x3eserial8250_isa_init_ports\n     |--\x3eUART_NR                        //8\u4e2a\n     |--\x3eserial8250_init_port\n         |--\x3eport->ops = &serial8250_pops;    //\u6807\u51c6ops\n     |--\x3eserial8250_set_defaults     //io\uff0cdma\uff0cfifosize\uff0c\u6807\u51c6DMA\u63a5\u53e3\n     |--\x3eserial8250_isa_config\n   |--\x3euart_register_driver\n   |--\x3eserial8250_pnp_init\n   |--\x3eplatform_device_add\n   |--\x3eserial8250_register_ports\n   |--\x3eplatform_driver_register\n"})}),"\n",(0,r.jsx)(e.h4,{id:"562-aic8250_probe",children:"5.6.2. aic8250_probe"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"aic8250_probe\n   |--\x3eregs = platform_get_resource\n   |--\x3eplatform_get_irq\n   |--\x3ep->handle_irq = aic8250_handle_irq;\n   |--\x3ep->pm         = aic8250_do_pm;\n   |--\x3ep->type               = PORT_16550\n   |--\x3ep->serial_in  = aic8250_serial_in32;\n   |--\x3ep->serial_out         = aic8250_serial_out32;\n   |--\x3ep->set_ldisc            = aic8250_set_ldisc;\n   |--\x3ep->set_termios        = aic8250_set_termios;\n   |--\x3ep->regshift            = dts:reg-shift, reg 32bit\n   |--\x3ePrepare clk\n   |--\x3eprepare reset\n   |--\x3eaic8250_apply_quirks  : \u5904\u7406aic \u79c1\u6709\u903b\u8f91\uff0cdcd-override\uff0cdsr-override\uff0ccts-override\uff0cri-override\n      |--\x3eaic8250_init_special_reg\n   |--\x3edata->data.line = serial8250_register_8250_port\uff1a return port number\n   |--\x3eplatform_set_drvdata\n"})}),"\n",(0,r.jsx)(e.h4,{id:"563-serial8250_register_8250_port",children:"5.6.3. serial8250_register_8250_port"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"serial8250_register_8250_port\n   |--\x3ereturn port number\n   |--\x3eserial8250_find_match_or_unused\n   |--\x3ecopy aic uart_8250_port to local uart_8250_port\n   |--\x3euart_get_rs485_mode\uff1a\n     |--\x3ers485-rts-delay\uff0crs485-rx-during-tx\uff0clinux,rs485-enabled-at-boot-time\uff0crs485-rts-active-low\uff0crs485-term\n   |--\x3emctrl_gpio_init:    //null\n   |--\x3eserial8250_set_defaults //io,dma,fifosize setting\n   |--\x3eserial8250_apply_quirks\n     |--\x3euart_add_one_port\n"})}),"\n",(0,r.jsx)(e.h3,{id:"57-rs485",children:"5.7. RS485"}),"\n",(0,r.jsx)(e.p,{children:"ArtInChip \u7684 RS485 \u6709\u4e24\u79cd\u5de5\u4f5c\u6a21\u5f0f\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6807\u51c6\u6a21\u5f0f\uff1a\u6807\u51c6 RS485 \u63a5\u53e3\uff0c\u6709B+/B-\u4e24\u6839\u6570\u636e\u7ebf\u548c\u53d1\u9001\u4f7f\u80fd\uff0c\u5171\u4e09\u7ebf"}),"\n",(0,r.jsx)(e.li,{children:"\u7cbe\u7b80\u6a21\u5f0f\uff1a\u4e3a ArtInChip \u5b9a\u5236\u7248\uff0c\u4f7f\u7528\u5355\u6570\u636e\u7ebf\u8fdb\u884c\u6570\u636e\u4f20\u8f93\uff0c\u52a0\u53d1\u9001\u4f7f\u80fd\u5171\u4e8c\u7ebf"}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"571-\u6807\u51c6\u6a21\u5f0f",children:"5.7.1. \u6807\u51c6\u6a21\u5f0f"}),"\n",(0,r.jsx)(e.p,{children:"\u901a\u8fc7\u5728dts\u4e2d\u6dfb\u52a0linux,rs485-enabled-at-boot-time\u914d\u7f6e\u4e3aRS485\u6a21\u5f0f\uff0c\u4ee3\u7801\u6d41\u4e3a\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'static void aic8250_apply_quirks(struct device *dev, struct uart_port *p,\n      struct aic8250_data *data)\n{\n        struct device_node *np = p->dev->of_node;\n        int id;\n\n        uart_get_rs485_mode(p);\n}\n\ndrivers/tty/serial/serial_core.c\n\nint uart_get_rs485_mode(struct uart_port *port)\n{\n   if (device_property_read_bool(dev, "linux,rs485-enabled-at-boot-time"))\n      rs485conf->flags |= SER_RS485_ENABLED;\n}\n'})}),"\n",(0,r.jsx)(e.h4,{id:"572-\u7cbe\u7b80\u6a21\u5f0f",children:"5.7.2. \u7cbe\u7b80\u6a21\u5f0f"}),"\n",(0,r.jsx)(e.p,{children:"\u7cbe\u7b80\u6a21\u5f0f RS485 \u9996\u5148\u662f RS485\uff0c\u56e0\u6b64\u9700\u8981\u5728\u5f00\u542f RS485 \u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u989d\u5916\u7684\u914d\u7f6e\uff0c\u901a\u8fc7\u5728 board.dts \u4e2d\u6dfb\u52a0 aic,rs485-compact-io-mode \u5b8c\u6210\u914d\u7f6e\uff0c\u4ee3\u7801\u6d41\u4e3a\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'drivers/tty/serial/serial_artinchip.c\naic8250_apply_quirks:\nif (device_property_read_bool(dev, "aic,rs485-compact-io-mode"))\n   data->rs485simple = 1;\n\nstatic int aic8250_rs485_config(struct uart_port *p,\n      struct serial_rs485 *prs485)\n{\n   struct aic8250_data *d = to_aic8250_data(p->private_data);\n     unsigned int mcr = p->serial_in(p, UART_MCR);\n     unsigned int rs485 = p->serial_in(p, AIC_REG_UART_RS485);\n\n     mcr &= AIC_UART_MCR_FUNC_MASK;\n     if (prs485->flags & SER_RS485_ENABLED) {\n             if (d->rs485simple)\n                     mcr |= AIC_UART_MCR_RS485S;\n             else\n                     mcr |= AIC_UART_MCR_RS485;\n\n             rs485 |= AIC_UART_RS485_RXBFA;\n             rs485 &= ~AIC_UART_RS485_CTL_MODE;\n     } else {\n             mcr = AIC_UART_MCR_UART;\n             rs485 &= ~AIC_UART_RS485_RXBFA;\n     }\n\n     p->serial_out(p, UART_MCR, mcr);\n     p->serial_out(p, AIC_REG_UART_RS485, rs485);\n\n     return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"58-dma",children:"5.8. DMA"}),"\n",(0,r.jsx)(e.h4,{id:"581-\u7279\u6b8a\u6027",children:"5.8.1. \u7279\u6b8a\u6027"}),"\n",(0,r.jsx)(e.p,{children:"AIC \u7684 DMA \u548c\u6807\u51c6\u7684 DMA\u6709 \u4e00\u70b9\u4f7f\u7528\u4e0d\u540c\uff0c\u9650\u5236\u4e86\u6211\u4eec\u53ea\u80fd\u4f7f\u7528\u81ea\u5df1\u79c1\u6709\u7684 DMA \u63a5\u53e3\uff0c\u4e3b\u8981\u5dee\u522b\u70b9\u5728\u4e8e\u6211\u4eec\u5fc5\u987b\u8bbe\u7f6e UART FIFO\u4e2d \u7684\u6570\u636e\u957f\u5ea6\u8fdb\u884c DMA \u642c\u8fd0\u624d\u4e0d\u4f1a\u51fa\u9519\uff0c\u6d4b\u8bd5\u7684\u903b\u8f91\u4e3a\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679c\u8bbe\u7f6e\u4e86 FIFO \u7684\u4e2d\u65ad\u89e6\u53d1\u4e3a1/2\uff0c\u5219\u5728 FIFO \u4e2d\u6570\u636e\u8fbe\u5230 128byte \u540e\u4f1a\u6536\u5230 data ready \u4e2d\u65ad"}),"\n",(0,r.jsx)(e.li,{children:"\u5982\u679c\u8fd9\u4e2a\u65f6\u5019 UAR T\u5728\u7ee7\u7eed\u63a5\u6536\uff0c\u5219FIFO\u4e2d\u7684\u6570\u636e\u4f1a\u6309 4bytes/\u6b21 \u7684\u901f\u5ea6\u589e\u52a0"}),"\n",(0,r.jsx)(e.li,{children:"\u5982\u679c\u8bbe\u7f6e\u4e86 DMA \u63a5\u6536\u957f\u5ea6\u4e3a64\uff0c\u5219128-64 = 64\u4f1a\u4e22\u5931"}),"\n",(0,r.jsx)(e.li,{children:"\u5982\u679c\u8bbe\u7f6e\u4e86 DM A\u63a5\u6536\u957f\u5ea6\u4e3a1024\uff0c\u5219\u56e0\u4e3afifo\u4e2d\u7684\u6570\u636e\u6700\u591a\u4e3a256\uff0c\u5219\u6c38\u8fdc\u6536\u4e0d\u6ee1"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u56e0\u6b64AIC\u7684DMA\u5904\u7406\u903b\u8f91\u4e3a\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6536\u5230 data ready \u4e2d\u65ad\u540e\uff0c\u5148\u505c\u6389 UART \u7684\u63a5\u6536\uff0c\u9632\u6b62 FIFO \u4e2d\u6570\u636e\u589e\u52a0"}),"\n",(0,r.jsx)(e.li,{children:"\u8bfb\u53d6\u5f53\u65f6 FIFO \u4e2d\u6570\u636e\u7684\u957f\u5ea6\uff0c\u4f5c\u4e3a DMA \u7684\u53c2\u6570\u8fdb\u884c\u6570\u636e\u642c\u79fb"}),"\n",(0,r.jsx)(e.li,{children:"DMA \u642c\u79fb\u6210\u529f\u540e\u91cd\u542f UART \u6570\u636e\u63a5\u6536"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"int aic8250_dma_rx(struct uart_8250_port *p)\n{\n   struct uart_8250_dma              *dma = p->dma;\n   struct dma_async_tx_descriptor    *desc;\n\n   if (dma->rx_running)\n      return 0;\n\n   aic8250_set_ier(p, false);\n   dma->rx_size = p->port.serial_in(&p->port, AIC_REG_UART_RFL);\n\n   desc = dmaengine_prep_slave_single(dma->rxchan, dma->rx_addr,\n                  dma->rx_size, DMA_DEV_TO_MEM,\n                  DMA_PREP_INTERRUPT | DMA_CTRL_ACK);\n   if (!desc)\n      return -EBUSY;\n\n   dma->rx_running = 1;\n   desc->callback = aic8250_dma_rx_complete;\n   desc->callback_param = p;\n\n   dma->rx_cookie = dmaengine_submit(desc);\n\n   dma_async_issue_pending(dma->rxchan);\n\n   return 0;\n}\n"})}),"\n",(0,r.jsx)(e.h4,{id:"582-dma\u5bc4\u5b58\u5668",children:"5.8.2. DMA\u5bc4\u5b58\u5668"}),"\n",(0,r.jsx)(e.p,{children:"DMA \u7684\u6240\u6709\u5bc4\u5b58\u5668\u4e0d\u5efa\u8bae\u8fdb\u884c\u53c2\u6570\u8c03\u6574\uff0c\u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef\uff0c\u4f46 DMA \u9700\u8981\u5de5\u4f5c\u5728 HSK \u6a21\u5f0f\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"p->serial_out(p, AIC_REG_UART_HSK, AIC_HSK_HAND_SHAKE);\n"})}),"\n",(0,r.jsx)(e.h3,{id:"59-\u4fee\u6539\u603b\u7ed3",children:"5.9. \u4fee\u6539\u603b\u7ed3"}),"\n",(0,r.jsx)(e.p,{children:"AIC \u7684 UART \u9a71\u52a8\u9644\u7740\u4e8e8250\u6807\u51c6\u9a71\u52a8\uff0c\u4f46\u53c8\u6709\u4e0d\u4e00\u6837\u7684\u5730\u65b9\uff0c\u603b\u7ed3\u4e00\u4e0b\u4fee\u6539\u5217\u8868"}),"\n",(0,r.jsx)(e.h4,{id:"591-\u9a71\u52a8\u63a5\u53e3",children:"5.9.1. \u9a71\u52a8\u63a5\u53e3"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6dfb\u52a0 AIC \u79c1\u6709\u63a5\u53e3\uff0c8250_artinchip.c,8250_artinchip.h"}),"\n",(0,r.jsx)(e.li,{children:"\u4ece board.dst \u4e2d\u8bfb\u53d6\u5e76\u914d\u7f6e uartclk"}),"\n",(0,r.jsx)(e.li,{children:"\u914d\u5408 SOC \u529f\u80fd\u7b80\u5316\u4ee3\u7801"}),"\n",(0,r.jsx)(e.li,{children:"\u79fb\u9664 autoconfig \u529f\u80fd\uff0c\u56e0\u4e3a\u6709\u4e9b try \u4f1a\u5bfc\u81f4\u8f93\u51fa\u4e71\u7801"}),"\n",(0,r.jsx)(e.li,{children:"DMA \u7b56\u7565\u6dfb\u52a0\u548c\u79c1\u6709\u903b\u8f91\u63a5\u53e3"}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"592-rs485\u652f\u6301",children:"5.9.2. RS485\u652f\u6301"}),"\n",(0,r.jsx)(e.p,{children:"RS485 \u7684\u652f\u6301\u9700\u8981\u8bbe\u7f6e Modem_Control \u548c RS485 Control and Status \u4e24\u4e2a\u5bc4\u5b58\u5668\uff0c\u6dfb\u52a0\u4e86 aic8250_rs485_config \u5904\u7406\u63a5\u53e3"}),"\n",(0,r.jsx)(e.h2,{id:"6-\u5e38\u89c1\u95ee\u9898",children:"6. \u5e38\u89c1\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"61-\u7aef\u53e3\u975etty\u8bbe\u5907",children:"6.1. \u7aef\u53e3\u975etty\u8bbe\u5907"}),"\n",(0,r.jsx)(e.h4,{id:"611-\u73b0\u8c61",children:"6.1.1. \u73b0\u8c61"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"[aic@] # test_uart -N /dev/ttyS1 /detv/ttySw2 1145200\n[2022-01-26 16:23:43]  Test Mode: 0:Normal Test\n[2022-01-26 16:23:43]  Send Device     : /dev/ttyS1\n[2022-01-26 16:23:43]  Receive Device  : /dev/ttyS2\n[2022-01-26 16:23:43]  m_Baudrate      : 115200\n[2022-01-26 16:23:43]  standard input is not a terminal device for /dev/ttyS1\n[2022-01-26 16:23:43]  tcgetattr: Bad file descriptor\n[2022-01-26 16:23:43]  standard input is not a terminal device for /dev/ttyS2\n[2022-01-26 16:23:43]  tcgetattr: Bad file descriptor\n\n[aic@] # echo 111 > /dev/ttyS1\nwrite error: Input/output error\n"})}),"\n",(0,r.jsx)(e.h4,{id:"612-\u539f\u56e0",children:"6.1.2. \u539f\u56e0"}),"\n",(0,r.jsx)(e.p,{children:"\u65b0\u7248IC\u7cfb\u7edf\u4fee\u6539\u4e86 UART Clk \u7684\u5730\u5740\uff0cdts \u4e2d\u672a\u540c\u6b65\u4fee\u6539\uff0c\u5bfc\u81f4\u8bbe\u5907\u867d\u7136\u8fdb\u884c\u4e86\u521d\u59cb\u5316\uff0c\u4f46\u6a21\u5757\u65e0\u6570\u636e\u8bfb\u5199"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"[aic@] # devmem 0x18711000 32\n[2022-02-07 09:23:06]  0x00000000            //uart\u7684\u6240\u6709\u5bc4\u5b58\u5668\u8bfb\u4e0d\u5230\u6570\u636e\uff0cclk\u672a\u5de5\u4f5c\n"})}),"\n",(0,r.jsx)(e.h3,{id:"62-\u957f\u5305\u5361\u6b7b",children:"6.2. \u957f\u5305\u5361\u6b7b"}),"\n",(0,r.jsx)(e.h4,{id:"621-\u73b0\u8c61",children:"6.2.1. \u73b0\u8c61"}),"\n",(0,r.jsx)(e.p,{children:"\u53d1\u9001128\u5b57\u8282\u4ee5\u5185\u7684\u77ed\u5305\uff0c\u6a21\u5757\u53ef\u6b63\u5e38\u6536\u53d1\uff0c\u53d1\u9001\u8d85\u8fc7128\u5b57\u8282\u7684\u957f\u5305\uff0c\u4f1a\u5361\u6b7b"}),"\n",(0,r.jsx)(e.h4,{id:"622-\u539f\u56e0",children:"6.2.2. \u539f\u56e0"}),"\n",(0,r.jsx)(e.p,{children:"D211 RX DMA \u8981\u6c42\u4e25\u683c\u8bbe\u7f6e DMA RX size\uff0c\u5982\u679c\u8be5 size \u8bbe\u7f6e\u4e0d\u5bf9\uff0c\u5219\u4f1a\u6709\u5982\u4e0b\u95ee\u9898\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679c fifo \u4e2d\u6709\u6570\u636e150\uff0c\u800c\u8bbe\u7f6e rx size \u4e3a120\uff0c\u5219\u4e22\u593130\u6570\u636e"}),"\n",(0,r.jsx)(e.li,{children:"\u5982\u679c fifo \u4e2d\u6709\u6570\u636e150\uff0c\u800c\u8bbe\u7f6e rx size \u4e3a160\uff0c \u5219\u6c38\u8fdc\u65e0\u6cd5\u586b\u5145\u6ee1\uff0c\u5219\u6c38\u8fdc\u6536\u4e0d\u56de\u6570\u636e\uff0c\u5361\u6b7b"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u76ee\u524d\u9ed8\u8ba4\u76848250\u9a71\u52a8\u4e2d\uff0c\u8bbe\u7f6e\u7684 rx size \u4e3a1000\uff0c\u4f46 fifo \u7684\u5927\u5c0f\u53ea\u6709256\uff0c\u56e0\u6b64\u6c38\u8fdc\u65e0\u6cd5\u586b\u5145\u5b8c\u6210\uff0c\u6545\u5bfc\u81f4\u7cfb\u7edf\u5361\u6b7b\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"63-\u521d\u59cb\u5316\u4e71\u7801",children:"6.3. \u521d\u59cb\u5316\u4e71\u7801"}),"\n",(0,r.jsx)(e.h4,{id:"631-\u73b0\u8c61",children:"6.3.1. \u73b0\u8c61"}),"\n",(0,r.jsx)(e.p,{children:"reboot \u6d4b\u8bd5\u4e2d\u53d1\u73b0 Linux \u521d\u59cb\u5316 UART \u65f6\u8f93\u51fa\u4e71\u7801 0xFF\uff0c\u5bfc\u81f4\u63a5\u6536\u7aef Python\u811a\u672c \u65ad\u5f00"}),"\n",(0,r.jsx)(e.h4,{id:"632-\u539f\u56e0",children:"6.3.2. \u539f\u56e0"}),"\n",(0,r.jsx)(e.p,{children:"8250\u9a71\u52a8\u56e0\u4e3a\u8981\u517c\u5bb9\u5f88\u591a IC\uff0c\u56e0\u6b64\u521d\u59cb\u5316\u65f6\u6709\u4e00\u4e2a\u81ea\u52a8 try \u7684\u673a\u5236\uff1aautoconfig\uff0c\u901a\u8fc7\u5bf9\u786c\u4ef6\u6a21\u5757\u7684\u6d4b\u8bd5\u6765\u786e\u8ba4 IP \u7c7b\u578b\u548c\u7279\u6b8a\u529f\u80fd\uff0c\u6b64\u81ea\u52a8 try \u5de5\u4f5c\u4f1a\u9891\u7e41\u64cd\u4f5c\u5bc4\u5b58\u5668\uff0c\u65e2\u53ef\u80fd\u9020\u6210\u4e0d\u786e\u5b9a\u7684\u5f71\u54cd\uff08\u8f93\u51fa\u4e0a\u8ff0\u4e71\u7801\uff09\uff0c\u4e5f\u4f1a\u589e\u52a0\u7cfb\u7edf\u5f00\u9500\uff0c\u800c\u6211\u4eec UART \u6a21\u5757\u7279\u6027\u56fa\u5b9a\uff0c\u53ef\u4ee5\u9884\u5148\u8fdb\u884c\u914d\u7f6e\uff0c\u4e0d\u8fdb\u884c try\u3002"}),"\n",(0,r.jsx)(e.p,{children:"autoconfig \u7684\u6838\u5fc3\u662f\u8bbe\u7f6e\u4e86 port->type \u4e3a PORT_16550A\uff0c\u6211\u4eec\u76f4\u63a5\u8bbe\u7f6e type \u540e\u5373\u53ef\u4e0d\u4f7f\u7528 autoconfig \u6d41\u7a0b\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u5173\u95ed autoconfig \u7684\u6d41\u7a0b\u4e3a\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"aic8250_probe:\n    p->type = PORT_16550A;\n    p->flags = UPF_FIXED_TYPE;\nuart_configure_port:\n    if (!(port->flags & UPF_FIXED_TYPE)) {\n        port->type = PORT_UNKNOWN;\n        flags |= UART_CONFIG_TYPE;\n    }\nserial8250_config_port:\n    if (flags & UART_CONFIG_TYPE)\n        autoconfig(up);\n"})})]})}function x(n={}){const{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},1151:(n,e,i)=>{i.d(e,{Z:()=>t,a:()=>d});var r=i(7294);const l={},s=r.createContext(l);function d(n){const e=r.useContext(s);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:d(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);