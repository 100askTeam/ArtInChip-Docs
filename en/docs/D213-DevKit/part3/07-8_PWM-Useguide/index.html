<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-D213-DevKit/part3/07-8_PWM-Useguide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">PWM 使用指南 | 东山Π</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://artinchip.100ask.net/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://artinchip.100ask.net/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://artinchip.100ask.net/en/docs/D213-DevKit/part3/07-8_PWM-Useguide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="PWM 使用指南 | 东山Π"><meta data-rh="true" name="description" content="1. 模块介绍"><meta data-rh="true" property="og:description" content="1. 模块介绍"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://artinchip.100ask.net/en/docs/D213-DevKit/part3/07-8_PWM-Useguide"><link data-rh="true" rel="alternate" href="https://artinchip.100ask.net/docs/D213-DevKit/part3/07-8_PWM-Useguide" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://artinchip.100ask.net/en/docs/D213-DevKit/part3/07-8_PWM-Useguide" hreflang="en"><link data-rh="true" rel="alternate" href="https://artinchip.100ask.net/docs/D213-DevKit/part3/07-8_PWM-Useguide" hreflang="x-default"><link rel="stylesheet" href="/en/assets/css/styles.d875fe7e.css">
<script src="/en/assets/js/runtime~main.b5cd79c8.js" defer="defer"></script>
<script src="/en/assets/js/main.d02687fe.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="东山PI" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/en/img/logo.svg" alt="东山PI" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">东山Π</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/D213-DevKit/BoardIntroduction">D213-DevKit</a><a class="navbar__item navbar__link" href="/en/docs/category/luban-sdk使用指南">Luban-SDK</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/D213-DevKit/part3/07-8_PWM-Useguide" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li><li><a href="/en/docs/D213-DevKit/part3/07-8_PWM-Useguide" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><a href="https://github.com/100askTeam/ArtInChip-Docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/D213-DevKit/BoardIntroduction">匠芯创D213-DevKit开发板</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/D213-DevKit/SupportingResources">源码工具文档手册</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/category/快速启动">快速启动</a><button aria-label="Expand sidebar category &#x27;快速启动&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/D213-DevKit/ConfigHostEnv">安装并配置开发环境</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/category/luban-sdk开发">Luban-SDK开发</a><button aria-label="Expand sidebar category &#x27;Luban-SDK开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/en/docs/category/luban-linux系统开发">Luban-Linux系统开发</a><button aria-label="Collapse sidebar category &#x27;Luban-Linux系统开发&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/04-1_BWMUserGuide">BWM 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/04-2_CMUUserGuide">CMU 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/04-3_DMABook">DMA 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/04-4_RTCUserGuide">RTC 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/04-5_TSensorUserGuide">TSensor 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/04-6_WatchdogUserGuide">Watchdog 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/04-7_WRIUserGuide">WRI 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/05-1_SDMCUserGuide">SDMC 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/05-2_SPI_NANDUserGuide">SPI NAND 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/05-3_SPI_NORUserGuide">SPI NOR 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/05-4_FileSystemUserGuide">文件系统使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/06-1_GE-Useguide">GE 开发指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/06-2_VE-Useguide">VE 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/06-3_Display-Useguide">Display 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/06-4_DVP-Useguide">DVP开发指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/06-8_I2S-Useguide">I2S 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/06-9_AudioCodec-Useguide">AudioCodec 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/07-1_CAN-Useguide">CAN 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/07-2_ CIR-Useguide">CIR 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/07-3_ GPAI-Useguide">GPAI 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/07-4_I2C-Useguide">I2C 开发指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/07-5_MAC-Useguide">MAC 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/07-6_PBus-Useguide">PBus 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/07-7_PINCTRL-Useguide">PINCTRL 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/D213-DevKit/part3/07-8_PWM-Useguide">PWM 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/07-9_RTP-Useguide">RTP 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/07-10_SPI-Useguide">SPI 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/07-11_UART-Useguide">UART 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/07-12_USB-Useguide">USB 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/07-13_PSADC-Useguide">PSADC 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/08-1_SPI-ENC">SPI ENC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/08-2_CE-Useguide">CE 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/08-3_eFuse-Useguide">eFuse 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/08-4_HardwareAuthorizationCertification">硬件授权认证</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/10-1_TouchscreenDebuggingGuide">触摸屏调试指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/10-2_DisplayDebuggingGuide">显示屏调试指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/10-3_WiFiDebuggingGuide">WiFi调试指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/D213-DevKit/part3/10-4_GuideToUsingTheKeyMatrix">按键矩阵使用指南</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/category/linux-bringup参考">Linux-Bringup参考</a><button aria-label="Expand sidebar category &#x27;Linux-Bringup参考&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/category/linux-uboot开发">Linux-Uboot开发</a><button aria-label="Expand sidebar category &#x27;Linux-Uboot开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/category/luban-linux系统开发"><span itemprop="name">Luban-Linux系统开发</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">PWM 使用指南</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>PWM 使用指南</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-模块介绍">1. 模块介绍<a href="#1-模块介绍" class="hash-link" aria-label="Direct link to 1. 模块介绍" title="Direct link to 1. 模块介绍">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-术语定义">1.1. 术语定义<a href="#11-术语定义" class="hash-link" aria-label="Direct link to 1.1. 术语定义" title="Direct link to 1.1. 术语定义">​</a></h3>
<table><thead><tr><th>术语/缩略语</th><th>定义及说明</th></tr></thead><tbody><tr><td>PWM</td><td>Pulse-Width Modulation，脉冲宽度控制，简称脉宽调制</td></tr><tr><td>TBC</td><td>Time Base Counter，时基计数器，用于产生锯齿波</td></tr><tr><td>占空比</td><td>PWM信号中，高电平保持的时间 与 该PWM时钟周期的时间之比</td></tr><tr><td>分辨率</td><td>占空比最小能达到多少，如8位的PWM理论分辨率是1:255</td></tr><tr><td>Up Count</td><td>增模式, 计数方式是递增计数，如从0计数到80、之后又从0到80（波形是锯齿波）</td></tr><tr><td>Down Count</td><td>减模式, 计数方式是递减计数，如从80计数到0、之后又从80到0（波形是锯齿波）</td></tr><tr><td>单斜率</td><td>单个方向的计数，增模式、减模式都属于单斜率</td></tr><tr><td>Up&amp;Down Count</td><td>增减模式，计数方向有两个，如从0计数到80、然后从80到0（波形是三角波），增、减两个过程合起来算一个周期</td></tr><tr><td>双斜率</td><td>两个方向的计数，增减模式属于双斜率</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-pwm-工作原理">1.2. PWM 工作原理<a href="#12-pwm-工作原理" class="hash-link" aria-label="Direct link to 1.2. PWM 工作原理" title="Direct link to 1.2. PWM 工作原理">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="121-pwm-信号">1.2.1. PWM 信号<a href="#121-pwm-信号" class="hash-link" aria-label="Direct link to 1.2.1. PWM 信号" title="Direct link to 1.2.1. PWM 信号">​</a></h4>
<p>PWM信号通常由一列占空比不同的矩形脉冲构成，其占空比可以调节。用数字输出来控制PWM占空比，占空比提高意味着高电平脉宽增大，输出的能量就会增加，PWM就相当于一个 <strong>功率版的DA转换模块</strong>。下图是一个典型的PWM信号波形：</p>
<p><img loading="lazy" src="https://photos.100ask.net/artinchip-docs/d213-devkit/pwm_wave1-17067581098481.png" alt="../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/pwm_wave1.png" class="img_ev3q"></p>
<p>图 7.19 <em>典型的 PWM 信号波形</em><a href="#id8">¶</a></p>
<p>占空比的计算方法： <code>占空比 = (脉宽时间 / 周期) * 100%</code></p>
<p>结合上图，我们可以说： 脉宽时间1 相比 脉宽时间2 提供较小的占空比。</p>
<p>PWM通常用于背光亮度调节、电机控制、舵机控制等。本文仅限于PWM调节背光的功能，通过调节PWM中的占空比，达到控制LED背光电流的通和断，进而可调整背光亮度。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="122-增模式">1.2.2. 增模式<a href="#122-增模式" class="hash-link" aria-label="Direct link to 1.2.2. 增模式" title="Direct link to 1.2.2. 增模式">​</a></h4>
<p>为了灵活调节PWM信号的占空比，要先想办法产生一个递增、或者递减的锯齿波信号，另外再结合一个比较器来跟一个阈值进行比较，当满足条件时进行电平反转，这样达到的效果就是通过调节“阈值”来调节了占空比。</p>
<p>下图是由一个 <strong>递增变化</strong> 的锯齿波产生PWM信号的过程：</p>
<p><img loading="lazy" src="https://photos.100ask.net/artinchip-docs/d213-devkit/generate_pwm_up1-17067581252273.png" alt="../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/generate_pwm_up1.png" class="img_ev3q"></p>
<p>图 7.20 <em>由增模式锯齿波产生 PWM 信号的过程示意图</em></p>
<p>图中 Tpwm 表示PWM信号的周期值，另外有 <strong>三个关键的时间点（下文简称关键时点）</strong> （标注橙色圆圈，为了简洁只标注了最后一个周期）在下文中会频繁使用：</p>
<ul>
<li>
<ul>
<li>
<p>ZRO</p>
<p>Zero Point的缩写，锯齿波的起始点</p>
</li>
</ul>
</li>
<li>
<ul>
<li>
<p>PRD</p>
<p>Preiod Point的缩写，锯齿波到达一个满周期的时间点</p>
</li>
</ul>
</li>
<li>
<ul>
<li>
<p>CMP</p>
<p>Compare Point的缩写，锯齿波到达了阈值的时间点，如上图中的CMP值为7。</p>
</li>
</ul>
</li>
</ul>
<p>小技巧</p>
<p>实际上，PWM模块支持设置两个CMP值：CMPA和CMPB。受限于Linux中PWM子系统架构的接口设计，根据duty参数计算只能得到一个CMP值，所以 <strong>CMPB和CMPA实际上数值保持一致</strong>。</p>
<p>这些关键时点的触发行为Action 有四种类型，详见 <a href="/en/docs/D213-DevKit/part3/2_config_guide.html#ref-pwm-dts">PWM 自定义参数</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="123-减模式">1.2.3. 减模式<a href="#123-减模式" class="hash-link" aria-label="Direct link to 1.2.3. 减模式" title="Direct link to 1.2.3. 减模式">​</a></h4>
<p>下图是由一个 <strong>递减变化</strong> 的锯齿波产生PWM信号的过程：</p>
<p><img loading="lazy" src="https://photos.100ask.net/artinchip-docs/d213-devkit/generate_pwm_down1-17067581420915.png" alt="../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/generate_pwm_down1.png" class="img_ev3q"></p>
<p>图 7.21 <em>由减模式锯齿波产生 PWM 信号的过程示意图</em><a href="#id10">¶</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="124-增减模式">1.2.4. 增减模式<a href="#124-增减模式" class="hash-link" aria-label="Direct link to 1.2.4. 增减模式" title="Direct link to 1.2.4. 增减模式">​</a></h4>
<p>下图是由一个 <strong>同时有递减、递减变化</strong> 的锯齿波产生PWM信号的过程：</p>
<p><img loading="lazy" src="https://photos.100ask.net/artinchip-docs/d213-devkit/generate_pwm_updown1-17067581539537.png" alt="../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/generate_pwm_updown1.png" class="img_ev3q"></p>
<p>图 7.22 <em>由增减模式锯齿波产生 PWM 信号的过程示意图</em></p>
<p>比较以上三种模式的PWM产生过程，可以看到：</p>
<ul>
<li>三种模式可以产生同样效果的PWM信号</li>
<li>配置ZRO、CMP（增减模式中有两处CMP）、PRD的触发行为（Action），可产生不同的PWM信号</li>
<li>CMP的取值，直接决定了占空比，所以用户看到的 <strong>调节占空比就是通过调节CMP值来实现</strong></li>
<li>PRD的值，决定了PWM信号的周期值Tpwm</li>
</ul>
<p>小技巧</p>
<p>具体选择哪一种模式，要依据用户场景的需求特点，建议按 <strong>从简原则：首选相对简  单的单斜率模式</strong>。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-pwm-功能简介">1.3. PWM 功能简介<a href="#13-pwm-功能简介" class="hash-link" aria-label="Direct link to 1.3. PWM 功能简介" title="Direct link to 1.3. PWM 功能简介">​</a></h3>
<p>PWM的硬件设计，使用时基计数器产生上述的锯齿波信号，使用一个比较器可同时产生两路PWM信号。 PWM模块的硬件原理图可简化如下：</p>
<p><img loading="lazy" src="https://photos.100ask.net/artinchip-docs/d213-devkit/hw_system8-17067581733139.png" alt="../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/hw_system8.png" class="img_ev3q"></p>
<p>图 7.23 <em>简化的 PWM 硬件框图</em></p>
<p>PWM模块共支持4个PWM通道，上图只画出了其中一个PWM通道，每个通道的输出信号有两个：PWMx0和PWMx1，对应DTS参数中的 action0和action1 配置。 <a href="/en/docs/D213-DevKit/part3/2_config_guide.html#ref-pwm-dts">PWM 自定义参数</a></p>
<p>PWM 模块支持的功能特性有：</p>
<ul>
<li>
<ul>
<li>
<p>每个PWM通道可以产生两个PWM输出信号: PWMx0 和 PWMx1，可遵循如下配置</p>
<p>两个独立的单边输出两个独立的双边对称输出一个独立的双边非对称输出</p>
</li>
</ul>
</li>
<li>
<p>专用的16位可配置周期和频率的时基计数器（Time Base Counter）</p>
</li>
<li>
<p>系统时钟100MHz</p>
</li>
<li>
<p>多种事件可配置产生对应的中断</p>
</li>
</ul>
<p>注解</p>
<p>PWM硬件Spec文档中，将两个PWM输出信号称作 PWMxA 和 PWMxB，为了避免和阈值 CMPA、CMPB 混淆，软件设计中将两个输出信号称作 PWMx0 和 PWMx1。</p>
<p>在CMPA、CMPB同时使用的情况下，锯齿波就会有两次和阈值的比较，共产生4个关键时点：</p>
<table><thead><tr><th>锯齿波信号波段</th><th>CMPA</th><th>CMPB</th></tr></thead><tbody><tr><td>增斜率段</td><td>CAU (Compare A Up)</td><td>CBU (Compare B Up)</td></tr><tr><td>减斜率段</td><td>CAD (Compare A Down)</td><td>CBD (Compare B Down)</td></tr></tbody></table>
<p>以增减模式的锯齿波为例，共6个关键时点：</p>
<p><img loading="lazy" src="https://photos.100ask.net/artinchip-docs/d213-devkit/cmpa_cmpb1-170675819471711.png" alt="../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/cmpa_cmpb1.png" class="img_ev3q"></p>
<p>图 7.24 <em>增减模式的6个关键时点</em></p>
<p>上图中的，6个关机时点的触发行为配置是：（行为类型定义见 <a href="/en/docs/D213-DevKit/part3/2_config_guide.html#ref-pwm-dts">PWM 自定义参数</a>）</p>
<table><thead><tr><th>关键时点</th><th>Action类型</th></tr></thead><tbody><tr><td>CBD</td><td>none</td></tr><tr><td>CBU</td><td>none</td></tr><tr><td>CAD</td><td>high</td></tr><tr><td>CAU</td><td>none</td></tr><tr><td>PRD</td><td>low</td></tr><tr><td>ZRO</td><td>low</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-参数配置">2. 参数配置<a href="#2-参数配置" class="hash-link" aria-label="Direct link to 2. 参数配置" title="Direct link to 2. 参数配置">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-内核配置">2.1. 内核配置<a href="#21-内核配置" class="hash-link" aria-label="Direct link to 2.1. 内核配置" title="Direct link to 2.1. 内核配置">​</a></h3>
<p>在luban根目录下执行 make kernel-menuconfig，进入kernel的功能配置，按如下选择：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Device Drivers  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [*] Pulse-Width Modulation (PWM) Support  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;*&gt;   ArtInChip PWM support</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>通常，PWM模块被用于 背光控制功能，以下是打开Linux中背光控制模块的方法：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Device Drivers  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Graphics support  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Backlight &amp; LCD device support  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;*&gt; Lowlevel Backlight controls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;*&gt;   Generic PWM based Backlight Driver</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>当使用boot logo功能时，在U-Boot阶段也需要打开屏幕的背光。在U-Boot中打开背光控制模块的方法（在luban根目录下执行 make bm/boot-menuconfig）：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">U-Boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Device Drivers  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [*] Enable support for pulse-width modulation devices (PWM)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [*]   Enable support for ArtInChip PWM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Graphics support  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*] Generic PWM based Backlight Driver</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-dts-参数配置">2.2. DTS 参数配置<a href="#22-dts-参数配置" class="hash-link" aria-label="Direct link to 2.2. DTS 参数配置" title="Direct link to 2.2. DTS 参数配置">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="221-pwm-自定义参数">2.2.1. PWM 自定义参数<a href="#221-pwm-自定义参数" class="hash-link" aria-label="Direct link to 2.2.1. PWM 自定义参数" title="Direct link to 2.2.1. PWM 自定义参数">​</a></h4>
<p>PWM驱动支持从DTS中配置的自定义参数，如下表：</p>
<table><thead><tr><th>参数名称</th><th>类型</th><th>取值范围</th><th>功能说明</th></tr></thead><tbody><tr><td>mode</td><td>字符串</td><td>up/down/up-down-count</td><td>配置增减模式</td></tr><tr><td>tb-clk-rate</td><td>正整数</td><td>(0, 24000000)</td><td>时基计数器的工作时钟</td></tr><tr><td>action0</td><td>字符串</td><td>none/low/high/inverse</td><td>多个关键时点的触发行为</td></tr><tr><td>action1</td><td>字符串</td><td>none/low/high/inverse</td><td>多个关键时点的触发行为</td></tr><tr><td>default-level</td><td>正整数</td><td>[0, 1]</td><td>默认/初始电平</td></tr></tbody></table>
<p>注意，表中为了更加简洁，参数名称都省略了前缀“aic,”。</p>
<p>表中 action0和action1 四种取值的含义，定义如下：</p>
<table><thead><tr><th>Action类型</th><th>行为描述</th></tr></thead><tbody><tr><td>none</td><td>不做任何变化，保持之前的输出电平</td></tr><tr><td>low</td><td>跳变为0电平</td></tr><tr><td>high</td><td>跳变为1电平</td></tr><tr><td>inverse</td><td>跳变为反向的电平，比如原本是0则跳变为1</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="222-时钟配置">2.2.2. 时钟配置<a href="#222-时钟配置" class="hash-link" aria-label="Direct link to 2.2.2. 时钟配置" title="Direct link to 2.2.2. 时钟配置">​</a></h4>
<p>PWM模块涉及4个时钟的衍生关系：</p>
<p><img loading="lazy" src="https://photos.100ask.net/artinchip-docs/d213-devkit/pwm_clk_tree1-170675824837213.png" alt="../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/pwm_clk_tree1.png" class="img_ev3q"></p>
<p>图 7.25 <em>PWM 模块的时钟衍生关系图</em></p>
<p>其中，前两个时钟在PWM控制器的节点中配置，后两个时钟在Board中的PWM子节点（对应通道）中配置。</p>
<p>注解</p>
<p>容易混淆的sysclk：</p>
<ol>
<li>PWM驱动中，按照惯例将父时钟称作 <code>sysclk</code>，即上图的PLL INT1；</li>
<li>PWM硬件spec中，将上图中的PWM Clk称作 <code>sysclk</code>。</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="223-d211-配置">2.2.3. D211 配置<a href="#223-d211-配置" class="hash-link" aria-label="Direct link to 2.2.3. D211 配置" title="Direct link to 2.2.3. D211 配置">​</a></h4>
<p>common/d211.dtsi中的参数配置：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pwm: pwm@19240000 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compatible = &quot;artinchip,aic-pwm-v1.0&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reg = &lt;0x0 0x19240000 0x0 0x1000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    interrupts-extended = &lt;&amp;plic0 90 IRQ_TYPE_LEVEL_HIGH&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #pwm-cells = &lt;3&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clocks = &lt;&amp;cmu CLK_PWM&gt;, &lt;&amp;cmu CLK_PLL_INT1&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clock-names = &quot;pwm&quot;, &quot;sysclk&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resets = &lt;&amp;rst RESET_PWM&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clock-rate = &lt;48000000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="224-board-配置">2.2.4. Board 配置<a href="#224-board-配置" class="hash-link" aria-label="Direct link to 2.2.4. Board 配置" title="Direct link to 2.2.4. Board 配置">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2241-pwm-通道配置">2.2.4.1. PWM 通道配置<a href="#2241-pwm-通道配置" class="hash-link" aria-label="Direct link to 2.2.4.1. PWM 通道配置" title="Direct link to 2.2.4.1. PWM 通 道配置">​</a></h5>
<p>xxx/board.dts中的参数配置：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&amp;pwm {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status = &quot;okay&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pinctrl-names = &quot;default&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pinctrl-0 = &lt;&amp;pwm2_pins_b&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* mode: up-count, down-count, up-down-count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       action: none, low, high, inverse */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pwm0 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,mode = &quot;up-count&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,tb-clk-rate = &lt;24000000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,rise-edge-delay = &lt;10&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,fall-edge-delay = &lt;10&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /*            CBD,    CBU,    CAD,    CAU,    PRD,   ZRO */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,action0 = &quot;none&quot;, &quot;none&quot;, &quot;none&quot;, &quot;low&quot;, &quot;none&quot;, &quot;high&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,action1 = &quot;none&quot;, &quot;none&quot;, &quot;none&quot;, &quot;high&quot;, &quot;none&quot;, &quot;low&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status = &quot;disabled&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pwm1 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,mode = &quot;down-count&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,tb-clk-rate = &lt;24000000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,rise-edge-delay = &lt;10&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,fall-edge-delay = &lt;10&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /*            CBD,    CBU,    CAD,    CAU,    PRD,   ZRO */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,action0 = &quot;none&quot;, &quot;none&quot;, &quot;none&quot;, &quot;low&quot;, &quot;none&quot;, &quot;high&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,action1 = &quot;none&quot;, &quot;none&quot;, &quot;none&quot;, &quot;high&quot;, &quot;none&quot;, &quot;low&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status = &quot;disabled&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pwm2 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,mode = &quot;up-count&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,tb-clk-rate = &lt;24000000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /*            CBD,    CBU,    CAD,    CAU,    PRD,   ZRO */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,action0 = &quot;none&quot;, &quot;none&quot;, &quot;none&quot;, &quot;high&quot;, &quot;low&quot;, &quot;none&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,action1 = &quot;none&quot;, &quot;none&quot;, &quot;none&quot;, &quot;low&quot;, &quot;high&quot;, &quot;none&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,default-level = &lt;0&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,rise-edge-delay = &lt;10&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,fall-edge-delay = &lt;10&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status = &quot;okay&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pwm3 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,mode = &quot;up-count&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,tb-clk-rate = &lt;24000000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /*            CBD,    CBU,    CAD,    CAU,    PRD,   ZRO */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,action0 = &quot;none&quot;, &quot;none&quot;, &quot;none&quot;, &quot;low&quot;, &quot;high&quot;, &quot;none&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,action1 = &quot;none&quot;, &quot;none&quot;, &quot;none&quot;, &quot;high&quot;, &quot;low&quot;, &quot;none&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,rise-edge-delay = &lt;10&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aic,fall-edge-delay = &lt;10&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status = &quot;disabled&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2242-背光控制配置">2.2.4.2. 背光控制配置<a href="#2242-背光控制配置" class="hash-link" aria-label="Direct link to 2.2.4.2. 背光控制配置" title="Direct link to 2.2.4.2. 背光控制配置">​</a></h5>
<p>需要在xxx/board.dts中新增一个backlight节点，如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">backlight: backlight {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compatible = &quot;pwm-backlight&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* pwm node name; pwm device No.; period_ns; pwm_polarity */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pwms = &lt;&amp;pwm 2 1000000 0&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    brightness-levels = &lt;0 10 20 30 40 50 60 70 80 90 100&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default-brightness-level = &lt;8&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status = &quot;okay&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中 “&amp;pwm 2” 表示要使用 pwm2 通道作为背光控制用（要确认和硬件上的电路连接是一致的）。</p>
<p>在屏幕panel节点中，需要引用backlight：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">panel_lvds {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compatible = &quot;artinchip,aic-general-lvds-panel&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data-mapping = &quot;vesa-24&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data-channel = &quot;single-link1&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backlight = &lt;&amp;backlight&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status = &quot;okay&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-调试指南">3. 调试指南<a href="#3-调试指南" class="hash-link" aria-label="Direct link to 3. 调试指南" title="Direct link to 3. 调试指南">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-调试开关">3.1. 调试开关<a href="#31-调试开关" class="hash-link" aria-label="Direct link to 3.1. 调试开关" title="Direct link to 3.1. 调试开关">​</a></h3>
<p>在luban根目录下执行 make kernel-menuconfig，进入kernel的功能配置，可以打开PWM模块的DEBUG选项：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Kernel hacking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Artinchip Debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*] PWM driver debug</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>此DEBUG选项打开的影响：</p>
<ol>
<li>PWM 驱动以-O0编译</li>
<li>PWM 的pr_dbg()和dev_dbg()调试信息会被编译</li>
</ol>
<p>在系统运行时，如果要打印pr_dbg()和dev_dbg()信息，还需要调整loglevel为8，两个方法：</p>
<ol>
<li>在board.dts中修改bootargs，增加“loglevel=8”</li>
<li>在板子启动到Linux shell后，执行命令：</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo 8 &gt; /proc/sys/kernel/printk</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-sysfs-节点">3.2. Sysfs 节点<a href="#32-sysfs-节点" class="hash-link" aria-label="Direct link to 3.2. Sysfs 节点" title="Direct link to 3.2. Sysfs 节点">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="321-状态信息">3.2.1. 状态信息<a href="#321-状态信息" class="hash-link" aria-label="Direct link to 3.2.1. 状态信息" title="Direct link to 3.2.1. 状态信息">​</a></h4>
<p>在PWM驱动初始化成功后，会在Sysfs中注册生成一个 <code>status</code> 节点，其中打印了当前的PWM配置及状态信息：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># cat /sys/devices/platform/soc/19240000.pwm/status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">In PWM V1.00:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Module Enable: 1, IRQ Enable: 0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ch En Mode Tb-clk-rate Def CBD CBU CAD CAU PRD ZRO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0  0   Up           0   0   -   -   -   -   -   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             -   -   -   -   -   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 1  0   Up           0   0   -   -   -   -   -   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             -   -   -   -   -   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 2  1   Up    24000000   0   -   -   - Hgh Low   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             -   -   - Low Hgh   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 3  0   Up           0   0   -   -   -   -   -   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             -   -   -   -   -   -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="322-设置背光">3.2.2. 设置背光<a href="#322-设置背光" class="hash-link" aria-label="Direct link to 3.2.2. 设置背光" title="Direct link to 3.2.2. 设置背光">​</a></h4>
<p>Linux Backlight子系统提供一些 Sysfs 节点，可用来获取、设置当前背光：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># cd /sys/class/backlight/backlight/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ls /sys/class/backlight/backlight/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">actual_brightness  device/            subsystem/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bl_power           max_brightness     type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brightness         scale              uevent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># cat max_brightness</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># cat brightness</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># echo 9 &gt; brightness</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  146.913635] backlight: set brightness to 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  154.054433] aic-pwm 19240000.pwm: ch0 duty 900000 period 1000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># echo 10 &gt; brightness</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  192.145595] backlight: set brightness to 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  192.151118] aic-pwm 19240000.pwm: ch0 duty 1000000 period 1000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># echo 9 &gt; brightness</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  194.681923] backlight: set brightness to 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  194.687264] aic-pwm 19240000.pwm: ch0 duty 900000 period 1000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># echo 8 &gt; brightness</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  197.748816] backlight: set brightness to 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  197.753606] aic-pwm 19240000.pwm: ch0 duty 800000 period 1000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># echo 7 &gt; brightness</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="323-动态配置-pwm-通道">3.2.3. 动态配置 PWM 通道<a href="#323-动态配置-pwm-通道" class="hash-link" aria-label="Direct link to 3.2.3. 动态配置 PWM 通道" title="Direct link to 3.2.3. 动态配置 PWM 通道">​</a></h4>
<p>通常情况下，修改PWM通道的配置，方法是：</p>
<ol>
<li>修改board.dts中的PWM通道参数；</li>
<li>编译uboot、镜像；</li>
<li>重启板子，下载最新镜像；</li>
<li>然后用示波器查看该PWM通道的信号输出是否符合预期。</li>
</ol>
<p>为了提供调试的效率，PWM驱动设计了一个 <code>config</code> 节点，可实现 <strong>运行时动态修改任意PWM通道的任意参数</strong> ，并且立即生效，一步shell中的 <code>echo</code> 操作可实现上述1、2、3步骤的效果。如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># echo &quot;0 1 0 24000000 1 0 2 0 0 1 0&quot; &gt; /sys/devices/platform/soc/1924000.pwm/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[aic@] # cat /sys/devices/platform/soc/19240000.pwm/status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">In PWM V1.00:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Module Enable: 1, IRQ Enable: 0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ch En Mode Tb-clk-rate Def CBD CBU CAD CAU PRD ZRO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0  1   Up    24000000   1   -   -   - Hgh Low   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             - Hgh   -   - Low   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 1  0   Up    24000000   1   -   -   - Hgh Low Low</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             -   -   -   -   -   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 2  0   Up    24000000   0   -   -   -   -   -   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             -   -   -   -   -   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 3  0   Up    24000000   0   -   -   -   -   -   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             -   -   -   -   -   -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>config</code> 的参数格式定义如下（按从左到右的输入顺序）：</p>
<p><img loading="lazy" src="https://photos.100ask.net/artinchip-docs/d213-devkit/image-20240201113211072.png" alt="image-20240201113211072" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-测试指南">4. 测试指南<a href="#4-测试指南" class="hash-link" aria-label="Direct link to 4. 测试指南" title="Direct link to 4. 测试指南">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-测试环境">4.1. 测试环境<a href="#41-测试环境" class="hash-link" aria-label="Direct link to 4.1. 测试环境" title="Direct link to 4.1. 测试环境">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="411-硬件">4.1.1. 硬件<a href="#411-硬件" class="hash-link" aria-label="Direct link to 4.1.1. 硬件" title="Direct link to 4.1.1. 硬件">​</a></h4>
<ul>
<li>开发板，或D211的FPGA板</li>
<li>示波器，用于观察输出PWM信号的波形</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="412-软件">4.1.2. 软件<a href="#412-软件" class="hash-link" aria-label="Direct link to 4.1.2. 软件" title="Direct link to 4.1.2. 软件">​</a></h4>
<ul>
<li>PC端的串口终端软件，用于PC和开发板进行串口通信</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="413-软件配置">4.1.3. 软件配置<a href="#413-软件配置" class="hash-link" aria-label="Direct link to 4.1.3. 软件配置" title="Direct link to 4.1.3. 软件配置">​</a></h4>
<p>背光测试中，需要依赖Backlight的功能：</p>
<ol>
<li>在内核中打开Backlight模块，详见 <a href="/en/docs/D213-DevKit/part3/2_config_guide.html#ref-pwm-km">内核配置</a></li>
<li>在DTS中配置Backlight和PWMx通道的关联，详见 <a href="/en/docs/D213-DevKit/part3/2_config_guide.html#ref-pwm-dts-bl">背光控制配置</a></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-背光测试">4.2. 背光测试<a href="#42-背光测试" class="hash-link" aria-label="Direct link to 4.2. 背光测试" title="Direct link to 4.2. 背光测试">​</a></h3>
<p>利用 Linux Backlight 子系统生成的Sysfs节点，就可以逐级控制背光的亮度变化，详见 <a href="/en/docs/D213-DevKit/part3/3_debug_guide.html#ref-pwm-sysfs-bl">设置背光</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-测试pwm信号">4.3. 测试PWM信号<a href="#43-测试pwm信号" class="hash-link" aria-label="Direct link to 4.3. 测试PWM信号" title="Direct link to 4.3. 测试PWM信号">​</a></h3>
<p>需要借助示波器，方法是：</p>
<ol>
<li>通过 Sysfs节点中的 <code>config</code> 节点，设置 PWM某通道的参数，方法见 <a href="/en/docs/D213-DevKit/part3/3_debug_guide.html#ref-pwm-config">动态配置 PWM 通道</a></li>
<li>然后用示波器查看该PWM通道的信号输出是否符合预期。</li>
</ol>
<p>以下是一些典型的参数组合，可参考：</p>
<p><img loading="lazy" src="https://photos.100ask.net/artinchip-docs/d213-devkit/image-20240201113316371.png" alt="image-20240201113316371" class="img_ev3q"></p>
<p>其中，“正占空比”和“负占空比” 的意思是指当通过 Backlight 节点设置背光亮度时，得到的占空比结果是正向、还是反向的。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-设计说明">5. 设计说明<a href="#5-设计说明" class="hash-link" aria-label="Direct link to 5. 设计说明" title="Direct link to 5. 设计说明">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-源码说明">5.1. 源码说明<a href="#51-源码说明" class="hash-link" aria-label="Direct link to 5.1. 源码说明" title="Direct link to 5.1. 源码说明">​</a></h3>
<p>源代码位于：drivers/pwm/pwm-artinchip.c</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-模块架构">5.2. 模块架构<a href="#52-模块架构" class="hash-link" aria-label="Direct link to 5.2. 模块架构" title="Direct link to 5.2. 模块架构">​</a></h3>
<p>Linux提供了一个PWM子系统，使得在用户空间可以通过sysfs节点来控制Backlight背光。 整个软件框架如下图：</p>
<p><img loading="lazy" src="https://photos.100ask.net/artinchip-docs/d213-devkit/sw_system18-170675845520515.png" alt="../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/sw_system18.png" class="img_ev3q"></p>
<p>图 7.26 <em>Linux PWM 子系统和 Backlight 子系统的软件关系图</em></p>
<p>上图可以看到PWM子系统中有两个概念：</p>
<ol>
<li>
<ul>
<li>
<p>PWM Chip</p>
<p>和硬件的PWM控制器一一对应，内核中维护了一个pwm chip的链表。</p>
</li>
</ul>
</li>
<li>
<ul>
<li>
<p>PWM Device</p>
<p>和硬件的多路PWM通道一一对应，一个pwm chip可以包含多个pwm device。</p>
</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-关键流程设计">5.3. 关键流程设计<a href="#53-关键流程设计" class="hash-link" aria-label="Direct link to 5.3. 关键流程设计" title="Direct link to 5.3. 关键流程设计">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="531-初始化流程">5.3.1. 初始化流程<a href="#531-初始化流程" class="hash-link" aria-label="Direct link to 5.3.1. 初始化流程" title="Direct link to 5.3.1. 初始化流程">​</a></h4>
<p>PWM驱动的初始化过程见aic_pwm_probe()函数，除了普通platform设备的处理过程（申请regs资源、clk、reset）外，需要调用PWM子系统的接口pwmchip_add()来注册一个PWM控制器。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int pwmchip_add(struct pwm_chip *chip);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中参数pwm_chip中关键信息有：通道数目、PWM控制器的ops等，aic_pwm_ops定义如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">static const struct pwm_ops aic_pwm_ops = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .free = aic_pwm_free,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .get_state = aic_pwm_get_state,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .config = aic_pwm_config,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .set_polarity = aic_pwm_set_polarity,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .enable = aic_pwm_enable,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .disable = aic_pwm_disable,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .owner = THIS_MODULE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="532-背光设备的初始化流程">5.3.2. 背光设备的初始化流程<a href="#532-背光设备的初始化流程" class="hash-link" aria-label="Direct link to 5.3.2. 背光设备的初始化流程" title="Direct link to 5.3.2. 背光设备的初始化流程">​</a></h4>
<p>在 <a href="/en/docs/D213-DevKit/part3/2_config_guide.html#ref-pwm-km">内核配置</a> 中，我们打开了一个背光设备“Generic PWM based Backlight Driver”，这个设备对应的驱动代码见 drivers/video/backlight/pwm_bl.c，在其中的probe()函数中会调用devm_pwm_get()来获取对应的pwm设备。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pwm_bl.c, pwm_backlight_probe()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -&gt; pwm/core.c, devm_pwm_get()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -&gt; aic_pwm_get_state()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -&gt; pwm/core.c, pwm_apply_state()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -&gt; aic_pwm_config()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -&gt; aic_pwm_set_polarity()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="533-中断处理流程">5.3.3. 中断处理流程<a href="#533-中断处理流程" class="hash-link" aria-label="Direct link to 5.3.3. 中断处理流程" title="Direct link to 5.3.3. 中断处理流程">​</a></h4>
<p>注解</p>
<p>PWM的中断处理函数暂时为空，还不确定有哪些异常需要处理。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="54-数据结构设计">5.4. 数据结构设计<a href="#54-数据结构设计" class="hash-link" aria-label="Direct link to 5.4. 数据结构设计" title="Direct link to 5.4. 数据结构设计">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="541-aic_pwm_arg">5.4.1. aic_pwm_arg<a href="#541-aic_pwm_arg" class="hash-link" aria-label="Direct link to 5.4.1. aic_pwm_arg" title="Direct link to 5.4.1. aic_pwm_arg">​</a></h4>
<p>记录每一个PWM通道的配置信息：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct aic_pwm_arg {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool available;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enum aic_pwm_mode mode;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32 tb_clk_rate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32 freq;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32 db_red; /* Rising edge delay count of Dead-band */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32 db_fed; /* Failing edge delay count of Dead-band */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct aic_pwm_action action0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct aic_pwm_action action1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32 period;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool def_level;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enum pwm_polarity polarity;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="542-aic_pwm_chip">5.4.2. aic_pwm_chip<a href="#542-aic_pwm_chip" class="hash-link" aria-label="Direct link to 5.4.2. aic_pwm_chip" title="Direct link to 5.4.2. aic_pwm_chip">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct aic_pwm_chip {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct pwm_chip chip;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct attribute_group attrs;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct aic_pwm_arg args[AIC_PWM_CH_NUM];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    unsigned long pll_rate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    unsigned long clk_rate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void __iomem *regs;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct clk *clk;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct reset_control *rst;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32 irq;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="55-接口设计">5.5. 接口设计<a href="#55-接口设计" class="hash-link" aria-label="Direct link to 5.5. 接口设计" title="Direct link to 5.5. 接口设计">​</a></h3>
<p>以下接口是 Linux PWM 子系统需要的标准接口。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="551-aic_pwm_enable">5.5.1. aic_pwm_enable<a href="#551-aic_pwm_enable" class="hash-link" aria-label="Direct link to 5.5.1. aic_pwm_enable" title="Direct link to 5.5.1. aic_pwm_enable">​</a></h4>
<table><thead><tr><th>函数原型</th><th>static int aic_pwm_enable(struct pwm_chip *chip, struct pwm_device *pwm)</th></tr></thead><tbody><tr><td>功能说明</td><td>使能一个pwm通道（device）</td></tr><tr><td>参数定义</td><td>chip - 指向pwm_chip的指针pwm - 指向pwm_device的指针</td></tr><tr><td>返回值</td><td>0，成功； &lt; 0，失败</td></tr><tr><td>注意事项</td><td></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="552-aic_pwm_disable">5.5.2. aic_pwm_disable<a href="#552-aic_pwm_disable" class="hash-link" aria-label="Direct link to 5.5.2. aic_pwm_disable" title="Direct link to 5.5.2. aic_pwm_disable">​</a></h4>
<table><thead><tr><th>函数原型</th><th>static void aic_pwm_disable(struct pwm_chip *chip, struct pwm_device *pwm)</th></tr></thead><tbody><tr><td>功能说明</td><td>关闭一个pwm通道（device）</td></tr><tr><td>参数定义</td><td>chip - 指向pwm_chip的指针pwm - 指向pwm_device的指针</td></tr><tr><td>返回值</td><td>无</td></tr><tr><td>注意事项</td><td></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="553-aic_pwm_free">5.5.3. aic_pwm_free<a href="#553-aic_pwm_free" class="hash-link" aria-label="Direct link to 5.5.3. aic_pwm_free" title="Direct link to 5.5.3. aic_pwm_free">​</a></h4>
<table><thead><tr><th>函数原型</th><th>static void aic_pwm_free(struct pwm_chip *chip, struct pwm_device *pwm)</th></tr></thead><tbody><tr><td>功能说明</td><td>释放一个pwm通道（device），实际上是设置其period为0（无效）</td></tr><tr><td>参数定义</td><td>chip - 指向pwm_chip的指针pwm - 指向pwm_device的指针</td></tr><tr><td>返回值</td><td>无</td></tr><tr><td>注意事项</td><td>需要先调用aic_pwm_disable()，再调用此接口</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="554-aic_pwm_get_state">5.5.4. aic_pwm_get_state<a href="#554-aic_pwm_get_state" class="hash-link" aria-label="Direct link to 5.5.4. aic_pwm_get_state" title="Direct link to 5.5.4. aic_pwm_get_state">​</a></h4>
<table><thead><tr><th>函数原型</th><th>static void aic_pwm_get_state(struct pwm_chip *chip, struct pwm_device *pwm,struct pwm_state *state)</th></tr></thead><tbody><tr><td>功能说明</td><td>获取当前PWM控制器的配置信息。当使能boot logo功能时，U-Boot中已经初始化过PWM，所以Linux中需要从PWM控制器中同步一下当前状态</td></tr><tr><td>参数定义</td><td>chip - 指向pwm_chip的指针pwm - 指向pwm_device的指针state - 指向pwm_state的指针，用于返回当前PWM的状态信息</td></tr><tr><td>返回值</td><td>无</td></tr><tr><td>注意事项</td><td></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="555-aic_pwm_config">5.5.5. aic_pwm_config<a href="#555-aic_pwm_config" class="hash-link" aria-label="Direct link to 5.5.5. aic_pwm_config" title="Direct link to 5.5.5. aic_pwm_config">​</a></h4>
<table><thead><tr><th>函数原型</th><th>static int aic_pwm_config(struct pwm_chip *chip, struct pwm_device *pwm,int duty_ns, int period_ns)</th></tr></thead><tbody><tr><td>功能说明</td><td>配置一个pwm通道（device）的占空比</td></tr><tr><td>参数定义</td><td>chip - 指向pwm_chip的指针pwm - 指向pwm_device的指针duty_ns - 一个PWM周期内的负载时长period_ns - 一个PWM周期</td></tr><tr><td>返回值</td><td>0，成功；&lt; 0，失败</td></tr><tr><td>注意事项</td><td></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="556-aic_pwm_set_polarity">5.5.6. aic_pwm_set_polarity<a href="#556-aic_pwm_set_polarity" class="hash-link" aria-label="Direct link to 5.5.6. aic_pwm_set_polarity" title="Direct link to 5.5.6. aic_pwm_set_polarity">​</a></h4>
<table><thead><tr><th>函数原型</th><th>static int aic_pwm_set_polarity(struct pwm_chip *chip, struct pwm_device *pwm,enum pwm_polarity polarity)</th></tr></thead><tbody><tr><td>功能说明</td><td>配置一个pwm通道（device）的极性（是否需要翻转）</td></tr><tr><td>参数定义</td><td>chip - 指向pwm_chip的指针pwm - 指向pwm_device的指针polarity - 指定的极性</td></tr><tr><td>返回值</td><td>0，成功；&lt; 0，失败</td></tr><tr><td>注意事项</td><td></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-常见问题">6. 常见问题<a href="#6-常见问题" class="hash-link" aria-label="Direct link to 6. 常见问题" title="Direct link to 6. 常见问题">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="61-每个-pwm-控制器的两路输出信号有什么关系">6.1. 每个 PWM 控制器的两路输出信号有什么关系？<a href="#61-每个-pwm-控制器的两路输出信号有什么关系" class="hash-link" aria-label="Direct link to 6.1. 每个 PWM 控制器的两路输出信号有什么关系？" title="Direct link to 6.1. 每个 PWM 控制器的两路输出信号有什么关系？">​</a></h3>
<p>每个控制器可以控制两路输出PWM信号，这两路信号从设计上有三个约束条件：</p>
<ol>
<li>共用同一个 <strong>time-base 信号</strong>，即DTS参数 <code>tb-clk-rate</code>，详见 <a href="/en/docs/D213-DevKit/part3/2_config_guide.html#ref-pwm-dts">PWM 自定义参数</a>；</li>
<li>共用同一个 <strong>PWM 信号频率</strong> 配置参数；</li>
<li>共用同一个 <strong>占空比</strong> 配置参数。</li>
</ol>
<p>上述 “PWM 信号频率” 和 “占空比” 由PWM的 <strong>调用者运行时配置</strong>。 两路信号可以完全相同，也可以做到亮点差别：</p>
<ol>
<li>相位相反，在占空比上看到的是一个为正、一个为负；</li>
<li>可以关闭其中一路，在DTS参数中将对应的Action配置为 “none” 即可。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="62-pwm-信号的占空比是反向的">6.2. PWM 信号的占空比是反向的<a href="#62-pwm-信号的占空比是反向的" class="hash-link" aria-label="Direct link to 6.2. PWM 信号的占空比是反向的" title="Direct link to 6.2. PWM 信号的占空比是反向的">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="621-现象">6.2.1. 现象<a href="#621-现象" class="hash-link" aria-label="Direct link to 6.2.1. 现象" title="Direct link to 6.2.1. 现象">​</a></h4>
<p>通过 Backlight 设备配置了背光亮度后，得到的占空比相位是反向的。比如配置80%，得到的是20%。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="622-原因分析">6.2.2. 原因分析<a href="#622-原因分析" class="hash-link" aria-label="Direct link to 6.2.2. 原因分析" title="Direct link to 6.2.2. 原因分析">​</a></h4>
<p>PWM 信号的电平跳变方向完全是由几个关键时点的配置参数决定，所以如果碰到占空比反向的情况，直  接的调整方法是将配置参数反向设置即可。</p>
<p><a href="/en/docs/D213-DevKit/part3/4_test_guide.html#ref-pwm-result">测试PWM信号</a> 提供了一些典型的参考配置，可以看到相邻的“负占空比”和“正占空比”参数配置基本是反向的。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="63-pwm-信号的周期不准">6.3. PWM 信号的周期不准<a href="#63-pwm-信号的周期不准" class="hash-link" aria-label="Direct link to 6.3. PWM 信号的周期不准" title="Direct link to 6.3. PWM 信号的周期不准">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="631-现象">6.3.1. 现象<a href="#631-现象" class="hash-link" aria-label="Direct link to 6.3.1. 现象" title="Direct link to 6.3.1. 现象">​</a></h4>
<p>这个问题，通常出现在增减模式，看到周期值可能存在“差1”的误差。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="632-解决方法">6.3.2. 解决方法<a href="#632-解决方法" class="hash-link" aria-label="Direct link to 6.3.2. 解决方法" title="Direct link to 6.3.2. 解决方法">​</a></h4>
<p>对于 增模式 和 减模式，周期值的计算方法比较简单：</p>
<blockquote>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Tpwm = (TB Period + 1) / tb-clk-rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Fpwm = 1 / Tpwm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</blockquote>
<p>对于 增加模式，周期值的计算方法是：</p>
<blockquote>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Tpwm = 2 * TB Period / tb-clk-rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Fpwm = 1 / Tpwm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</blockquote>
<p>其中：</p>
<ul>
<li>tb-clk-rate: 时基计数器的工作时钟</li>
<li>Tpwm: PWM信号的周期值</li>
<li>Fpwm: PWM信号的频率值</li>
<li>TB Period: 时基计数器的计数值，假设此值是100，那么从0计数到99就是一个增模式PWM信号的周期</li>
</ul>
<p>在PWM驱动中，tb-clk-rate是从DTS中获取的，其他几个值的计算顺序是：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Tpwm(即period_ns) -&gt; Fpwm（即freq） -&gt; TB Period(即prd)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>代码详见函数aic_pwm_config()中：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">arg-&gt;freq = NSEC_PER_SEC / period_ns;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prd = arg-&gt;tb_clk_rate / arg-&gt;freq;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (arg-&gt;mode == PWM_MODE_UP_DOWN_COUNT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prd &gt;&gt;= 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prd--;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到上面 TB Period(即prd) 的计算过程中有一次 <strong>除2操作</strong>，所以可能会引入“差1”的误差。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/100askTeam/ArtInChip-Docs/tree/master/docs/D213-DevKit/part3/07-8_PWM-Useguide.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/D213-DevKit/part3/07-7_PINCTRL-Useguide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">PINCTRL 使用指南</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/D213-DevKit/part3/07-9_RTP-Useguide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">RTP 使用指南</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-模块介绍" class="table-of-contents__link toc-highlight">1. 模块介绍</a><ul><li><a href="#11-术语定义" class="table-of-contents__link toc-highlight">1.1. 术语定义</a></li><li><a href="#12-pwm-工作原理" class="table-of-contents__link toc-highlight">1.2. PWM 工作原理</a></li><li><a href="#13-pwm-功能简介" class="table-of-contents__link toc-highlight">1.3. PWM 功能简介</a></li></ul></li><li><a href="#2-参数配置" class="table-of-contents__link toc-highlight">2. 参数配置</a><ul><li><a href="#21-内核配置" class="table-of-contents__link toc-highlight">2.1. 内核配置</a></li><li><a href="#22-dts-参数配置" class="table-of-contents__link toc-highlight">2.2. DTS 参数配置</a></li></ul></li><li><a href="#3-调试指南" class="table-of-contents__link toc-highlight">3. 调试指南</a><ul><li><a href="#31-调试开关" class="table-of-contents__link toc-highlight">3.1. 调试开关</a></li><li><a href="#32-sysfs-节点" class="table-of-contents__link toc-highlight">3.2. Sysfs 节点</a></li></ul></li><li><a href="#4-测试指南" class="table-of-contents__link toc-highlight">4. 测试指南</a><ul><li><a href="#41-测试环境" class="table-of-contents__link toc-highlight">4.1. 测试环境</a></li><li><a href="#42-背光测试" class="table-of-contents__link toc-highlight">4.2. 背光测试</a></li><li><a href="#43-测试pwm信号" class="table-of-contents__link toc-highlight">4.3. 测试PWM信号</a></li></ul></li><li><a href="#5-设计说明" class="table-of-contents__link toc-highlight">5. 设计说明</a><ul><li><a href="#51-源码说明" class="table-of-contents__link toc-highlight">5.1. 源码说明</a></li><li><a href="#52-模块架构" class="table-of-contents__link toc-highlight">5.2. 模块架构</a></li><li><a href="#53-关键流程设计" class="table-of-contents__link toc-highlight">5.3. 关键流程设计</a></li><li><a href="#54-数据结构设计" class="table-of-contents__link toc-highlight">5.4. 数据结构设计</a></li><li><a href="#55-接口设计" class="table-of-contents__link toc-highlight">5.5. 接口设计</a></li></ul></li><li><a href="#6-常见问题" class="table-of-contents__link toc-highlight">6. 常见问题</a><ul><li><a href="#61-每个-pwm-控制器的两路输出信号有什么关系" class="table-of-contents__link toc-highlight">6.1. 每个 PWM 控制器的两路输出信号有什么关系？</a></li><li><a href="#62-pwm-信号的占空比是反向的" class="table-of-contents__link toc-highlight">6.2. PWM 信号的占空比是反向的</a></li><li><a href="#63-pwm-信号的周期不准" class="table-of-contents__link toc-highlight">6.3. PWM 信号的周期不准</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dongshanpi.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">DongshanPI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://canaan-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Canaan-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://renesas-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Renesas-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://rtos.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">RTOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tina.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">TinaSDK-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://allwinner-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Allwinner-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://aw-r128.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">R128-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://space.bilibili.com/275908810" target="_blank" rel="noopener noreferrer" class="footer__link-item">BiliBili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forums.100ask.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://video.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VideoCenter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/dongshanpi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://weidongshan.coding.net/public/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Coding<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/100askTeam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/weidongshan" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 100askTeam, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>