<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-D213-DevKit/part5/03-11_PackImage" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">打包镜像 | 东山Π</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://artinchip.100ask.net/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://artinchip.100ask.net/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://artinchip.100ask.net/docs/D213-DevKit/part5/03-11_PackImage"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="打包镜像 | 东山Π"><meta data-rh="true" name="description" content="本章节描述 U-Boot 涉及到的打包镜像相关的内容，以及相关工具。"><meta data-rh="true" property="og:description" content="本章节描述 U-Boot 涉及到的打包镜像相关的内容，以及相关工具。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://artinchip.100ask.net/docs/D213-DevKit/part5/03-11_PackImage"><link data-rh="true" rel="alternate" href="https://artinchip.100ask.net/docs/D213-DevKit/part5/03-11_PackImage" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://artinchip.100ask.net/en/docs/D213-DevKit/part5/03-11_PackImage" hreflang="en"><link data-rh="true" rel="alternate" href="https://artinchip.100ask.net/docs/D213-DevKit/part5/03-11_PackImage" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d875fe7e.css">
<script src="/assets/js/runtime~main.ccbe88ba.js" defer="defer"></script>
<script src="/assets/js/main.498bbc78.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="东山PI" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="东山PI" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">东山Π</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/D213-DevKit/BoardIntroduction">D213-DevKit</a><a class="navbar__item navbar__link" href="/docs/category/luban-sdk使用指南">Luban-SDK</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/docs/D213-DevKit/part5/03-11_PackImage" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">简体中文</a></li><li><a href="/en/docs/D213-DevKit/part5/03-11_PackImage" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li></ul></div><a href="https://github.com/100askTeam/ArtInChip-Docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/D213-DevKit/BoardIntroduction">匠心创D213-DevKit开发板</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/D213-DevKit/SupportingResources">源码工具文档手册</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/快速启动">快速启动</a><button aria-label="展开侧边栏分类 &#x27;快速启动&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/D213-DevKit/ConfigHostEnv">安装并配置开发环境</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/luban-sdk开发">Luban-SDK开发</a><button aria-label="展开侧边栏分类 &#x27;Luban-SDK开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/luban-linux系统开发">Luban-Linux系统开发</a><button aria-label="展开侧边栏分类 &#x27;Luban-Linux系统开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/linux-bringup参考">Linux-Bringup参考</a><button aria-label="展开侧边栏分类 &#x27;Linux-Bringup参考&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/linux-uboot开发">Linux-Uboot开发</a><button aria-label="折叠侧边栏分类 &#x27;Linux-Uboot开发&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-1_BasicIntroduction">ArtInChip U-Boot介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-2_StartupParameter">启动参数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-3_MemoryDependent">内存相关</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-4_EnvironmentVariables">环境变量</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-5_DTS">DTS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-6_SPLStage">SPL 阶段</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-7_U-BootStage">U-Boot 阶段</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-8_DriverSupport">驱动支持</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-9_PartitionConfiguration">分区配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-10_BootKernel">启动内核</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/D213-DevKit/part5/03-11_PackImage">打包镜像</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-12_ImageBurn">镜像烧录</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-13_UserIDBurn">模块介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-14_ImageDisplay">图像显示</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-15_DebugConfiguration">调试配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-16_OpenSBI">OpenSBI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/D213-DevKit/part5/03-17_PBP">Pre-Boot Program</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/linux-uboot开发"><span itemprop="name">Linux-Uboot开发</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">打包镜像</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>打包镜像</h1>
<p>本章节描述 U-Boot 涉及到的打包镜像相关的内容，以及相关工具。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-aic-启动镜像格式">1. AIC 启动镜像格式<a href="#1-aic-启动镜像格式" class="hash-link" aria-label="1. AIC 启动镜像格式的直接链接" title="1. AIC 启动镜像格式的直接链接">​</a></h2>
<blockquote>
<p>ArtInChip BROM 所使用的启动镜像格式。</p>
</blockquote>
<p><em>表 3.15</em> <em>AIC启动镜像格式</em></p>
<table><thead><tr><th>数据区域</th><th>数据分块</th><th>字段</th><th>字节</th><th>描述</th></tr></thead><tbody><tr><td>Signed Area</td><td>Block1(256B)</td><td>Magic</td><td>4</td><td>特征字符串，固定为 ”AIC ”</td></tr><tr><td>Checksum</td><td>4</td><td>32 bit 累加和校验的校验值。安全启动方案设为0.</td><td></td><td></td></tr><tr><td>Header version</td><td>4</td><td>本文件头结构的版本号，当前版本为v1.0: 0x00010001</td><td></td><td></td></tr><tr><td>Image length</td><td>4</td><td>从文件开头到结束的总数据长度</td><td></td><td></td></tr><tr><td>Firmware version</td><td>4</td><td>固件版本号，不同版本之间应单调递增</td><td></td><td></td></tr><tr><td>Loader length</td><td>4</td><td>第一级引导程序的有效数据的长度，不包括填充数据</td><td></td><td></td></tr><tr><td>Load address</td><td>4</td><td>镜像数据加载到内存的目标地址</td><td></td><td></td></tr><tr><td>Entry point</td><td>4</td><td>第一级引导程序的可执行代码入口地址</td><td></td><td></td></tr><tr><td>Signature algorithm</td><td>4</td><td>0：没有签名，仅计算Checksum；1：RSA-2048；</td><td></td><td></td></tr><tr><td>Encryption algorithm</td><td>4</td><td>0：固件不加密；1：AES-128-CBC 加密</td><td></td><td></td></tr><tr><td>Signature result offset</td><td>4</td><td>数字签名数据区域的偏移，从文件头开始计算</td><td></td><td></td></tr><tr><td>Signature result length</td><td>4</td><td>数字签名的长度</td><td></td><td></td></tr><tr><td>Signature key offset</td><td>4</td><td>RSA 公钥数据区域的偏移</td><td></td><td></td></tr><tr><td>Signature key length</td><td>4</td><td>RSA 公钥数据的长度</td><td></td><td></td></tr><tr><td>IV data offset</td><td>4</td><td>AES-CBC IV数据区域的偏移</td><td></td><td></td></tr><tr><td>IV data length</td><td>4</td><td>IV 的长度</td><td></td><td></td></tr><tr><td>Private data offset</td><td>4</td><td>第一级引导程序私有数据区域的偏移</td><td></td><td></td></tr><tr><td>Private data length</td><td>4</td><td>第一级引导程序私有数据区域的长度</td><td></td><td></td></tr><tr><td>PBP offset</td><td>4</td><td>PBP 数据区域的偏移</td><td></td><td></td></tr><tr><td>PBP length</td><td>4</td><td>PBP 数据的长度</td><td></td><td></td></tr><tr><td>Padding</td><td>176</td><td>填充，使得头部刚好 256 字节</td><td></td><td></td></tr><tr><td>Block2</td><td>Loader binary data</td><td>X</td><td>第一级引导程序的保存区域</td><td></td></tr><tr><td>Padding</td><td>X</td><td>增加填充，使得 256 字节对齐</td><td></td><td></td></tr><tr><td>Block3</td><td>Private data area</td><td>X</td><td>存放镜像代码中可能使用的私有数据。</td><td></td></tr><tr><td>Signature key area</td><td>X</td><td>存放 RSA 公钥，DER 格式的密钥文件。应4字节对齐。</td><td></td><td></td></tr><tr><td>IV data area</td><td>16</td><td>存放 AES IV 数据，16字节。应4字节对齐。</td><td></td><td></td></tr><tr><td>PBP area</td><td>X</td><td>存放 PBP 程序。应16字节对齐。</td><td></td><td></td></tr><tr><td>Padding</td><td>X</td><td>填充，使得 256 byte 对齐，方便计算数字签名</td><td></td><td></td></tr><tr><td></td><td>Block4</td><td>Signature result area</td><td>256</td><td>前面所有内容的数字签名</td></tr></tbody></table>
<p>对于 NAND，在保存第一级引导程序的时候，还会在每个 NAND Block 的第一个 Page 生成 Page Table。Page Table 的作用是用于快速索引镜像数据所在的不同备份 Page 地址。</p>
<p><em>表 3.16</em> <em>NAND Page Table 格式</em></p>
<table><thead><tr><th>Index</th><th>Content (20 Bytes)</th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>0</td><td>Magic(4 Bytes)</td><td>Count(4 Bytes)</td><td>Padding (12 Bytes)</td><td></td><td></td></tr><tr><td>1</td><td>PA(4 Bytes)(Backup 0)</td><td>PA(4 Bytes)(Backup 1)</td><td>PA(4 Bytes)(Backup 2)</td><td>PA(4 Bytes)(Backup 3)</td><td>Checksum(4 Bytes)</td></tr><tr><td>2</td><td>PA(4 Bytes)(Backup 0)</td><td>PA(4 Bytes)(Backup 1)</td><td>PA(4 Bytes)(Backup 2)</td><td>PA(4 Bytes)(Backup 3)</td><td>Checksum(4 Bytes)</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr></tbody></table>
<p>Magic 开头的 20 字节，是 Page Table 的头信息，其中 Magic 的值固定为 “AICP”， Count 表示 BootLoader 的数据被分为几个 Page 进行保存。</p>
<p>从 Index 1 表示 BootLoader 的第一个 Page 数据有4个备份，被分别存放在对应 PA(Page address) 所指的 NAND Page 中，Checksum 值是该 Page 数据的校验值。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-烧录镜像格式">2. 烧录镜像格式<a href="#2-烧录镜像格式" class="hash-link" aria-label="2. 烧录镜像格式的直接链接" title="2. 烧录镜像格 式的直接链接">​</a></h2>
<p>Artinchip 的烧录镜像文件由组件(FirmWare Component) 以及对应的组件元信息组成。 数据分布如下图所示。</p>
<p><img loading="lazy" src="https://photos.100ask.net/artinchip-docs/d213-devkit/image_format2-17066888792141.png" alt="../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/image_format2.png" class="img_ev3q"></p>
<p>图 3.5 <em>烧录镜像格式</em></p>
<p>其中一些需要打包的数据文件，都被当做组件(FWC)进行处理，包括 SPL，U-Boot，Kernel，DTB 等数据。</p>
<p>Image Header 的具体格式如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct artinchip_fw_hdr{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char magic[8];      // 固定为 &quot;AIC.FW&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char platform[64];  // 该镜像文件适用的芯片平台</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char product[64];   // 该镜像文件适用的产品型号</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char version[64];   // 该镜像的版本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char media_type[64];// 该镜像文件可烧录的存储介质</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32  media_dev_id;  // 该镜像文件可烧录的存储介质 ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u8   nand_id[64];   // 当存储介质为 NAND 时，适用的 NAND ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32  meta_offset;   // FWC Meta Area start offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32  meta_size;     // FWC Meta Area size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32  file_offset;   // FWC File data Area start offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32  file_size;     // FWC File data Area size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u8 padding[];       // Pad to 2048</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>FWC Meta 的格式如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct artinchip_fwc_meta {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char magic[8];      // 固定为 &quot;META&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char name[64];      // 对应组件的名字</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char partition[64]; // 该组件要烧录的分区名字</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32  offset;        // 该组件数据在镜像文件中的偏移</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32  size;          // 该组件数据的大小</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32  crc32;         // 该组件数据的CRC32校验值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u32  ram;           // 当组件要下载到平台 RAM 时，要下载的地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    char attr[64]       // 该组件的属性，字符串表示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    u8 padding[296];    // Pad to 512</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-fit-image-介绍">3. FIT Image 介绍<a href="#3-fit-image-介绍" class="hash-link" aria-label="3. FIT Image 介绍的直接链接" title="3. FIT Image 介绍的直接链接">​</a></h2>
<p>在 ARTINCHIP 启动系统的开发过程中，使用过不同的 Kernel Image 格式：</p>
<ul>
<li>uImage</li>
<li>zImage</li>
<li>Image.gz</li>
<li>Image</li>
<li>FIT Image(ITB Image)</li>
</ul>
<p>由于未来需要改用 FIT Image(ITB Image)，这里做一个简要的说明。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-kernel-image-格式">3.1. Kernel Image 格式<a href="#31-kernel-image-格式" class="hash-link" aria-label="3.1. Kernel Image 格式的直接链接" title="3.1. Kernel Image 格式的直接链接">​</a></h3>
<ul>
<li>
<p>外网资源：</p>
<p>网上有一篇相关的文章可以参考 <a href="http://www.wowotech.net/u-boot/fit_image_overview.html" target="_blank" rel="noopener noreferrer">http://www.wowotech.net/u-boot/fit_image_overview.html</a></p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="311-image">3.1.1. Image<a href="#311-image" class="hash-link" aria-label="3.1.1. Image的直接链接" title="3.1.1. Image的直接链接">​</a></h4>
<p>这是 Linux kernel 编译时生成的未压缩 Image.</p>
<p>U-Boot 可以通过 booti 命令直接运行该 Image（ARMv7 是 Artinchip 自行添加的命令支持启动），启动命令格式为：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">booti &lt;kernel addr&gt; - &lt;dtb addr&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中 <code>&lt;kernel addr&gt; </code>是 Image 文件所在的内存地址。</p>
<p>Image 文件的格式，在不同芯片架构上是不一样的。对于 ARM64 和 RISCV64，会有一个格式头；但是对于 ARM32，则没有 头信息。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="312-zimage">3.1.2. zImage<a href="#312-zimage" class="hash-link" aria-label="3.1.2. zImage的直接链接" title="3.1.2. zImage的直接链接">​</a></h4>
<p>Image 经过压缩和打包后，生成的 zImage 文件。其做法是将压缩后的 Image 作为 Payload，与一段解压缩代码一起编译 链接，生成 zImage。因此 zImage 是一个可直接启动的自解压镜像。</p>
<p>启动命令为：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bootz &lt;kernel addr&gt; - &lt;dtb addr&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中 <code>&lt;kernel addr&gt; </code>即 zImage 所在的内存地址。</p>
<p>ARM64, RISCV 架构的 Linux kernel 编译，不再生成 zImage 格式的文件。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="313-uimage">3.1.3. uImage<a href="#313-uimage" class="hash-link" aria-label="3.1.3. uImage的直接链接" title="3.1.3. uImage的直接链接">​</a></h4>
<p>uImage 是 U-Boot 定义的一种启动镜像格式，由 64 字节的 U-Boot Image header 加上镜像内容构成。</p>
<p>uImage 中的镜像内容，可以是未压缩的 Image，也可以是压缩的 Image。 Linux kernel 编译时生成（依赖 uboot-tools 包中的 mkimage 工具）。但是新版的 Linux kernel 不再生成 uImage 文件。</p>
<p>uImage 文件的启动命令：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bootm &lt;kernel addr&gt; - &lt;dtb addr&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中<code>&lt;kernel addr&gt;</code> 即 uImage 所在的内存地址。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="314-imagegz">3.1.4. Image.gz<a href="#314-imagegz" class="hash-link" aria-label="3.1.4. Image.gz的直接链接" title="3.1.4. Image.gz的直接链接">​</a></h4>
<p>Image.gz 是 Linux kernel 编译时生成的压缩文件，使用 gzip 算法直接对 Image 文件进行压缩生成。除了 Image.gz，使用 其他压缩算法还可以生成:</p>
<ul>
<li>Image.lzo</li>
<li>Image.lz4</li>
<li>Image.bz2</li>
<li>Image.lzma</li>
</ul>
<p>这些压缩文件就是各种压缩工具生成的标准压缩文件。U-Boot 的启动命令为：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">booti &lt;kernel addr&gt; - &lt;dtb addr&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中 <code>&lt;kernel addr&gt; </code>即 Kernel 压缩文件所在的内存地址。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="315-fit-image">3.1.5. FIT Image<a href="#315-fit-image" class="hash-link" aria-label="3.1.5. FIT Image的直接链接" title="3.1.5. FIT Image的直接链接">​</a></h4>
<p>Flattened Image Tree。</p>
<p>原始参考文档:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source/uboot-2021.10/doc/usage/fit.rst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source/uboot-2021.10/doc/uImage.FIT/howto.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source/uboot-2021.10/doc/uImage.FIT/source_file_format.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source/uboot-2021.10/doc/uImage.FIT/command_syntax_extensions.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如 howto.txt 开篇所提，当前社区使用 FIT Image 的主要理由是：</p>
<ul>
<li>更灵活的处理各种类型的 image 类型(压缩、非压缩、各种格式，各种配置组合)</li>
<li>可以处理安全启动过程中的安全校验（签名校验）</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="3151-配置和生成">3.1.5.1. 配置和生成<a href="#3151-配置和生成" class="hash-link" aria-label="3.1.5.1. 配置和生成的直接链接" title="3.1.5.1. 配置和生成的直接链接">​</a></h5>
<p>Flattened Image Tree 顾名思义，是参考 Flattened Device Tree 命令而来，使用 DTS 的语法， 通过一些新增的节点，描述生成镜像文件所使用的 Image 文件和配置。</p>
<p>例子如： source/uboot-2021.10/doc/uImage.FIT/kernel_fdt.its</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/dts-v1/;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description = &quot;Simple image with single Linux kernel and FDT blob&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #address-cells = &lt;1&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    images {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            kernel {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    description = &quot;Vanilla Linux kernel&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    data = /incbin/(&quot;./vmlinux.bin.gz&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    type = &quot;kernel&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    arch = &quot;ppc&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    os = &quot;linux&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    compression = &quot;gzip&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    load = &lt;00000000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entry = &lt;00000000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    hash-1 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            algo = &quot;crc32&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    hash-2 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            algo = &quot;sha1&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fdt-1 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    description = &quot;Flattened Device Tree blob&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    data = /incbin/(&quot;./target.dtb&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    type = &quot;flat_dt&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    arch = &quot;ppc&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    compression = &quot;none&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    hash-1 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            algo = &quot;crc32&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    hash-2 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            algo = &quot;sha1&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configurations {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            default = &quot;conf-1&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            conf-1 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    description = &quot;Boot Linux kernel with FDT blob&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    kernel = &quot;kernel&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    fdt = &quot;fdt-1&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>此处描述的一个配置，其中包含了 fdt + kernel，以及校验方式。</p>
<p>生成 itb image的命令：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkimage -f kernel_fdt.its kernel_fdt.itb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="3152-启动命令">3.1.5.2. 启动命令<a href="#3152-启动命令" class="hash-link" aria-label="3.1.5.2. 启动命令的直接链接" title="3.1.5.2. 启动命令的直接链接">​</a></h5>
<p>使用默认的配置进行启动：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bootm &lt;kernel itb addr&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如果 its 中有多个配置，可以指定启动的配置组合：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bootm &lt;kernel itb addr&gt;#&lt;conf-name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">如：bootm 0x81000000#conf-2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>更多说明请参考：source/uboot-2021.10/doc/uImage.FIT/command_syntax_extensions.txt</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-使用-fit-image">3.2. 使用 FIT Image<a href="#32-使用-fit-image" class="hash-link" aria-label="3.2. 使用 FIT Image的直接链接" title="3.2. 使用 FIT Image的直接链接">​</a></h3>
<p>ARTINCHIP 项目中，将 Kernel Image 改为使用 FIT Image 的原因：</p>
<ul>
<li>快速启动的需要</li>
<li>减少分区的需要</li>
<li>安全启动的需要</li>
<li>支持 RISCV 的需要</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="321-快速启动">3.2.1. 快速启动<a href="#321-快速启动" class="hash-link" aria-label="3.2.1. 快速启动的直接链接" title="3.2.1. 快速启动的直接链接">​</a></h4>
<p>D211 的快速启动，eMMC 的方案使用未压缩的 Image 速度最快，SPINOR/SPINAND 使用压缩的 zImage 比较合适。</p>
<p>同时 U-Boot 加载 Kernel 最好只读取 Kernel Image 实际大小的数据，避免过多读取无关数据， 才能节省启动时间。</p>
<p>U-Boot 加载 Kernel 时，无论 Image 还是 zImage，都没有头信息，因此即读取 Kernel Image 的大小需要根据实际编译生成的镜像大小进行修改。</p>
<p>如  果采用 FIT Image 则可以避免上述问题。</p>
<p>生成的 FIT Image 有一个信息头，U-Boot 可以先读取信息头的数据，得到 Image 大小，然后按照实际大小读取 剩下的 Kernel Image 数据：</p>
<ol>
<li>从存储介质读取的数据可以做到尽可能的少</li>
<li>开发者不需要手动修改读取的数据大小</li>
</ol>
<p>当然是用了 FIT Image 之后，无论是使用压缩的 zImage/Image.gz 还是使用未压缩的 Image，对启动流程/启动命令 都没有影响，开发者仅需修改 ITS 文件配置即可。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="322-减少分区">3.2.2. 减少分区<a href="#322-减少分区" class="hash-link" aria-label="3.2.2. 减少分区的直接链接" title="3.2.2. 减少分区的直接链接">​</a></h4>
<p>在使用 FIT Image 之前，Kernel 启动所需的 DTB 保存在一个独立的分区中。</p>
<p>DTB 使用一个独立的分区保存对于 SPINOR/SPINAND 的方案而言是一种比较浪费空间的方式。</p>
<p>对于 SPINOR 而言，一般存储空间都比较小，但是分区必须按照一个擦写单元进行，一般是 64KB， 而 DTB 绝大多数在 32KB 以内。</p>
<p>对于 SPINAND 而言，分区同样必须按照一个擦写块进行，一般是 128KB 或者 256KB， 同时要考虑坏块的情况，需要多分配几个块进行备份。</p>
<p>使用 FIT Image，Kernel 所使用的 DTB 与 Kernel 一起进行打包，存放到同一个分区， 有利于提高存储空间的利用效率，同时分区划分更简单。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="323-安全启动">3.2.3. 安全启动<a href="#323-安全启动" class="hash-link" aria-label="3.2.3. 安全启动的直接链接" title="3.2.3. 安全启动的直接链接">​</a></h4>
<p>在安全启动方案中，安全信任链的校验过程如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BROM -&gt; SPL -&gt; U-Boot -&gt; Kernel -&gt; RootFS</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>按照上述顺序逐级进行安全校验。</p>
<p>在 SPL 校验 U-Boot 和 U-Boot 校验 Kernel 的阶段，如果使用 FIT Image，则已经有成熟的安全校验方案， 并且启动处理流程与非安全方案基本一致。不采用 FIT Image，则安全方案和非安全方案所采用的启动流程 差异性比较大，不利于方案的开发和维护。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="324-支持-riscv">3.2.4. 支持 RISCV<a href="#324-支持-riscv" class="hash-link" aria-label="3.2.4. 支持 RISCV的直接链接" title="3.2.4. 支持 RISCV的直接链接">​</a></h4>
<p>RISCV 需要 OpenSBI 协助进行启动，OpenSBI 运行在 U-Boot 之前。</p>
<p>启动流程：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BROM -&gt; SPL -&gt; OpenSBI -&gt; U-Boot -&gt; Kernel</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>RISCV 版本的 SPL 在加载运行 OpenSBI 和 U-Boot 时，仅支持使用 FIT Image， 即需要将下列几个数据打包为一个 ITB 文件(uboot.itb)：</p>
<ul>
<li>OpenSBI</li>
<li>U-Boot</li>
<li>DTB</li>
</ul>
<p>SPL 加载 uboot.itb，读取 DTB 和 U-Boot 到对应的位置，然后运行 OpenSBI，通过 OpenSBI 跳转到 U-Boot。启动的 DTB 是 OpenSBI 和 U-Boot 共用。</p>
<p>Kernel 也使用 FIT Image，可以简化 Image 的种类。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-镜像打包工具">4. 镜像打包工具<a href="#4-镜像打包工具" class="hash-link" aria-label="4. 镜像打包工具的直接链接" title="4. 镜像打包工具的直接链接">​</a></h2>
<p>U-Boot 以及相关固件组件处理相关的工具如下表所列。</p>
<table><thead><tr><th>工具</th><th>说明</th></tr></thead><tbody><tr><td>mkimage</td><td>用于：制作 uImage 格式的 U-Boot 镜像制作 FIT 镜像对 FIT 镜像进行签名U-Boot 编译时生成。编译生成目录/tools/mkimage。</td></tr><tr><td>mkenvimage</td><td>用于：编译生成 env.binU-Boot 编译时生成。编译生成目录/tools/mkenvimage。</td></tr><tr><td>mk_image.py</td><td>用于：制作 AIC 格式的启动镜像，包括签名和加密打包固件组件，生成用于升级的固件镜像文件。tools/scripts/mk_image.py</td></tr><tr><td>get_env_info.py</td><td>用于：解析 env.txt，获取相关分区信息。打包固件过程中使用。tools/scripts/get_env_info.py</td></tr><tr><td>get_image_cfg.py</td><td>用于: 解析 image_cfg.json，获取相关组件配置信息。打包固件过程中使用。tools/scripts/get_image_cfg.py</td></tr><tr><td>get_nand_info.py</td><td>用于：解析 nand_list.json，获取 NAND 器件的相关参数信息，生成 UBIFS 时使用。tools/scripts/get_nand_info.py</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-镜像配置文件">5. 镜像配置文件<a href="#5-镜像配置文件" class="hash-link" aria-label="5. 镜像配置文件的直接链接" title="5. 镜像配置文件的直接链接">​</a></h2>
<p>当使用 <code>mk_image.py</code> 打包生成烧录镜像文件时，需要使用对应的 JSON 配置文件描述具体的打包数据和处理流程。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-配置文件总览">5.1. 配置文件总览<a href="#51-配置文件总览" class="hash-link" aria-label="5.1. 配置文件总览的直接链接" title="5.1. 配置文件总览的直接链接">​</a></h3>
<p>该 JSON 文件通过嵌套对象的方式，描述一个待生成的镜像文件所包含的数据和信息。 其中最终输出的 “image” 对象，由 “info” 数据，”updater” 数据，”target” 数据组成， 制作 “image” 的过程中需要生成和使用的临时文件由 “temporary” 描述。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;image&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;info&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;platform&quot;: &quot;d211&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;product&quot;: &quot;fpga_nand&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;media&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;type&quot;: &quot;spi-nand&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;device_id&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;nand_id&quot; : [&quot;0xef&quot;, &quot;0xba&quot;, &quot;0x21&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;updater&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;spl&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;file&quot;: &quot;u-boot-spl-updater.aic&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;attr&quot;: [&quot;required&quot;, &quot;run&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;ram&quot;: &quot;0x00103000&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;bootui&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;file&quot;: &quot;bootui.img&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;attr&quot;: &quot;optional&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;ram&quot;: &quot;0x80300000&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;env&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;file&quot;: &quot;env.bin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;attr&quot;: [&quot;required&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;ram&quot;: &quot;0x83100000&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;uboot&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;file&quot;: &quot;u-boot-updater.aic&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;attr&quot;: [&quot;required&quot;, &quot;run&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;ram&quot;: &quot;0x80007F00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;target&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;spl&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;file&quot;: &quot;u-boot-spl.aic&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;attr&quot;: [&quot;mtd&quot;, &quot;required&quot;, &quot;burn&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;part&quot;: [&quot;spl&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;uboot&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;file&quot;: &quot;u-boot-dtb.img&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;attr&quot;: [&quot;mtd&quot;, &quot;required&quot;, &quot;burn&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;part&quot;: [&quot;uboot&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;env&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;file&quot;: &quot;env.bin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;attr&quot;: [&quot;mtd&quot;, &quot;required&quot;, &quot;burn&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;part&quot;: [&quot;env&quot;, &quot;envbak&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;bootui&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;file&quot;: &quot;bootui.img&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;attr&quot;: [&quot;mtd&quot;, &quot;optional&quot;, &quot;burn&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            // &lt;mtd part name&gt;:&lt;ubi volume name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;part&quot;: [&quot;bootui&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;dtb&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;file&quot;: &quot;u-boot.dtb&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;attr&quot;: [&quot;mtd&quot;, &quot;required&quot;, &quot;burn&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;part&quot;: [&quot;dtb&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;kernel&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;file&quot;: &quot;Image.gz&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;attr&quot;: [&quot;mtd&quot;, &quot;required&quot;, &quot;burn&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;part&quot;: [&quot;kernel&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;rootfs&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;file&quot;: &quot;rootfs.ubifs&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;attr&quot;: [&quot;ubi&quot;, &quot;optional&quot;, &quot;burn&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;part&quot;: [&quot;ubiroot:rootfs&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;app&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;file&quot;: &quot;user.img&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;attr&quot;: [&quot;ubi&quot;, &quot;optional&quot;, &quot;burn&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;part&quot;: [&quot;ubisystem:user&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;temporary&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;aicboot&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;u-boot-spl.aic&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;head_ver&quot;: &quot;0x00010000&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;anti-rollback counter&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;loader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    &quot;file&quot;: &quot;u-boot-spl.bin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    &quot;load address&quot;: &quot;0x103100&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    &quot;entry point&quot;: &quot;0x103100&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;resource&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    &quot;private&quot;: &quot;private.bin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    &quot;pubkey&quot;: &quot;rsa_pub_key.der&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    &quot;pbp&quot;: &quot;d211.pbp&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;encryption&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    &quot;algo&quot;: &quot;aes-128-cbc&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    &quot;key&quot;: &quot;aes-128-cbc-key.bin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    &quot;iv&quot;: &quot;aes-128-cbc-iv.bin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;signature&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    &quot;algo&quot;: &quot;rsa,2048&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    &quot;privkey&quot;: &quot;rsa-2048-private.der&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;itb&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;u-boot.itb&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;its&quot;: &quot;u-boot.its&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴  板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-info-数据描述">5.2. Info 数据描述<a href="#52-info-数据描述" class="hash-link" aria-label="5.2. Info 数据描述的直接链接" title="5.2. Info 数据描述的直接链接">​</a></h3>
<p>“info” 对象用于描述该烧录镜像的基本信息，这些信息用于生成 Image Header。</p>
<p>其中 “info” 对象可配置的信息有：</p>
<ul>
<li>
<p>“platform”</p>
<p>当前项目所使用的芯片型号。以字符串形式提供。</p>
</li>
<li>
<p>“product”</p>
<p>使用镜像文件的产品型号/名字。以字符串形式提供。</p>
</li>
<li>
<p>“version”</p>
<p>镜像的版本信息，以字符串形式提供。</p>
</li>
<li>
<p>“media”</p>
<p>镜像文件可烧录的存储介质信息组成的对象。其中包含“type”: 存储介质的类型，以字符串形式提供。可填写的类型:“mmc” 当存储介质为 eMMC/SD Card 时填写 “mmc”“spi-nand”“spi-nor”“device_id”: 要烧录的存储介质 ID 号当设备上有多个相同类型的存储设备是，需要提供存储设备的 ID 号。比如设备上同时又 eMMC 和 SD 卡。“nand_id”: NAND 器件的厂商 ID 号，当存储设备为 “spi-nand” 时，需要提供。NAND ID 应以16进制字符串的数组的形式提供，如 [“0xef”, “0xba”, “0x21”]。填写 NAND ID 的原因是 在制作 UBIFS 时，需要知道具体的 NAND 器件的参数，如 Block 大小， Page 大小等。 因此这里提供 NAND ID，以便在制作 UBIFS 时查询。</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-updater-数据描述">5.3. Updater 数据描述<a href="#53-updater-数据描述" class="hash-link" aria-label="5.3. Updater 数据描述的直接链接" title="5.3. Updater 数据描述的直接链接">​</a></h3>
<p>Updater 是进行 USB 升级或者进行 SD 卡时需要运行的 SPL/U-Boot 程序，该程序可能与正常启动时所运行的 SPL/U-Boot 相同，也可能不同，因此需要单独列出。</p>
<p>“updater” 对象描述在升级过程中需要使用到的组件数据。其中下列的组件数据是已知和必要的。</p>
<ul>
<li>
<p>“spl”</p>
<p>第一级引导程序。</p>
</li>
<li>
<p>“env”</p>
<p>升级时 U-Boot 所用的环境变量内容。</p>
</li>
<li>
<p>“uboot”</p>
<p>第二级引导程序，升级的具体功能实现在里面。</p>
</li>
</ul>
<p>上述的组件名字并非固定，可根据项目的需要修改、增加或者删除。</p>
<p>Updater 中的组件数据对象都有以下的配置字段：</p>
<ul>
<li>“file” : 指定该组件的数据来源文件</li>
<li>“ram” : USB 升级时，指定该文件下载的内存地址</li>
<li>“attr” : 该数据对象的属性，可选的内容有:<!-- -->
<ul>
<li>“required” : 该数据是必需的，如果指定文件不存在，则生成镜像文件出错。</li>
<li>“optional” : 该数据不是必需的，如果指定文件不存在，则在生成镜像文件时忽略该数据对象。</li>
<li>“run” : 该数据是可执行文件，USB 升级时，该数据下载完成之后会被执行。</li>
</ul>
</li>
</ul>
<p>重要</p>
<p>“updater” 中组件对象的顺序很重要。</p>
<p>在 USB 升级的过程中，组件数据传输和执行的顺序即为 “updater” 中组件数据出现的顺序， 因此如果组件数据之间有顺序依赖关系，需要按照正确的顺序排布。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="54-target-数据描述">5.4. Target 数据描述<a href="#54-target-数据描述" class="hash-link" aria-label="5.4. Target 数据描述的直接链接" title="5.4. Target 数据描述的直接链接">​</a></h3>
<p>“target” 描述要烧录到设备存储介质上的组件数据。与 “updater” 中的组件一样，”target” 中出现的组件根据实际需要进行添加，组件的名字也可自行定义。</p>
<p>“target” 中的组件，都有下面的配置字段：</p>
<ul>
<li>
<p>“file” : 指定该组件的数据来源文件</p>
</li>
<li>
<p>“part” : 指定该组件被烧录的分区</p>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; 分区名字通过字符串数组的形式提供，如果一个组件被烧录到多个分区，则在数组中提供多个分区的名字， 如 [“uboot1”, “uboot2”]。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; 对于 UBI 的卷，使用 “&lt;MTD Part&gt;:&lt;UBI Volume&gt;” 的形式提供，如 [“ubiboot:kernel”]。 这里 “ubiboot” 是该 UBI 设备所在的 MTD 分区名字，”kernel” 是该 UBI 设备中的 Volume 名字。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>“attr” : 该数据对象的属性，可选的内容有:</p>
<ul>
<li>“required” : 该组件数据是必需的，如果指定文件不存在，则生成镜像文件出错。</li>
<li>“optional” : 该组件数据不是必需的，如果指定文件不存在，则在生成镜像文件时忽略该数据对象。</li>
<li>“burn” : 该组件数据是需要烧录到指定分区当中。</li>
<li>“mtd” : 表示该组件要烧录的设备是 MTD 设备。</li>
<li>“ubi” : 表示该组件要烧录的设备是 UBI 设备。</li>
<li>“block” : 表示该组件要烧录的设备是块设备。</li>
</ul>
</li>
</ul>
<p>重要</p>
<p>“target” 中组件对象的顺序</p>
<p>在 USB 升级的过程中，组件数据传输和烧录的顺序即为 “target” 中组件数据出现的顺序。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="55-temporary-数据描述">5.5. Temporary 数据描述<a href="#55-temporary-数据描述" class="hash-link" aria-label="5.5. Temporary 数据描述的直接链接" title="5.5. Temporary 数据描述的直接链接">​</a></h3>
<p>“temporary” 描述的是镜像文件生成过程中需要生成的中间文件。通过描述数据对象的方式， 描述不同类型的中间文件的生成过程，可用于对组件的签名、加密、再次打包等处理。</p>
<p>当前支持下列两种不同的数据处理：</p>
<ul>
<li>“aicboot” 描述 AIC 启动镜像的生成</li>
<li>“itb” 描述 FIT Image 的打包</li>
</ul>
<p><strong>AIC 启动镜像</strong></p>
<p>AIC 启动镜像是 BROM 解析和执行的启动程序文件，其格式如 <a href="/docs/D213-DevKit/part5/image_format.html#ref-aic-boot-image-format">AIC启动镜像格式</a> 所描述。 当需要在打包过程中生成一个中间的 AIC 启动镜像文件时，需要在   “aicboot” 对象中添加一个子对象， 其对象名字即为生成的文件名字，可配置的内容如下面的示例所示。所列的属性中，只有 “loader” 是必需的， 其他的可根据项目需要进行删减。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;aicboot&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;u-boot-spl.aic&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;head_ver&quot;: &quot;0x00010000&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;anti-rollback counter&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;loader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;file&quot;: &quot;u-boot-spl.bin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;load address&quot;: &quot;0x103100&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;entry point&quot;: &quot;0x103100&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;resource&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;private&quot;: &quot;private.bin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;pubkey&quot;: &quot;rsa_pub_key.der&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;pbp&quot;: &quot;d211.pbp&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;encryption&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;algo&quot;: &quot;aes-128-cbc&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;key&quot;: &quot;aes-128-cbc-key.bin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;iv&quot;: &quot;aes-128-cbc-iv.bin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;signature&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;algo&quot;: &quot;rsa,2048&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;privkey&quot;: &quot;rsa-2048-private.der&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>FIT Image</strong></p>
<p>FIT Image 是 U-Boot 中常用的数据打包方式，用于将一些相关的启动数据打包在一起， 使用 <code>.its</code> 文件描述打包过程。</p>
<p>如果生成烧录镜像文件的过程中，有些数据需要打包组合为一个 FIT Image 文件，则可以在 “itb” 对象中添加一个子对象，其对象名字即为生成的文件名字，可配置的内容位描述该打包 过程的 <code>.its</code> 文件。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;itb&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;u-boot.itb&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;its&quot;: &quot;u-boot.its&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">},</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>烧录镜像文件生成过程中，会调用相应的 mkimage 工具生成 itb 文件。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/100askTeam/ArtInChip-Docs/tree/master/docs/D213-DevKit/part5/03-11_PackImage.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/D213-DevKit/part5/03-10_BootKernel"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">启动内核</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/D213-DevKit/part5/03-12_ImageBurn"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">镜像烧录</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-aic-启动镜像格式" class="table-of-contents__link toc-highlight">1. AIC 启动镜像格式</a></li><li><a href="#2-烧录镜像格式" class="table-of-contents__link toc-highlight">2. 烧录镜像格式</a></li><li><a href="#3-fit-image-介绍" class="table-of-contents__link toc-highlight">3. FIT Image 介绍</a><ul><li><a href="#31-kernel-image-格式" class="table-of-contents__link toc-highlight">3.1. Kernel Image 格式</a></li><li><a href="#32-使用-fit-image" class="table-of-contents__link toc-highlight">3.2. 使用 FIT Image</a></li></ul></li><li><a href="#4-镜像打包工具" class="table-of-contents__link toc-highlight">4. 镜像打包工具</a></li><li><a href="#5-镜像配置文件" class="table-of-contents__link toc-highlight">5. 镜像配置文件</a><ul><li><a href="#51-配置文件总览" class="table-of-contents__link toc-highlight">5.1. 配置文件总览</a></li><li><a href="#52-info-数据描述" class="table-of-contents__link toc-highlight">5.2. Info 数据描述</a></li><li><a href="#53-updater-数据描述" class="table-of-contents__link toc-highlight">5.3. Updater 数据描述</a></li><li><a href="#54-target-数据描述" class="table-of-contents__link toc-highlight">5.4. Target 数据描述</a></li><li><a href="#55-temporary-数据描述" class="table-of-contents__link toc-highlight">5.5. Temporary 数据描述</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dongshanpi.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">DongshanPI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://canaan-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Canaan-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://renesas-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Renesas-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://rtos.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">RTOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tina.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">TinaSDK-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://allwinner-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Allwinner-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://aw-r128.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">R128-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://space.bilibili.com/275908810" target="_blank" rel="noopener noreferrer" class="footer__link-item">BiliBili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forums.100ask.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://video.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VideoCenter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/dongshanpi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://weidongshan.coding.net/public/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Coding<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/100askTeam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/weidongshan" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 100askTeam, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>