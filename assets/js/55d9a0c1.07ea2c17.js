"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1717],{8346:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var l=r(5893),i=r(1151);const s={sidebar_position:2},t="MPP \u64ad\u653e\u5668\u4f7f\u7528\u6307\u5357",a={id:"Luban-SDK/part2/06-6_MPPPlayer-Useguide",title:"MPP \u64ad\u653e\u5668\u4f7f\u7528\u6307\u5357",description:"1. \u6a21\u5757\u4ecb\u7ecd",source:"@site/docs/Luban-SDK/part2/06-6_MPPPlayer-Useguide.md",sourceDirName:"Luban-SDK/part2",slug:"/Luban-SDK/part2/06-6_MPPPlayer-Useguide",permalink:"/docs/Luban-SDK/part2/06-6_MPPPlayer-Useguide",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/ArtInChip-Docs/tree/master/docs/Luban-SDK/part2/06-6_MPPPlayer-Useguide.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"lunbansdkSidebar",previous:{title:"MPP\u4f7f\u7528\u6307\u5357",permalink:"/docs/Luban-SDK/part2/06-5_MPP-Useguide"},next:{title:"Gstreamer \u4f7f\u7528\u6307\u5357",permalink:"/docs/Luban-SDK/part2/06-7_Gstreamer-Useguide"}},d={},c=[{value:"1. \u6a21\u5757\u4ecb\u7ecd",id:"1-\u6a21\u5757\u4ecb\u7ecd",level:2},{value:"1.1. \u672f\u8bed\u5b9a\u4e49",id:"11-\u672f\u8bed\u5b9a\u4e49",level:3},{value:"1.2. \u6a21\u5757\u7b80\u4ecb",id:"12-\u6a21\u5757\u7b80\u4ecb",level:3},{value:"2. \u53c2\u6570\u914d\u7f6e",id:"2-\u53c2\u6570\u914d\u7f6e",level:2},{value:"2.1. \u64ad\u653e\u5668\u914d\u7f6e",id:"21-\u64ad\u653e\u5668\u914d\u7f6e",level:3},{value:"2.1.1. \u97f3\u9891\u89e3\u7801\u914d\u7f6e",id:"211-\u97f3\u9891\u89e3\u7801\u914d\u7f6e",level:4},{value:"3. \u8c03\u8bd5\u6307\u5357",id:"3-\u8c03\u8bd5\u6307\u5357",level:2},{value:"3.1. Player \u8c03\u8bd5",id:"31-player-\u8c03\u8bd5",level:3},{value:"3.2. \u5b50\u6a21\u5757\u8c03\u8bd5",id:"32-\u5b50\u6a21\u5757\u8c03\u8bd5",level:3},{value:"4. \u6d4b\u8bd5\u6307\u5357",id:"4-\u6d4b\u8bd5\u6307\u5357",level:2},{value:"4.1. \u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b",id:"41-\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b",level:3},{value:"4.1.1. player_demo",id:"411-player_demo",level:4},{value:"4.1.1.1. \u6d4b\u8bd5\u51c6\u5907\u6761\u4ef6",id:"4111-\u6d4b\u8bd5\u51c6\u5907\u6761\u4ef6",level:5},{value:"4.1.1.2. \u6d4b\u8bd5\u6b65\u9aa4",id:"4112-\u6d4b\u8bd5\u6b65\u9aa4",level:5},{value:"4.1.1.3. \u6d4b\u8bd5\u9884\u671f",id:"4113-\u6d4b\u8bd5\u9884\u671f",level:5},{value:"5. \u8bbe\u8ba1\u8bf4\u660e",id:"5-\u8bbe\u8ba1\u8bf4\u660e",level:2},{value:"5.1. \u6e90\u7801\u8bf4\u660e",id:"51-\u6e90\u7801\u8bf4\u660e",level:3},{value:"5.2. \u6a21\u5757\u67b6\u6784",id:"52-\u6a21\u5757\u67b6\u6784",level:3},{value:"5.3. player interface \u7684\u8bbe\u8ba1",id:"53-player-interface-\u7684\u8bbe\u8ba1",level:3},{value:"5.3.1. \u72b6\u6001\u673a\u8bbe\u8ba1",id:"531-\u72b6\u6001\u673a\u8bbe\u8ba1",level:4},{value:"5.3.2. \u6570\u636e\u7ed3\u6784\u8bbe\u8ba1",id:"532-\u6570\u636e\u7ed3\u6784\u8bbe\u8ba1",level:4},{value:"5.3.3. \u63a5\u53e3\u8bbe\u8ba1",id:"533-\u63a5\u53e3\u8bbe\u8ba1",level:4},{value:"5.3.3.1. aic_player_create",id:"5331-aic_player_create",level:5},{value:"5.3.3.2. aic_player_destroy",id:"5332-aic_player_destroy",level:5},{value:"5.3.3.3. aic_player_set_uri",id:"5333-aic_player_set_uri",level:5},{value:"5.3.3.4. aic_player_prepare_async",id:"5334-aic_player_prepare_async",level:5},{value:"5.3.3.5. aic_player_prepare_sync",id:"5335-aic_player_prepare_sync",level:5},{value:"5.3.3.6. aic_player_start",id:"5336-aic_player_start",level:5},{value:"5.3.3.7. aic_player_play",id:"5337-aic_player_play",level:5},{value:"5.3.3.8. aic_player_pause",id:"5338-aic_player_pause",level:5},{value:"5.3.3.9. aic_player_stop",id:"5339-aic_player_stop",level:5},{value:"5.3.3.10. aic_player_get_media_info",id:"53310-aic_player_get_media_info",level:5},{value:"5.3.3.11. aic_player_set_event_callback",id:"53311-aic_player_set_event_callback",level:5},{value:"5.3.3.12. aic_player_get_screen_size",id:"53312-aic_player_get_screen_size",level:5},{value:"5.3.3.13. aic_player_set_disp_rect",id:"53313-aic_player_set_disp_rect",level:5},{value:"5.3.3.14. aic_player_get_disp_rect",id:"53314-aic_player_get_disp_rect",level:5},{value:"5.3.3.15. aic_player_set_mute",id:"53315-aic_player_set_mute",level:5},{value:"5.3.3.16. aic_player_set_volum",id:"53316-aic_player_set_volum",level:5},{value:"5.3.3.17. aic_player_get_volum",id:"53317-aic_player_get_volum",level:5},{value:"5.3.3.18. aic_player_get_play_time",id:"53318-aic_player_get_play_time",level:5},{value:"5.3.3.19. aic_player_seek",id:"53319-aic_player_seek",level:5},{value:"5.3.3.20. aic_player_capture",id:"53320-aic_player_capture",level:5},{value:"5.3.3.21. aic_player_set_rotation",id:"53321-aic_player_set_rotation",level:5},{value:"5.3.3.22. aic_player_get_rotation",id:"53322-aic_player_get_rotation",level:5},{value:"5.3.4. APP Demo",id:"534-app-demo",level:4},{value:"6. \u5e38\u89c1\u95ee\u9898",id:"6-\u5e38\u89c1\u95ee\u9898",level:2}];function _(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"mpp-\u64ad\u653e\u5668\u4f7f\u7528\u6307\u5357",children:"MPP \u64ad\u653e\u5668\u4f7f\u7528\u6307\u5357"}),"\n",(0,l.jsx)(n.h2,{id:"1-\u6a21\u5757\u4ecb\u7ecd",children:"1. \u6a21\u5757\u4ecb\u7ecd"}),"\n",(0,l.jsx)(n.h3,{id:"11-\u672f\u8bed\u5b9a\u4e49",children:"1.1. \u672f\u8bed\u5b9a\u4e49"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u672f\u8bed"}),(0,l.jsx)(n.th,{children:"\u5b9a\u4e49"}),(0,l.jsx)(n.th,{children:"\u6ce8\u91ca\u8bf4\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"OpenMAX"}),(0,l.jsx)(n.td,{children:"Open Media Accceleration"}),(0,l.jsx)(n.td,{children:"\u5f00\u653e\u591a\u5a92\u4f53\u52a0\u901f\u5c42"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"OMX_DemuxerComponent"}),(0,l.jsx)(n.td,{children:"OpenMAX Demuxer Component"}),(0,l.jsx)(n.td,{children:"\u89e3\u5c01\u88c5\u7ec4\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"OMX_VdecComponent"}),(0,l.jsx)(n.td,{children:"OpenMAX VIdeo Decoder Component"}),(0,l.jsx)(n.td,{children:"\u89c6\u9891\u89e3\u7801\u7ec4\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"OMX_VideoRenderComponent"}),(0,l.jsx)(n.td,{children:"OpenMAX VIdeo Render Component"}),(0,l.jsx)(n.td,{children:"\u89c6\u9891\u6e32\u67d3\u7ec4\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"OMX_AdecComponent"}),(0,l.jsx)(n.td,{children:"OpenMAX Audio Decoder Component"}),(0,l.jsx)(n.td,{children:"\u97f3\u9891\u89e3\u7801\u7ec4\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"OMX_AudioRenderComponent"}),(0,l.jsx)(n.td,{children:"OpenMAX Audio Render Component"}),(0,l.jsx)(n.td,{children:"\u97f3\u9891\u6e32\u67d3\u7ec4\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"OMX_ClockComponent"}),(0,l.jsx)(n.td,{children:"OpenMAX Clock Component"}),(0,l.jsx)(n.td,{children:"\u65f6\u949f\u7ec4\u4ef6"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"12-\u6a21\u5757\u7b80\u4ecb",children:"1.2. \u6a21\u5757\u7b80\u4ecb"}),"\n",(0,l.jsx)(n.p,{children:"\u8be5\u6a21\u5757\u65e8\u5728\u5411\u5ba2\u6237\u63d0\u4f9b\u7b80\u5355\u6613\u7528\u7684 API\uff0c\u5e2e\u52a9\u5ba2\u6237\u5feb\u901f\u5b9e\u73b0\u7b80\u6613\u64ad\u653e\u5668\u7684\u529f\u80fd\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u6a21\u5757\u7279\u6027:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u63a7\u5236\u529f\u80fd","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u76ee\u524d\u652f\u6301 \uff1a\u97f3\u89c6\u9891\u540c\u6b65\uff0c\u64ad\u653e\uff0c\u6682\u505c\uff0c\u97f3\u91cf\u8c03\u6574\uff0c\u6293\u62cd,seek"}),"\n",(0,l.jsx)(n.li,{children:"\u6682\u4e0d\u652f\u6301 \uff1a\u5feb\u8fdb\u5feb\u9000"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u517c\u5bb9\u6027","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5c01\u88c5\u683c\u5f0f \uff1a \u652f\u6301 MP4 \u5c01\u88c5 ,H264 \u88f8\u7801\u6d41 \u548c MP3 \u5c01\u88c5"}),"\n",(0,l.jsx)(n.li,{children:"\u4f20\u8f93\u534f\u8bae \uff1a \u652f\u6301\u672c\u5730\u6587\u4ef6"}),"\n",(0,l.jsx)(n.li,{children:"\u89c6\u9891\u89e3\u7801 \uff1a \u652f\u6301 H264"}),"\n",(0,l.jsx)(n.li,{children:"\u97f3\u9891\u89e3\u7801 \uff1a \u652f\u6301 MP3\u3001AAC"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"2-\u53c2\u6570\u914d\u7f6e",children:"2. \u53c2\u6570\u914d\u7f6e"}),"\n",(0,l.jsx)(n.h3,{id:"21-\u64ad\u653e\u5668\u914d\u7f6e",children:"2.1. \u64ad\u653e\u5668\u914d\u7f6e"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 luban \u6839\u76ee\u5f55\u4e0b\u6267\u884c make menuconfig\uff0c\u6309\u5982\u4e0b\u65b9\u5f0f\u914d\u7f6e\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"ArtInChip Packages---\x3e\n    aic-mpp---\x3e\n        [*]   enable middle ware\n"})}),"\n",(0,l.jsx)(n.h4,{id:"211-\u97f3\u9891\u89e3\u7801\u914d\u7f6e",children:"2.1.1. \u97f3\u9891\u89e3\u7801\u914d\u7f6e"}),"\n",(0,l.jsx)(n.p,{children:"\u64ad\u653e\u5668\u9ed8\u8ba4\u53ea\u652f\u6301 MP3 \u97f3\u9891\uff0c\u5982\u679c\u9700\u8981\u652f\u6301 AAC \u97f3\u9891\uff0c\u6309\u5982\u4e0b\u65b9\u5f0f\u914d\u7f6e\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"ArtInChip Packages---\x3e\n    aic-mpp---\x3e\n        [*]   enable middle ware\n        [*]       enable aac decoder\n"})}),"\n",(0,l.jsx)(n.h2,{id:"3-\u8c03\u8bd5\u6307\u5357",children:"3. \u8c03\u8bd5\u6307\u5357"}),"\n",(0,l.jsx)(n.h3,{id:"31-player-\u8c03\u8bd5",children:"3.1. Player \u8c03\u8bd5"}),"\n",(0,l.jsx)(n.p,{children:"Player \u548c MPP \u4f7f\u7528\u76f8\u540c\u7684 log \u51fd\u6570\uff0c\u6253\u5f00 Player \u8c03\u8bd5\uff0c\u540c\u65f6\u4e5f\u4f1a\u6253\u5f00 MPP \u7684\u8c03\u8bd5\u3002MPP \u8c03\u8bd5 log \u7b49\u7ea7\u5206\u4e3a ERROR, WARNING, INFO, DEBUG, VERBOSE\u3002\u901a\u8fc7 LOGL_DEFAULT \u5b9a\u4e49 MPP \u5168\u5c40\u7684 log \u7b49\u7ea7\u3002 \u9ed8\u8ba4 log \u7b49\u7ea7\u4e3a ERROR\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u6e90\u6587\u4ef6\u8def\u5f84\uff1aaic-mpp/base/include/mpp_log.h"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"enum log_level {\n    LOGL_ERROR = 0,\n    LOGL_WARNING,\n    LOGL_INFO,\n    LOGL_DEBUG,\n    LOGL_VERBOSE,\n\n    LOGL_COUNT,\n\n    LOGL_DEFAULT = LOGL_ERROR,\n    LOGL_FORCE_DEBUG = 0x10,\n};\n"})}),"\n",(0,l.jsx)(n.h3,{id:"32-\u5b50\u6a21\u5757\u8c03\u8bd5",children:"3.2. \u5b50\u6a21\u5757\u8c03\u8bd5"}),"\n",(0,l.jsx)(n.p,{children:"\u6253\u5f00\u5b50\u6a21\u5757\u8c03\u8bd5 log \u65b9\u5f0f\uff0c\u5728\u5b50\u6a21\u5757\u4e2d\u6dfb\u52a0\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"#define LOG_DEBUG\n"})}),"\n",(0,l.jsx)(n.h2,{id:"4-\u6d4b\u8bd5\u6307\u5357",children:"4. \u6d4b\u8bd5\u6307\u5357"}),"\n",(0,l.jsx)(n.h3,{id:"41-\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b",children:"4.1. \u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b"}),"\n",(0,l.jsx)(n.h4,{id:"411-player_demo",children:"4.1.1. player_demo"}),"\n",(0,l.jsx)(n.p,{children:"player_demo \u4e3b\u8981\u529f\u80fd\u662f\u64ad\u653e MP4 \u89c6\u9891\u6587\u4ef6\u3002"}),"\n",(0,l.jsx)(n.h5,{id:"4111-\u6d4b\u8bd5\u51c6\u5907\u6761\u4ef6",children:"4.1.1.1. \u6d4b\u8bd5\u51c6\u5907\u6761\u4ef6"}),"\n",(0,l.jsx)(n.p,{children:"\u64ad\u653e\u5668\u652f\u6301\u7684\u6587\u4ef6\u683c\u5f0f\u6709\u8981\u6c42\uff0cmp4 \u5c01\u88c5\uff0c\u89c6\u9891 H264 \u7f16\u7801\uff0c\u97f3\u9891 mp3/aac \u7f16\u7801\u3002"}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\u679c\u89c6\u9891\u683c\u5f0f\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u9700\u8981\u4f7f\u7528 ffmpeg \uff08\u5b98\u7f51\u5730\u5740\uff1a",(0,l.jsx)(n.a,{href:"http://ffmpeg.org%EF%BC%89%E8%BF%9B%E8%A1%8C%E8%BD%AC%E7%A0%81%E3%80%82",children:"http://ffmpeg.org\uff09\u8fdb\u884c\u8f6c\u7801\u3002"})]}),"\n",(0,l.jsx)(n.p,{children:"\u8f6c\u7801\u547d\u4ee4\uff1a"}),"\n",(0,l.jsx)(n.p,{children:"1.\u89c6\u9891\u662f H264 \u7f16\u7801\uff0c\u97f3\u9891\u8f6c\u7801\u4e3a MP3"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"ffmpeg.exe -i src.mp4 -vcodec copy -acodec libmp3lame des.mp4\n"})}),"\n",(0,l.jsx)(n.p,{children:"2.\u89c6\u9891\u662f H264 \u7f16\u7801\uff0c\u97f3\u9891\u8f6c\u7801\u4e3a AAC"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"ffmpeg.exe -i src.mp4 -vcodec copy -acodec aac des.mp4\n"})}),"\n",(0,l.jsx)(n.p,{children:"3.\u89c6\u9891\u8f6c\u7801\u4e3a H264\uff0c\u97f3\u9891\u8f6c\u7801\u4e3a AAC"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"ffmpeg.exe -i src.mp4 -vcodec libx264 -bf 0 -refs 2 -acodec aac des.mp4\n"})}),"\n",(0,l.jsx)(n.h5,{id:"4112-\u6d4b\u8bd5\u6b65\u9aa4",children:"4.1.1.2. \u6d4b\u8bd5\u6b65\u9aa4"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"mount SD\u5361"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"mkdir -p /mnt/sd             # \u5728\u677f\u5b50\u4e0a\u521b\u5efa /mnt/sd\u76ee\u5f55\nmount /dev/mmcblk0p1  /mnt/sd   # \u5c06sd\u5361\u6302\u5728\u5230/mnt/sd  \u5176\u4e2dsd\u5361\u8282\u70b9 /dev/mmcblk0p1 \u6839\u636e\u81ea\u5df1\u5b9e\u9645\u8282\u70b9\u4fee\u6539\n"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u901a\u8fc7adb push\u5c06\u89c6\u9891\u63a8\u9001\u5230sd\u5361\u4e0a\u7684video\u76ee\u5f55"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"adb push  your_video /mnt/sd/video\n"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u8fd0\u884c player_demo"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"player_demo -h #\u67e5\u770b\u4f7f\u7528\u8bf4\u660e\n-i                           input stream file name\n-t                           directory of test files\n-l                           loop time\n-h                           help\n    Example1(test single file for 1 time): player_demo -i /mnt/video/test.mp4\n    Example2(test single file for 3 times): player_demo -i /mnt/video/test.mp4 -l 3\n    Example3(test some files for 1 time ) : player_demo -t /mnt/video\n    Example4(test some file for 3 times ): player_demo -i /mnt/video -l 3\n---------------------------------------------------------------------------------------\n-------------------------------control key while playing-------------------------------\n---------------------------------------------------------------------------------------\n('d' + Enter): play next\n('u' + Enter): play previous\n('p' + Enter): pause/play\n('+' + Enter): volum+5\n('-' + Enter): volum-5\n('m' + Enter): enter/eixt mute\n('c' + Enter): capture pic,firstly,please pause and then capture\n('f' + Enter): seek+8s\n('b' + Enter): seek-8s\n('z' + Enter): seek to the start of the file\n('r' + Enter): rotation\n"})}),"\n",(0,l.jsx)(n.h5,{id:"4113-\u6d4b\u8bd5\u9884\u671f",children:"4.1.1.3. \u6d4b\u8bd5\u9884\u671f"}),"\n",(0,l.jsx)(n.p,{children:"1.\u5faa\u73af\u64ad\u653e\u89c6\u9891\u5217\u8868\uff0c\u540c\u65f6\u53ef\u4ee5\u63a7\u5236 pause/next/previous/volum+/volume-/forward/backward/capture/rotate\u3002"}),"\n",(0,l.jsx)(n.p,{children:"2.\u64ad\u653e\u8fc7\u7a0b\u89c6\u9891\u65e0\u660e\u663e\u5f02\u5e38\uff0c\u97f3\u89c6\u9891\u59cb\u7ec8\u540c\u6b65\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"5-\u8bbe\u8ba1\u8bf4\u660e",children:"5. \u8bbe\u8ba1\u8bf4\u660e"}),"\n",(0,l.jsx)(n.h3,{id:"51-\u6e90\u7801\u8bf4\u660e",children:"5.1. \u6e90\u7801\u8bf4\u660e"}),"\n",(0,l.jsx)(n.p,{children:"\u672c\u6a21\u5757\u6e90\u7801\u4f4d\u4e8e source/artinchip/aic-mpp/middle_media \u4e0b,\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"aic-mpp\n        |--middle-media\n                |-base\n                |       |-inlcude\n                |       |       |-aic_message.h       //\u5b9a\u4e49\u516c\u5171\u6d88\u606f\u63a5\u53e3\n                |       |       |-aic_parser.h        //\u5b9a\u4e49parser \u63a5\u53e3\n                |       |       |-aic_stream.h        //\u5b9a\u4e49stream\u63a5\u53e3\n                |       |       |-aic_render.h        //\u5b9a\u4e49\u89c6\u9891\u6e32\u67d3\u63a5\u53e3\n                |       |       |-aic_audio_render.h  //\u5b9a\u4e49\u97f3\u9891\u6e32\u67d3\u63a5\u53e3\n                |       |\n                |       |-message    //\u6d88\u606f\u63a5\u53e3\u5177\u4f53\u5b9e\u73b0\n                |       |-parser     //parser\u63a5\u53e3\u5177\u4f53\u5b9e\u73b0\n                |       |-stream     //stream\u63a5\u53e3\u5177\u4f53\u5b9e\u73b0\n                |       |-render     //\u97f3\u89c6\u9891\u6e32\u67d3\u63a5\u53e3\u5177\u4f53\u5b9e\u73b0\n                |\n                |-audio_decoder  //\u97f3\u9891\u8f6f\u4ef6\u89e3\u7801\u5668\uff0c\u65e0\u786c\u4ef6\u97f3\u9891\u89e3\u7801\u5668\u3002\n                |\n                |-openmax        //\u64ad\u653e\u5668\u7ec4\u4ef6\n                |       |-component\n                |       |       |-OMX_AdecComponent.c          //\u97f3\u9891\u89e3\u7801\u7ec4\u4ef6,\u8f93\u5165\u7f16\u7801\u97f3\u9891\u6570\u636e,\u8f93\u51fa\u89e3\u7801\u540e\u7684pcm\u6570\u636e\n                |       |       |-OMX_AudioRenderComponent.c   //\u97f3\u9891\u6e32\u67d3\u7ec4\u4ef6\uff0c\u5c06\u89e3\u7801\u540e\u97f3\u9891\u9001\u5230\u97f3\u9891\u8bbe\u5907\u64ad\u653e\n                |       |       |-OMX_ClockComponent.c         //\u65f6\u949f\u7ec4\u4ef6\uff0c\u4e3a\u97f3\u89c6\u9891\u540c\u6b65\u670d\u52a1\n                |       |       |-OMX_DemuxerComponent.c       //\u89e3\u5c01\u88c5\u7ec4\u4ef6,\u8bc6\u522b\u6587\u4ef6\u7684\u5c01\u88c5\u683c\u5f0f,\u4ece\u6587\u4ef6\u4e2d\u89e3\u6790\u51fa\u97f3\u89c6\u9891packet\n                |       |       |-OMX_VdecComponent.c          //\u89c6\u9891\u89e3\u7801\u7ec4\u4ef6\uff0c\u8f93\u5165\u7f16\u7801\u89c6\u9891\u6570\u636e\uff0c\u8f93\u51fa\u89e3\u7801\u540e\u7684\u89c6\u9891\u56fe\u50cf\n                |       |       |-OMX_VideoRenderComponent.c   //\u89c6\u9891\u6e32\u67d3\u7ec4\u4ef6\uff0c\u5c06\u89e3\u7801\u540e\u56fe\u50cf\u663e\u793a\u5728\u5c4f\u5e55\u4e0a\n                |       |\n                |       |-inlcude\n                |               |-*.h  //openmax\u5934\u6587\u4ef6\n                |\n                |-player\n                        |-inlcude\n                        |       |-aic_player.h  //palyer\u63a5\u53e3\u5b9a\u4e49\n                        |\n                        |aic_player.c      //player\u63a5\u53e3\u5b9e\u73b0\n"})}),"\n",(0,l.jsx)(n.h3,{id:"52-\u6a21\u5757\u67b6\u6784",children:"5.2. \u6a21\u5757\u67b6\u6784"}),"\n",(0,l.jsx)(n.p,{children:"player \u5728\u7cfb\u7edf\u67b6\u6784\u4e2d\u7684\u5c42\u6b21\u5982\u4e0b\u56fe"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://photos.100ask.net/artinchip-docs/d213-devkit/player_system1-17067501267581.png",alt:"../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/player_system1.png"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["player \u662f\u4e2d\u95f4\u4ef6\uff0c\u5411 App \u63d0\u4f9b player \u63a5\u53e3","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"player \u89c6\u9891\u89e3\u7801\u8c03\u7528 mpp_decoder"}),"\n",(0,l.jsx)(n.li,{children:"player \u97f3\u9891\u89e3\u7801\u8c03\u7528 audio_decoder"}),"\n",(0,l.jsx)(n.li,{children:"player \u89c6\u9891\u6e32\u67d3\u64cd\u4f5c DE \u63d0\u4f9b\u7ed9\u7528\u6237\u7a7a\u95f4\u7684 \u201c/dev/fb0\u201d"}),"\n",(0,l.jsx)(n.li,{children:"player \u97f3\u9891\u6e32\u67d3\u5bf9\u63a5 alsa \u63a5\u53e3"}),"\n",(0,l.jsx)(n.li,{children:"player \u5185\u90e8\u5b9e\u73b0\u89e3\u5c01\u88c5\u7684\u529f\u80fd"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["audio_decoder(\u97f3\u9891\u89e3\u7801\u5668)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"audio_decoder \u662f\u7eaf\u8f6f\u4ef6\u89e3\u7801\uff0c\u76ee\u524d\u79fb\u690d\u4e86\u7b2c\u4e09\u65b9\u7684 libmad \u548c faad \uff0c\u652f\u6301 MP3 \u548c AAC \u89e3\u7801\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"player \u6a21\u5757\u67b6\u6784\u5982\u4e0b\u56fe,\u5206\u4e3a3\u5c42"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7b2c1\u5c42,player interface ,\u5411\u4e0a\u63d0\u4f9b player \u63a5\u53e3,\u5411\u4e0b\u8c03\u7528 OpenMAX \u7ec4\u4ef6\u5b9e\u73b0 player \u529f\u80fd\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u7b2c2\u5c42,OpenMAX Component,\u63d0\u4f9b\u7edf\u4e00\u7684\u7ec4\u4ef6\u64cd\u4f5c\u63a5\u53e3\u3002\u6bcf\u4e2a\u7ec4\u4ef6\u5b8c\u6210\u7279\u5b9a\u7684\u529f\u80fd,\u6bd4\u5982\u89c6\u9891\u89e3\u7801,\u89c6\u9891\u6e32\u67d3\u7b49\u3002"}),"\n",(0,l.jsxs)(n.li,{children:["\u7b2c3\u5c42,Base\uff0c\u63d0\u4f9b parser\uff0cstream\uff0cmessage\uff0crender \u63a5\u53e3\u548c\u5b9e\u73b0\u3002","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"parser \u63d0\u4f9b\u89e3\u5c01\u88c5\u7684\u529f\u80fd\uff0c\u6bd4\u5982MP4\u5c01\u88c5"}),"\n",(0,l.jsx)(n.li,{children:"stream \u63d0\u4f9b\u89e3\u6790\u6d41\u534f\u8bae\u7684\u529f\u80fd\uff0c\u672c\u5730\u6587\u4ef6\u4e5f\u770b\u4f5c\u662f\u4e00\u79cd\u6d41\u534f\u8bae\uff0c\u76ee\u524d\u4e5f\u53ea\u652f\u6301\u672c\u5730\u6587\u4ef6"}),"\n",(0,l.jsx)(n.li,{children:"message \u4e3a\u7ec4\u4ef6\u4f20\u9012\u6d88\u606f\u63d0\u4f9b\u652f\u6301"}),"\n",(0,l.jsx)(n.li,{children:"render \u63d0\u4f9b\u5e95\u5c42\u97f3\u89c6\u9891\u6e32\u67d3\u7684\u529f\u80fd"}),"\n",(0,l.jsx)(n.li,{children:"\u76ee\u524d\u652f\u6301 MP4 \u548c MP3 \u5c01\u88c5\u7684\u672c\u5730\u6587\u4ef6\uff0c\u540e\u7eed\u6269\u5c55\u5176\u4ed6\u6d41\u534f\u8bae\u548c\u5c01\u88c5\u683c\u5f0f\uff0c\u901a\u8fc7\u589e\u52a0\u76f8\u5e94\u7684 parser \u548c stream \u5b9e\u73b0"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://photos.100ask.net/artinchip-docs/d213-devkit/player_framework1-17067501355553.png",alt:"../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/player_framework1.png"})}),"\n",(0,l.jsx)(n.h3,{id:"53-player-interface-\u7684\u8bbe\u8ba1",children:"5.3. player interface \u7684\u8bbe\u8ba1"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\u8fd9\u4e00\u5c42\u662f\u5bf9\u5916\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u7528\u6237\u53ea\u4e0e\u8fd9\u4e00\u5c42\u4ea4\u4e92\u5373\u53ef\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"531-\u72b6\u6001\u673a\u8bbe\u8ba1",children:"5.3.1. \u72b6\u6001\u673a\u8bbe\u8ba1"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"player interface \u57fa\u4e8e\u72b6\u6001\u673a\u8bbe\u8ba1,\u72b6\u6001\u8f6c\u6362\u5982\u56fe"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://photos.100ask.net/artinchip-docs/d213-devkit/player_state_machine1-17067501426685.png",alt:"../../../_https://photos.100ask.net/artinchip-docs/d213-devkit/player_state_machine1.png"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u72b6\u6001\u673a\u8bf4\u660e:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"IDLE"}),"\n",(0,l.jsx)(n.p,{children:"\u95f2\u7f6e\u72b6\u6001,\u521a\u521b\u5efa\u5b8c player \u5904\u4e8e\u6b64\u72b6\u6001,\u6b64\u72b6\u6001\u53ea\u80fd\u901a\u8fc7 aic_player_set_uri \u8f6c\u6362\u4e3a INITIALIZED"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"INITIALIZED"}),"\n",(0,l.jsx)(n.p,{children:"\u521d\u59cb\u5316\u5b8c\u6210\u72b6\u6001,\u548c IDLE \u72b6\u6001\u76f8\u6bd4,\u4ec5\u4ec5\u662f\u591a\u4e86\u5a92\u4f53\u6570\u636e\u6e90\u7684\u4fe1\u606f"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"PREPARING"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 INITIALIZED \u72b6\u6001\u8c03\u7528\u5f02\u6b65 aic_player_prepare_async \u5230\u8fbe\u6b64\u72b6\u6001,\u8fd9\u4e00\u72b6\u6001\u4e3b\u8981\u662f\u6253\u5f00\u5a92\u4f53\u6587\u4ef6\u5e76\u89e3\u6790\u5b83,\u89e3\u6790\u6210\u529f\u4e4b\u540e,\u81ea\u52a8\u8f6c\u6362\u4e3a PREPARED \u72b6\u6001,\u901a\u8fc7\u4e8b\u4ef6 AIC_PLAYER_EVENT_DEMUXER_FORMAT_DETECTED \u544a\u77e5 app"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"PREPARED"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 INITIALIZED \u72b6\u6001\u8c03\u7528\u540c\u6b65 aic_player_prepare_sync \u5230\u8fbe\u6b64\u72b6\u6001,\u8fd9\u4e00\u72b6\u6001\u4e3b\u8981\u662f\u6253\u5f00\u5a92\u4f53\u6587\u4ef6\u5e76\u89e3\u6790\u5b83,\u89e3\u6790\u5b8c\u6210\u540e\u8f6c\u6362\u5230 PREPARED \u72b6\u6001"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"STARTED"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 PREPARED \u72b6\u6001\u8c03\u7528 aic_player_start \u5230\u8fbe\u6b64\u72b6\u6001,\u8fd9\u4e00\u72b6\u6001\u4e3b\u8981\u662f\u6839\u636e\u89e3\u6790\u51fa\u7684\u6587\u4ef6\u521b\u5efa\u97f3\u89c6\u9891\u89e3\u7801\u7ebf\u7a0b\u548c\u97f3\u89c6\u9891\u663e\u793a\u7ebf\u7a0b,\u53ef\u4ee5\u968f\u65f6\u8fdb\u884c\u64ad\u653e\u4e86"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"PLAYING"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 STARTED \u6216 PAUSED \u72b6\u6001\u8c03\u7528 aic_player_play \u5230\u8fbe\u6b64\u72b6\u6001,\u5f00\u59cb\u64ad\u653e\u5a92\u4f53"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"PAUSED"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 PLAYING \u72b6\u6001\u8c03\u7528 aic_player_pause \u5230\u8fbe\u6b64\u72b6\u6001,\u6682\u505c\u64ad\u653e\u5a92\u4f53"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"COMPLETED"}),"\n",(0,l.jsx)(n.p,{children:"\u5a92\u4f53\u64ad\u653e\u5b8c\u6bd5\u540e,\u81ea\u52a8\u8f6c\u6362\u4e3a COMPLETED \u72b6\u6001,\u5e76\u4ee5\u4e8b\u4ef6 AIC_PLAYER_EVENT_PLAY_END \u544a\u77e5app"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"STOPPED"}),"\n",(0,l.jsx)(n.p,{children:"\u65e0\u8bba\u5904\u4e8e\u4efb\u4f55\u72b6\u6001\u90fd\u53ef\u4ee5\u8c03\u7528 aic_player_stop \u56de\u5230 STOPPED \u72b6\u6001\u3002\u5207\u6362\u6587\u4ef6\u65f6\uff0c\u65e0\u8bba\u662f\u5426\u64ad\u653e\u7ed3\u675f\uff0c\u8981\u5148\u8c03\u7528 aic_player_stop \u505c\u6b62\u5f53\u524d\u6587\u4ef6\u7684\u64ad\u653e\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"END"}),"\n",(0,l.jsx)(n.p,{children:"\u8fd9\u91cc END \u8868\u793a\u91ca\u653e\u6389\u64ad\u653e\u5668\u6240\u6709\u7684\u8d44\u6e90\uff0c\u4e0d\u662f\u64ad\u653e\u5668\u7684\u5185\u90e8\u72b6\u6001\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"532-\u6570\u636e\u7ed3\u6784\u8bbe\u8ba1",children:"5.3.2. \u6570\u636e\u7ed3\u6784\u8bbe\u8ba1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"// \u4e8b\u4ef6\u56de\u8c03\u51fd\u6570\ntypedef s32 (*event_handler)(void* app_data,s32 event,s32 data1,s32 data2);\n\n// \u4e8b\u4ef6\nenum aic_player_event {\n        AIC_PLAYER_EVENT_PLAY_END = 0,  // \u6587\u4ef6\u64ad\u653e\u7ed3\u675f\n        AIC_PLAYER_EVENT_PLAY_TIME,             //\u64ad\u653e\u65f6\u523b,pts = data1<<32|data2\n        AIC_PLAYER_EVENT_DEMUXER_FORMAT_DETECTED,//\u6587\u4ef6\u89e3\u6790\u6210\u529f\n        AIC_PLAYER_EVENT_DEMUXER_FORMAT_NOT_DETECTED//\u6587\u4ef6\u89e3\u6790\u5931\u8d25\n};\n\n//\u6293\u62cd\u7ed3\u6784\u4f53\u4fe1\u606f\n// now do not support  setting  nWidth and  nHeight,just only support setting pFilePath\nstruct aic_capture_info {\n        s8 *pFilePath;\n        s32 nWidth;\n        s32 nHeight;\n};\n\nstruct aic_video_stream {\n        s32   width;\n        s32   height;\n};\n\nstruct aic_audio_stream {\n        s32 nb_channel;\n        s32 bits_per_sample;\n        s32 sample_rate;\n};\n// \u5a92\u4f53\u4fe1\u606f\nstruct av_media_info {\n        s64  file_size;\n        s64  duration;\n        u8   has_video;\n        u8   has_audio;\n        u8   seek_able;\n        struct aic_video_stream video_stream;\n        struct aic_audio_stream audio_stream;\n};\n"})}),"\n",(0,l.jsx)(n.h4,{id:"533-\u63a5\u53e3\u8bbe\u8ba1",children:"5.3.3. \u63a5\u53e3\u8bbe\u8ba1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"struct aic_player *aic_player_create(char *uri);\n\ns32 aic_player_destroy(struct aic_player *player);\n\ns32 aic_player_set_uri(struct aic_player *player,char *uri);\n\n// \u5f02\u6b65\u89e3\u6790\u5a92\u4f53\u6587\u4ef6\ns32 aic_player_prepare_async(struct aic_player *player);\n\n// \u540c\u6b65\u89e3\u6790\u5a92\u4f53\u6587\u4ef6\uff0c\u5a92\u4f53\u6587\u4ef6\u6bd4\u8f83\u5927\u65f6\uff0c\u89e3\u6790\u6587\u4ef6\u6bd4\u8f83\u8017\u65f6\uff0c\u7a0b\u5e8f\u4f1a\u4e00\u76f4\u963b\u585e\u5728\u8fd9\u4e2a\u51fd\u6570\u4e2d\uff0c\u6240\u4ee5\u63d0\u4f9b\u4e86\u4e0a\u9762\u7684\u5f02\u6b65\u63a5\u53e3\uff0c\n// \u5f02\u6b65\u63a5\u53e3\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u53bb\u89e3\u6790\u6587\u4ef6\uff0c\u6240\u4ee5\u5f02\u6b65\u63a5\u53e3\u4f1a\u7acb\u523b\u8fd4\u56de\uff0c\u4f46\u662f\u6587\u4ef6\u5e76\u6ca1\u6709\u89e3\u6790\u5b8c\u3002\u65e0\u8bba\u89e3\u6790\u6210\u529f\u8fd8\u662f\u5931\u8d25\uff0cplayer\n// \u5185\u90e8\u4f1a\u901a\u8fc7\u4e8b\u4ef6\u56de\u8c03\u51fd\u6570 event_handler \u901a\u77e5 app\u3002\ns32 aic_player_prepare_sync(struct aic_player *player);\n\ns32 aic_player_start(struct aic_player *player);\n\ns32 aic_player_play(struct aic_player *player);\n\ns32 aic_player_pause(struct aic_player *player);\n\ns32 aic_player_stop(struct aic_player *player);\n\ns32 aic_player_get_media_info(struct aic_player *player,struct av_media_info *media_info);\n\ns32 aic_player_set_event_callback(struct aic_player *player,void* app_data,event_handler event_handle );\n\ns32 aic_player_get_screen_size(struct aic_player *player,struct mpp_size *screen_size);\n\ns32 aic_player_set_disp_rect(struct aic_player *player,struct mpp_rect *disp_rect);\n\ns32 aic_player_get_disp_rect(struct aic_player *player,struct mpp_rect *disp_rect);\n\ns32 aic_player_set_mute(struct aic_player *player);\n\ns32 aic_player_set_volum(struct aic_player *player,s32 vol);\n\ns32 aic_player_get_volum(struct aic_player *player,s32 *vol);\n\ns64 aic_player_get_play_time(struct aic_player *player);\n\ns32 aic_player_seek(struct aic_player *player, u64 seek_time);\n\ns32 aic_player_capture(struct aic_player *player, struct aic_capture_info *capture_info);\n\n//rotation_angle \u53ef\u4ee5\u53d6\u7684\u503c MPP_ROTATION_0\uff0cMPP_ROTATION_90\uff0cMPP_ROTATION_180\uff0cMPP_ROTATION_270\ns32 aic_player_set_rotation(struct aic_player *player, int rotation_angle);\n\ns32 aic_player_get_rotation(struct aic_player *player);\n"})}),"\n",(0,l.jsx)(n.h5,{id:"5331-aic_player_create",children:"5.3.3.1. aic_player_create"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"struct aic_player *aic_player_create(char *uri)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u521b\u5efa player \u5bf9\u8c61"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"uri\uff1a\u5a92\u4f53\u6587\u4ef6\u8def\u5f84"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"palyer \u5bf9\u8c61"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"5332-aic_player_destroy",children:"5.3.3.2. aic_player_destroy"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_destroy(struct aic_player *player)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u9500\u6bc1 player \u5bf9\u8c61"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 IDLE \u548c STOPPED \u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"5333-aic_player_set_uri",children:"5.3.3.3. aic_player_set_uri"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_set_uri(struct aic_player *player,char *uri)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u8bbe\u7f6e\u5a92\u4f53\u6587\u4ef6\u8def\u5f84"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61\uff0curi\uff1a\u5a92\u4f53\u6587\u4ef6\u8def\u5f84"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 IDLE \u548c STOPPED \u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"5334-aic_player_prepare_async",children:"5.3.3.4. aic_player_prepare_async"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_prepare_async(struct aic_player *player)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u5f02\u6b65\u89e3\u6790\u5a92\u4f53\u6587\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u89e3\u6790\u547d\u4ee4\u53d1\u9001\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 INITIALIZED \u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"5335-aic_player_prepare_sync",children:"5.3.3.5. aic_player_prepare_sync"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_prepare_sync(struct aic_player *player)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u540c\u6b65\u89e3\u6790\u5a92\u4f53\u6587\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u89e3\u6790\u6587\u4ef6\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 INITIALIZED \u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"5336-aic_player_start",children:"5.3.3.6. aic_player_start"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_start(struct aic_player *player)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u542f\u52a8\u64ad\u653e\u5668\uff0c\u521b\u5efa\u97f3\u89c6\u9891\u89e3\u7801\u7ebf\u7a0b\u548c\u97f3\u89c6\u9891\u6e32\u67d3\u7ebf\u7a0b"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 PREPARED \u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"5337-aic_player_play",children:"5.3.3.7. aic_player_play"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_play(struct aic_player *player)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u64ad\u653e\u5a92\u4f53\u6587\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 STARETED \u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"5338-aic_player_pause",children:"5.3.3.8. aic_player_pause"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_pause(struct aic_player *player)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u6682\u505c\u64ad\u653e\u5a92\u4f53\u6587\u4ef6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 PLAYING \u548c PAUSED \u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"5339-aic_player_stop",children:"5.3.3.9. aic_player_stop"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_stop(struct aic_player *player)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u505c\u6b62\u64ad\u653e\uff0c\u91ca\u653e\u97f3\u89c6\u9891\u89e3\u7801\u7ebf\u7a0b\u548c\u97f3\u89c6\u9891\u663e\u793a\u7ebf\u7a0b"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u4efb\u610f\u72b6\u6001\u53ef\u4ee5\u8c03\u7528\u8be5\u51fd\u6570\u6765\u505c\u6b62\u64ad\u653e\u5668\u3002\u5207\u6362\u6587\u4ef6\u65f6\u4e00\u5b9a\u8981\u8c03\u7528aic_player_stop\u3002"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"53310-aic_player_get_media_info",children:"5.3.3.10. aic_player_get_media_info"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_get_media_info(struct aic_player *player, struct av_media_info *media_info)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u83b7\u53d6\u5a92\u4f53\u4fe1\u606f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61\uff0cmedia_info\uff1a\u5a92\u4f53\u4fe1\u606f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 PREPARED \u548c COMPLETED \u533a\u95f4\u7684\u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"53311-aic_player_set_event_callback",children:"5.3.3.11. aic_player_set_event_callback"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_set_event_callback(struct aic_player *player, event_handler event_handle)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u83b7\u53d6\u5a92\u4f53\u4fe1\u606f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61\uff0cevent_handle\uff1a\u76d1\u542c\u4e8b\u4ef6\u51fd\u6570"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u4e00\u5b9a\u8981\u6ce8\u518c\uff0c\u64ad\u653e\u7ed3\u675f\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u901a\u77e5"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"53312-aic_player_get_screen_size",children:"5.3.3.12. aic_player_get_screen_size"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_get_screen_size(struct aic_player *player, struct mpp_size *screen_size)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u83b7\u53d6\u5c4f\u5e55\u5927\u5c0f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61\uff0cscreen_size\uff1a\u5c4f\u5e55\u5927\u5c0f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 STARETED \u548c COMPLETED \u533a\u95f4\u7684\u72b6\u6001\u5747\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"53313-aic_player_set_disp_rect",children:"5.3.3.13. aic_player_set_disp_rect"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_set_disp_rect(struct aic_player *player, struct mpp_rect *disp_rect)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u8bbe\u7f6e\u663e\u793a\u533a\u57df"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61\uff0cdisp_rect\uff1a\u663e\u793a\u533a\u57df"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 STARETED \u548c COMPLETED \u533a\u95f4\u7684\u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"53314-aic_player_get_disp_rect",children:"5.3.3.14. aic_player_get_disp_rect"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_get_disp_rect(struct aic_player *player, struct mpp_rect *disp_rect)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u8bbe\u7f6e\u663e\u793a\u533a\u57df"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61\uff0cdisp_rect\uff1a\u663e\u793a\u533a\u57df"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 STARETED \u548c COMPLETED \u533a\u95f4\u7684\u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"53315-aic_player_set_mute",children:"5.3.3.15. aic_player_set_mute"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_set_mute(struct aic_player *player)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u9759\u97f3\u5207\u6362"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 STARETED \u548c COMPLETED \u533a\u95f4\u7684\u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"53316-aic_player_set_volum",children:"5.3.3.16. aic_player_set_volum"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_set_volum(struct aic_player *player,s32 vol)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u8bbe\u7f6e\u97f3\u91cf"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61\uff0cvol\uff1a\u97f3\u91cf"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 STARETED \u548c COMPLETED \u533a\u95f4\u7684\u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"53317-aic_player_get_volum",children:"5.3.3.17. aic_player_get_volum"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_get_volum(struct aic_player *player,s32 *vol)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u83b7\u53d6\u97f3\u91cf"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61\uff0cvol\uff1a\u97f3\u91cf"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 STARETED \u548c COMPLETED \u533a\u95f4\u7684\u72b6\u6001\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"53318-aic_player_get_play_time",children:"5.3.3.18. aic_player_get_play_time"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"| \u51fd\u6570\u539f\u578b | s64 aic_player_get_play_time(struct aic_player *player) |\n| -------- | ------------------------------------------------------- |\n| \u529f\u80fd\u8bf4\u660e | \u83b7\u53d6\u64ad\u653e\u65f6\u95f4                                            |\n| \u53c2\u6570\u5b9a\u4e49 | player\uff1aplayer \u5bf9\u8c61                                     |\n| \u8fd4\u56de\u503c   | >=0\uff1a\u64ad\u653e\u65f6\u95f4\uff0c<0\uff1a\u83b7\u53d6\u64ad\u653e\u65f6\u95f4\u7684\u72b6\u6001\u4e0d\u5bf9               |\n| \u6ce8\u610f\u4e8b\u9879 | \u5728 STARETED \u548c COMPLETED \u533a\u95f4\u7684\u72b6\u6001\u8d77\u4f5c\u7528               |\n"})}),"\n",(0,l.jsx)(n.h5,{id:"53319-aic_player_seek",children:"5.3.3.19. aic_player_seek"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_seek(struct aic_player *player, u64 seek_time)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u8df3\u8f6c\u6307\u5b9a\u65f6\u95f4\u70b9"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61\uff0cseek_time\uff1a\u8df3\u8f6c\u7684\u65f6\u95f4\u70b9"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 IDLE/INITIALIZED/PREPARING \u72b6\u6001\u4e0b\u8bbe\u7f6e\u4e0d\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"53320-aic_player_capture",children:"5.3.3.20. aic_player_capture"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_capture(struct aic_player *player, struct aic_capture_info *capture_info)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u8df3\u8f6c\u6307\u5b9a\u65f6\u95f4\u70b9"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61\uff0ccapture_info\uff1a\u6293\u62cd\u4fe1\u606f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u53ea\u6709\u5728 PAUSED \u72b6\u6001\u4e0b\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"53321-aic_player_set_rotation",children:"5.3.3.21. aic_player_set_rotation"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u51fd\u6570\u539f\u578b"}),(0,l.jsx)(n.th,{children:"s32 aic_player_set_rotation(struct aic_player *player, int rotation_angle)"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u529f\u80fd\u8bf4\u660e"}),(0,l.jsx)(n.td,{children:"\u8bbe\u7f6e\u89c6\u9891\u65cb\u8f6c\u89d2\u5ea6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53c2\u6570\u5b9a\u4e49"}),(0,l.jsx)(n.td,{children:"player\uff1aplayer \u5bf9\u8c61\uff0crotation_angle\uff1a\u65cb\u8f6c\u89d2\u5ea6rotation_angle \u53ef\u53d6\u503c MPP_ROTATION_0\uff0cMPP_ROTATION_90\uff0cMPP_ROTATION_180\uff0cMPP_ROTATION_270"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8fd4\u56de\u503c"}),(0,l.jsx)(n.td,{children:"0\uff1a\u6210\u529f\uff0c\u5176\u4ed6\uff1a\u5931\u8d25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6ce8\u610f\u4e8b\u9879"}),(0,l.jsx)(n.td,{children:"\u5728 STARTED/PLAYING/PAUSED/COMPLETED \u72b6\u6001\u4e0b\u8bbe\u7f6e\u8d77\u4f5c\u7528"})]})]})]}),"\n",(0,l.jsx)(n.h5,{id:"53322-aic_player_get_rotation",children:"5.3.3.22. aic_player_get_rotation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"| \u51fd\u6570\u539f\u578b | s32 aic_player_get_rotation(struct aic_player *player) |\n| -------- | ------------------------------------------------------ |\n| \u529f\u80fd\u8bf4\u660e | \u83b7\u53d6\u89c6\u9891\u65cb\u8f6c\u89d2\u5ea6                                       |\n| \u53c2\u6570\u5b9a\u4e49 | player\uff1aplayer \u5bf9\u8c61                                    |\n| \u8fd4\u56de\u503c   | >=0\uff1a\u65cb\u8f6c\u89d2\u5ea6\uff0c<0\uff1a\u83b7\u53d6\u5931\u8d25                            |\n| \u6ce8\u610f\u4e8b\u9879 | \u5728 STARTED/PLAYING/PAUSED/COMPLETED \u72b6\u6001\u4e0b\u53ef\u4ee5\u83b7\u53d6     |\n"})}),"\n",(0,l.jsx)(n.h4,{id:"534-app-demo",children:"5.3.4. APP Demo"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'#include <string.h>\n#include <malloc.h>\n#include <stddef.h>\n#include <stdlib.h>\n#include <stdlib.h>\n#include <stdio.h>\n#include <fcntl.h>\n#include <unistd.h>\n#include <sys/types.h>\n#include <signal.h>\n#include <dirent.h>\n#include <inttypes.h>\n\n#define LOG_DEBUG\n\n#include "mpp_dec_type.h"\n#include "mpp_list.h"\n#include "mpp_log.h"\n#include "mpp_mem.h"\n#include "aic_message.h"\n#include "aic_player.h"\n\n#define PLAYER_DEMO_FILE_MAX_NUM 128\n#define PLAYER_DEMO_FILE_PATH_MAX_LEN 256\n#define BUFFER_LEN 32\n\nstatic int g_player_end = 0;\nstatic int g_demuxer_detected_flag = 0;\nstatic int g_sync_flag = AIC_PLAYER_PREPARE_SYNC;\nstatic struct av_media_info g_media_info;\nstruct file_list {\n        char file_path[PLAYER_DEMO_FILE_MAX_NUM][PLAYER_DEMO_FILE_PATH_MAX_LEN];\n        int file_num;\n};\n\nstatic void print_help(const char* prog)\n{\n        printf("name: %s\\n", prog);\n        printf("Compile time: %s\\n", __TIME__);\n        printf("Usage: player_demo [options]:\\n"\n                "\\t-i                             input stream file name\\n"\n                "\\t-t                             directory of test files\\n"\n                "\\t-l                             loop time\\n"\n                "\\t-c                             save capture file path,default /mnt/video/capture.jpg \\n"\n                "\\t-W                             capture widht\\n"\n                "\\t-H                             capture height\\n"\n                "\\t-h                             help\\n\\n"\n                "Example1(test single file for 1 time): player_demo -i /mnt/video/test.mp4 \\n"\n                "Example2(test single file for 3 times): player_demo -i /mnt/video/test.mp4 -l 3 \\n"\n                "Example3(test some files for 1 time ) : player_demo -t /mnt/video \\n"\n                "Example4(test some file for 3 times ): player_demo -i /mnt/video -l 3 \\n"\n                "---------------------------------------------------------------------------------------\\n"\n                "-------------------------------control key while playing-------------------------------\\n"\n                "---------------------------------------------------------------------------------------\\n"\n                "(\'d\' + Enter): play next \\n"\n                "(\'u\' + Enter): play previous \\n"\n                "(\'p\' + Enter): pause/play \\n"\n                "(\'+\' + Enter): volum+5 \\n"\n                "(\'-\' + Enter): volum-5 \\n"\n                "(\'m\' + Enter): enter/eixt mute \\n"\n                "(\'c\' + Enter): capture pic,firstly,please pause and then capture \\n"\n                "(\'f\' + Enter): seek+8s \\n"\n                "(\'b\' + Enter): seek-8s \\n"\n                "(\'z\' + Enter): seek to the start of the file \\n"\n                "(\'r\' + Enter): rotate \\n");\n}\n\nstatic int read_dir(char* path, struct file_list *files)\n{\n        char* ptr = NULL;\n        struct dirent* dir_file;\n        DIR* dir = opendir(path);\n        if (dir == NULL) {\n                loge("read dir failed");\n                return -1;\n        }\n\n        while((dir_file = readdir(dir))) {\n                if (strcmp(dir_file->d_name, ".") == 0 || strcmp(dir_file->d_name, "..") == 0)\n                        continue;\n\n                ptr = strrchr(dir_file->d_name, \'.\');\n                if (ptr == NULL)\n                        continue;\n\n                if (strcmp(ptr, ".h264") && strcmp(ptr, ".264") && strcmp(ptr, ".mp4") )\n                        continue;\n\n                logd("name: %s", dir_file->d_name);\n                strcpy(files->file_path[files->file_num], path);\n                strcat(files->file_path[files->file_num], "/");\n                strcat(files->file_path[files->file_num], dir_file->d_name);\n                logd("i: %d, filename: %s", files->file_num, files->file_path[files->file_num]);\n                files->file_num ++;\n\n                if (files->file_num >= PLAYER_DEMO_FILE_MAX_NUM)\n                        break;\n        }\n        return 0;\n}\n\ns32 event_handle( void* app_data,s32 event,s32 data1,s32 data2)\n{\n        int ret = 0;\n        switch(event) {\n                case AIC_PLAYER_EVENT_PLAY_END:\n                        g_player_end = 1;\n                        logd("g_player_end\\n");\n                        break;\n                case AIC_PLAYER_EVENT_PLAY_TIME:\n                        break;\n                case AIC_PLAYER_EVENT_DEMUXER_FORMAT_DETECTED:\n                        if (AIC_PLAYER_PREPARE_ASYNC == g_sync_flag) {\n                                g_demuxer_detected_flag = 1;\n                                logd("AIC_PLAYER_EVENT_DEMUXER_FORMAT_DETECTED\\n");\n                        }\n                        break;\n\n                case AIC_PLAYER_EVENT_DEMUXER_FORMAT_NOT_DETECTED:\n                        if (AIC_PLAYER_PREPARE_ASYNC == g_sync_flag) {\n                                logd("AIC_PLAYER_EVENT_DEMUXER_FORMAT_NOT_DETECTED\\n");\n                                logd("cur file format not detected,play next file!!!!!!\\n");\n                                g_player_end = 1;\n                        }\n\n                        break;\n                default:\n                        break;\n        }\n        return ret;\n}\n\nstatic int set_volume(struct aic_player *player,int volume)\n{\n        if (volume < 0) {\n                volume = 0;\n        }\n        else if (volume < 101) {\n\n        }\n        else {\n                volume = 100;\n        }\n        logd("volume:%d\\n",volume);\n        return aic_player_set_volum(player,volume);\n}\n\nstatic int do_seek(struct aic_player *player,int forward)\n{\n        s64 pos;\n        pos = aic_player_get_play_time(player);\n        if (pos == -1) {\n                loge("aic_player_get_play_time error!!!!\\n");\n                return -1;\n        }\n        if (forward == 1) {\n                pos += 8*1000*1000;//+8s\n        } else {\n                pos -= 8*1000*1000;//-8s\n        }\n\n        if (pos < 0) {\n                pos = 0;\n        } else if (pos < g_media_info.duration) {\n\n        } else {\n                pos = g_media_info.duration;\n        }\n\n        if (aic_player_seek(player,pos) != 0) {\n                loge("aic_player_seek error!!!!\\n");\n                return -1;\n        }\n        logd("aic_player_seek ok\\n");\n        return 0;\n}\n\nstatic int do_rotation(struct aic_player *player)\n{\n        static int index = 0;\n        int rotation = MPP_ROTATION_0;\n\n        if (index % 4 == 0) {\n                rotation = MPP_ROTATION_90;\n                logd("*********MPP_ROTATION_90***************\\n");\n        } else if(index % 4 == 1) {\n                rotation = MPP_ROTATION_180;\n                logd("*********MPP_ROTATION_180***************\\n");\n        } else if(index % 4 == 2) {\n                rotation = MPP_ROTATION_270;\n                logd("*********MPP_ROTATION_270***************\\n");\n        } else if(index % 4 == 3) {\n                rotation = MPP_ROTATION_0;\n                logd("*********MPP_ROTATION_0***************\\n");\n        }\n        aic_player_set_rotation(player,rotation);\n        index++;\n        return 0;\n}\n\nstatic int start_play(struct aic_player *player,int volume)\n{\n        int ret = -1;\n        static struct av_media_info media_info;\n        struct mpp_size screen_size;\n        struct mpp_rect disp_rect;\n\n        ret = aic_player_start(player);\n        if (ret != 0) {\n                loge("aic_player_start error!!!!\\n");\n                return -1;\n        }\n        logd("aic_player_start ok\\n");\n\n        ret =  aic_player_get_media_info(player,&media_info);\n        if (ret != 0) {\n                loge("aic_player_get_media_info error!!!!\\n");\n                return -1;\n        }\n        g_media_info = media_info;\n        logd("aic_player_get_media_info duration:%"PRId64",file_size:%"PRId64"\\n",media_info.duration,media_info.file_size);\n\n        logd("has_audio:%d,has_video:%d,"\n                "width:%d,height:%d,\\n"\n                "bits_per_sample:%d,nb_channel:%d,sample_rate:%d\\n"\n                ,media_info.has_audio\n                ,media_info.has_video\n                ,media_info.video_stream.width\n                ,media_info.video_stream.height\n                ,media_info.audio_stream.bits_per_sample\n                ,media_info.audio_stream.nb_channel\n                ,media_info.audio_stream.sample_rate);\n\n        if (media_info.has_video) {\n                ret = aic_player_get_screen_size(player, &screen_size);\n                if (ret != 0) {\n                        loge("aic_player_get_screen_size error!!!!\\n");\n                        return -1;\n                }\n                logd("screen_width:%d,screen_height:%d\\n",screen_size.width,screen_size.height);\n                disp_rect.x = 324;\n                disp_rect.y = 50;\n                disp_rect.width = 600;\n                disp_rect.height = 500;\n                ret = aic_player_set_disp_rect(player, &disp_rect);//attention:disp not exceed screen_size\n                if (ret != 0) {\n                        loge("aic_player_set_disp_rect error\\n");\n                        return -1;\n                }\n                logd("aic_player_set_disp_rect  ok\\n");\n        }\n\n        if (media_info.has_audio) {\n                ret = set_volume(player,volume);\n                if (ret != 0) {\n                        loge("set_volume error!!!!\\n");\n                        return -1;\n                }\n        }\n\n        ret = aic_player_play(player);\n        if (ret != 0) {\n                loge("aic_player_play error!!!!\\n");\n                return -1;\n        }\n        logd("aic_player_play ok\\n");\n\n        return 0;\n}\n\nint main(int argc,char*argv[])\n{\n        int ret = 0;\n        int i = 0;\n        int j = 0;\n        char buffer[BUFFER_LEN];\n        int flag;\n        int opt;\n        int loop_time = 1;\n        struct file_list  files;\n        struct aic_player *player = NULL;\n        int volume = 50;\n        struct aic_capture_info   capture_info;\n        char file_path[255] = {"/mnt/video/capture.jpg"} ;\n\n        //default capture_info\n        capture_info.file_path = (s8 *)file_path;\n        capture_info.width = 1024;\n        capture_info.height = 600;\n        capture_info.quality = 90;\n        memset(&files,0x00,sizeof(struct file_list));\n        while (1) {\n                opt = getopt(argc, argv, "i:t:l:c:W:H:q:h");\n                if (opt == -1) {\n                        break;\n                }\n                switch (opt) {\n                case \'i\':\n                        strcpy(files.file_path[0], optarg);\n                        files.file_num = 1;\n                        logd("file path: %s", files.file_path[0]);\n                        break;\n                case \'l\':\n                        loop_time = atoi(optarg);\n                        break;\n                case \'t\':\n                        read_dir(optarg, &files);\n                        break;\n                case \'c\':\n                        memset(file_path,0x00,sizeof(file_path));\n                        strncpy(file_path, optarg,sizeof(file_path)-1);\n                        logd("file path: %s", file_path);\n                        break;\n                case \'W\':\n                        capture_info.width = atoi(optarg);\n                        break;\n                case \'H\':\n                        capture_info.height = atoi(optarg);\n                        break;\n                case \'q\':\n                        capture_info.quality = atoi(optarg);\n                        break;\n                case \'h\':\n                        print_help(argv[0]);\n                        break;\n                default:\n                        break;\n                }\n        }\n\n        if (files.file_num == 0) {\n                print_help(argv[0]);\n                return -1;\n        }\n\n        player = aic_player_create(NULL);\n        if (player == NULL) {\n                loge("aic_player_create fail!!!\\n");\n                return -1;\n        }\n\n        aic_player_set_event_callback(player,player,event_handle);\n        g_sync_flag = AIC_PLAYER_PREPARE_SYNC;\n        flag = fcntl(STDIN_FILENO,F_GETFL);\n        flag |= O_NONBLOCK;\n        fcntl(STDIN_FILENO,F_SETFL,flag);\n\n        for(i = 0;i < loop_time; i++) {\n                for(j = 0; j < files.file_num; j++) {\n                        aic_player_set_uri(player,files.file_path[j]);\n                        if (g_sync_flag == AIC_PLAYER_PREPARE_ASYNC) {\n                                ret = aic_player_prepare_async(player);\n                        } else {\n                                ret = aic_player_prepare_sync(player);\n                        }\n                        if (ret) {\n                                loge("aic_player_prepare error!!!!\\n");\n                                g_player_end = 1;\n                                goto _NEXT_FILE_;\n                        }\n\n\n                        if (g_sync_flag == AIC_PLAYER_PREPARE_SYNC) {\n                                if (start_play(player,volume) != 0) {\n                                        g_player_end = 1;\n                                        goto _NEXT_FILE_;\n                                }\n                        }\n\n                        while(1)\n                        {\n        _NEXT_FILE_:\n                                if (g_player_end == 1) {\n                                        logd("play file:%s end!!!!\\n",files.file_path[j]);\n                                        ret = aic_player_stop(player);\n                                        g_player_end = 0;\n                                        break;\n                                }\n\n                                if (g_sync_flag == AIC_PLAYER_PREPARE_ASYNC && g_demuxer_detected_flag == 1) {\n                                        g_demuxer_detected_flag = 0;\n                                        if (start_play(player,volume) != 0) {\n                                                g_player_end = 1;\n                                                goto _NEXT_FILE_;\n                                        }\n                                }\n\n                                if (read(STDIN_FILENO, buffer, BUFFER_LEN) > 0) {\n                                        if (buffer[0] == 0x20) {// pause\n                                                logd("*********enter pause ***************\\n");\n                                                aic_player_pause(player);\n                                        } else if (buffer[0] == \'d\') {//stop cur, star next\n                                                logd("*********enter down ***************\\n");\n                                                aic_player_stop(player);\n                                                break;\n                                        } else if (buffer[0] == \'u\') {//stop cur, star pre\n                                                logd("*********enter up j:%d***************\\n",j);\n                                                aic_player_stop(player);\n                                                j -= 2;\n                                                j = (j < -1)?(-1):(j);\n                                                break;\n                                        } else if (buffer[0] == \'-\') {\n                                                logd("*********enter volume--**************\\n");\n                                                volume -= 5;\n                                                set_volume(player,volume);\n                                        } else if (buffer[0] == \'+\') {\n                                                logd("*********enter volume++***************\\n");\n                                                volume += 5;\n                                                set_volume(player,volume);\n                                        } else if (buffer[0] == \'m\') {\n                                                logd("*********enter/exit mute***************\\n");\n                                                        aic_player_set_mute(player);\n                                        } else if (buffer[0] == \'c\') {\n                                                logd("*********capture***************\\n");\n                                                if (aic_player_capture(player,&capture_info) == 0) {\n                                                        logd("*********aic_player_capture ok***************\\n");\n                                                } else {\n                                                        loge("*********aic_player_capture fail ***************\\n");\n                                                }\n                                        } else if (buffer[0] == \'f\') {\n                                                logd("*********forward***************\\n");\n                                                do_seek(player,1);//+8s\n                                        } else if (buffer[0] == \'b\') {\n                                                logd("*********back***************\\n");\n                                                do_seek(player,0);//-8s\n                                        } else if (buffer[0] == \'z\') {\n                                                if (aic_player_seek(player,0) != 0) {\n                                                        loge("aic_player_seek error!!!!\\n");\n                                                } else {\n                                                        logd("aic_player_seek ok\\n");\n                                                }\n                                        } else if (buffer[0] == \'r\') {\n                                                do_rotation(player);\n                                        } else if(buffer[0] == \'s\') {//set display rect\n\n                                        } else if(buffer[0] == \'e\') {\n                                                aic_player_stop(player);\n                                                goto _EXIT0_;\n                                        } else {\n\n                                        }\n                                } else {\n                                        usleep(1000*1000);\n                                }\n                        }\n                }\n        }\n_EXIT0_:\n        aic_player_destroy(player);\n        return ret;\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"6-\u5e38\u89c1\u95ee\u9898",children:"6. \u5e38\u89c1\u95ee\u9898"}),"\n",(0,l.jsx)(n.p,{children:"\u5f85\u5b8c\u5584"})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(_,{...e})}):_(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>a,a:()=>t});var l=r(7294);const i={},s=l.createContext(i);function t(e){const n=l.useContext(s);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);